<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>GEETEST滑动验证码破解 | 35.32</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">GEETEST滑动验证码破解</h1><a id="logo" href="/.">35.32</a><p class="description">正如我视笛卡尔的愚蠢的本质</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">GEETEST滑动验证码破解</h1><div class="post-meta">Oct 4, 2018</div><div class="post-content"><p>验证码的破解，是网站爬虫正常运行所必须具备的功能。</p>
<a id="more"></a>   
<p> 注: 本文针对[<em>滑动验证被切割随机打乱，并根据源码中 <strong>&lt; DIV &gt;</strong> 标签顺序进行 <strong>取块排列</strong>  验证情况 ，属于常见的一种混淆方式</em>]</p>
<hr>
<p>关键词：</p>
<ol>
<li><strong><a href="#1" target="_self">图像分析</a></strong></li>
<li><strong><a href="#2" target="_self">图像拼接</a></strong></li>
</ol>
<p id="1"><br>图像分析:</p>


<p>   &nbsp;&nbsp; 我们以<a href="https://www.huxiu.com/" target="_blank" rel="noopener">虎嗅网</a>登陆页面为例，我们在输入手机注册前，需要通过一个滑动式的 <em>captcha</em> ,我们可以通过<code>webdriver.chrome  + selenium</code> 来模拟拖动，问题就在于究竟要拖动多远？拖动的距离究竟是多少？(offset 究竟是多少？)</p>
<p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fvxl234pokj30dg07w76i.jpg" alt="这是截图"></p>
<p>   &nbsp;&nbsp;仔细一想，如果有一个不存在缺口的<strong>源图片</strong>，那就舒服了，因为那样的话，我们只需比较，<code>源图哪些像素块，比上面的图形颜色更深，从而判断出深颜色缺口的位置</code>,这样我们就得到了，需要模拟拖动的距离了。那么从哪里可以得到原始图片呢？<br>   F12审查代码时，发现了这样两个&lt; div&gt;:</p>
<p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fvxku4epdej31620ew0uu.jpg" alt="黄线标出"></p>
<p>我们打开后发现，里面图片链接全部指向各自的那一个图片，<a href="http://ww1.sinaimg.cn/large/006YPp6gly1fvxkuhcc8ij31630iq41p.jpg" target="_blank" rel="noopener">一个长这样</a>,<a href="http://ww1.sinaimg.cn/large/006YPp6gly1fvxkxx3xzuj30kc0doabb.jpg" target="_blank" rel="noopener">一个长这样</a>,这，这！这不就是有缺口和没缺口的图片吗？</p>
<p></p><p id="2"> <br><br> 图像拼接:</p><br>等等，为什么乱了？<p></p>
<p>对，如果我们仔细观察，我们发现图片是被切割打乱了的，而且，我们判断，如果想得到原图，一定是要像拼积木一样把这些小块重新排列组合,那么，有什么规律在其中呢？我们该怎样一个一个拼呢？<br>其实，不难发现，我们在打开那两个标签后，我们发现一些整整齐齐的从上到下的标签，并且还有   <code>position</code>属性，x,值以12为差，最小1 最大 277，但y只有 0 或 58，由此分析出，从上到下，是我们取积木的顺序，取打乱图的第一个(x,y)坐标点对应处的一块积木，然后拼接到一个空白框的左上角，然后接着从乱图里面取出第二个位置的积木，紧挨着刚才那一个向右，此行满了换下一行，以此类推,最终得到一个完整图。<br>这样的话，我们的分析就结束了，然后我们通过像素比较就可以找出，缺口的位置，然后模拟拖动就ok了。<br>注意，实际应用中，我们需要实验性模拟拖动几次，再对拖动距离distance进行微修正，从而提高准确率。<br><br><br><br><a href="https://paste.ubuntu.com/p/y7PSVFdxsJ/" target="_blank" rel="noopener">源码</a><br><br><br><a href="https://www.jianshu.com/p/c8df1194b514" target="_blank" rel="noopener">参考博客</a></p>
</div><div class="tags"><a href="/tags/爬虫/">爬虫</a></div><div class="post-nav"><a class="pre" href="/2018/10/07/photo/">关于海</a><a class="next" href="/2018/10/02/learn_MarkDown/">快速熟悉 markdown</a></div><div id="container"></div><link rel="stylesheet" href="https://35p32.github.io/gitment/style/default.css"><script src="https://35p32.github.io/gitment/dist/gitment.browser.js"></script><script>var gitment = new Gitment({
  owner: '35p32## Your GitHub ID, e.g. username',
  repo: 'cogito',
  oauth: {
    client_id: 'e40571b1a5ccce57c5c4## GitHub client ID, e.g. 75752dafe7907a897619',
    client_secret: 'e7020e3140ee19bf8bea9bceece0133736bc5057',
  },
})
gitment.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/前端基础/" style="font-size: 15px;">前端基础</a> <a href="/tags/话/" style="font-size: 15px;">话</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a> <a href="/tags/工具/" style="font-size: 15px;">工具</a> <a href="/tags/爬/" style="font-size: 15px;">爬</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/10/28/Scrapy框架(二)/">Scrapy框架(二)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/28/Ajax和XHR/">Ajax和XHR</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/26/Scrapy/">Scrapy框架解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/21/nuisance/">不该死的人，还活着</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/20/wechatspider/">qppium模拟---微信朋友圈</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/20/MongoDB/">MongoDB</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/08/sougoupachong/">写在学习代理池和cookie池之后</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/07/python_new/">python の __new__()</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/07/photo/">关于海</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/04/huadongpojie/">GEETEST滑动验证码破解</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://www.baidu.com/s?ie=UTF-8&amp;wd=vps%E6%90%AD%E5%BB%BA" title="眼" target="_blank">眼</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">35.32.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>