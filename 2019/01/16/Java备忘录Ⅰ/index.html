<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Java备忘录Ⅰ | 35.32</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Java备忘录Ⅰ</h1><a id="logo" href="/.">35.32</a><p class="description">这些表象就是崇高和滑稽</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Java备忘录Ⅰ</h1><div class="post-meta">Jan 16, 2019</div><div class="post-content"><a id="more"></a>
<hr>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EMP</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> salary;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">EMP</span><span class="params">(<span class="keyword">int</span> a,String n,<span class="keyword">double</span> s)</span></span>&#123; </span><br><span class="line">		age =a;</span><br><span class="line">		name=n;</span><br><span class="line">		salary=s;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123; </span><br><span class="line">		age=a;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String n)</span></span>&#123;</span><br><span class="line">		name=n;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSalary</span><span class="params">(<span class="keyword">double</span> s)</span></span>&#123;</span><br><span class="line">		salary = s;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span></span>&#123;  </span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getSalary</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> salary;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String  <span class="title">getInfo</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"NAME IS:"</span>+name+<span class="string">"\n"</span>+<span class="string">"AGE IS:"</span>+age+<span class="string">"\n"</span>+<span class="string">"SALARY IS:"</span>+salary+<span class="string">"\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">empdemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">			EMP e=<span class="keyword">new</span> EMP(<span class="number">1132</span>,<span class="string">"Mr.k"</span>,<span class="number">1.0</span>);</span><br><span class="line">			System.out.println(e.getInfo());</span><br><span class="line">			e.setName(<span class="string">"Mike"</span>);</span><br><span class="line">			System.out.println(e.getName());</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
 <font color="green" size="30">Java命名规范</font>

<ul>
<li>类名称:  每个单词首字母大写   如<code>StudentInfo</code></li>
<li>属性名称: 第一个单词首字母大写，其余小写 如 <code>Studentname</code></li>
<li>方法名称: 第一个单词之外的单词首字母大写 如 <code>getName()</code></li>
<li>常量名称: 全部大写 如<code>MSG</code></li>
<li>包名称: 全部小写 如<code>no1.no2.XXX</code></li>
</ul>
<hr>
<font color="blue" size="55">String初始化方法</font>

<p>关于字符串的比较，我们必须明确</p>
<p><code>=等号 只能用于数值比较</code></p>
<p><code>非要让String对象用等号进行的话，比较的双方只会比较地址</code></p>
<p>我们声明一个String对象，常用两种方法</p>
<p>第一： <font color="RED">  String  str= “test”</font></p>
<p>第二：   <font color="red">String  str= new String(“test”)</font></p>
<p>我们必须知道</p>
<font color="blue">第一种</font>是匿明声明，<code>test</code>此时在堆内存当中，只有一个，你仔细观察下面的<em>str1</em>和<em>str4</em>，它俩都指向了堆里面的一个匿名对象，无论有成千上万个str，只要它们都采用不加new的第一种声明方式，那么它们仅仅都是指向了同一个字符串而已，它们的地址一样，它们的内容一样，因为它们没有用new声明，堆里面，只有一个”test”而已<br><br> <font color="blue">第二种</font>声明，和上面的匿名声明对比，意味着，每次声明都会在堆内存中，新创建一个崭新的字符串，看对比<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String str1=new String(&quot;test1&quot;);</span><br><span class="line">String str2=new String(&quot;test1&quot;);</span><br><span class="line"></span><br><span class="line">System.out.println(str1==str2);  //结果是 false</span><br></pre></td></tr></table></figure><br><br>结果是false意味着，即使内容不同，因为这两个对象都是用的new来创建的，所以，它们分居在堆内存的不同位置，有成千上万个new对象，堆内存中就有成千上万个字符串。<br><br><br><br>* 总的来说<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">String str1=&quot;test1&quot;;</span><br><span class="line">String str2=&quot;test1&quot;;</span><br><span class="line">String str3=new String(&quot;test1&quot;);</span><br><span class="line">String str4=new String(&quot;test1&quot;);</span><br><span class="line">String str5=str2;</span><br><span class="line"></span><br><span class="line">System.out.println(str1==str2);    		//true因为匿名声明，指向一模一样的地址  </span><br><span class="line">System.out.println(str3==str2);			//false 因为两者地址不同</span><br><span class="line">System.out.println(str1.equals(str2));  //true 因为内容相同</span><br><span class="line">System.out.println(str2.equals(str3));	//true 因为内容相同	</span><br><span class="line">System.out.println(str3==str4);			//false 因为地址不同</span><br><span class="line">System.out.println(str3.equals(str4));	//true 因为内容相同</span><br><span class="line">System.out.println(str5==str2);			//true 因为复制操作，str5和str2指向一处</span><br></pre></td></tr></table></figure><br><br>—<br><br><font color="purple" size="40">String 的构造方法</font>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">String() </span><br><span class="line">          初始化一个新创建的 String 对象，使其表示一个空字符序列。</span><br><span class="line">          </span><br><span class="line">String(<span class="keyword">byte</span>[] bytes) </span><br><span class="line">          通过使用平台的默认字符集解码指定的 <span class="keyword">byte</span> 数组，构造一个新的 String。</span><br><span class="line">          </span><br><span class="line">String(<span class="keyword">byte</span>[] bytes, Charset charset)   </span><br><span class="line">          通过使用指定的 charset 解码指定的 <span class="keyword">byte</span> 数组，构造一个新的 String。</span><br><span class="line">          </span><br><span class="line">String(<span class="keyword">byte</span>[] ascii, <span class="keyword">int</span> hibyte) </span><br><span class="line">          已过时。 该方法无法将字节正确地转换为字符。从 JDK <span class="number">1.1</span> 开始，完成该转换的首选方法是使用带有 Charset、字符集名称，或使用平台默认字符集的 String 构造方法。</span><br><span class="line">          </span><br><span class="line">String(<span class="keyword">byte</span>[] bytes, <span class="keyword">int</span> offset, <span class="keyword">int</span> length) </span><br><span class="line">          通过使用平台的默认字符集解码指定的 <span class="keyword">byte</span> 子数组，构造一个新的 String。</span><br><span class="line">          </span><br><span class="line">String(<span class="keyword">byte</span>[] bytes, <span class="keyword">int</span> offset, <span class="keyword">int</span> length, Charset charset) </span><br><span class="line">          通过使用指定的 charset 解码指定的 <span class="keyword">byte</span> 子数组，构造一个新的 String。</span><br><span class="line">          </span><br><span class="line">String(<span class="keyword">byte</span>[] ascii, <span class="keyword">int</span> hibyte, <span class="keyword">int</span> offset, <span class="keyword">int</span> count) </span><br><span class="line">          已过时。 该方法无法将字节正确地转换为字符。从 JDK <span class="number">1.1</span> 开始，完成该转换的首选方法是使用带有 Charset、字符集名称，或使用平台默认字符集的 String 构造方法。</span><br><span class="line">          </span><br><span class="line">String(<span class="keyword">byte</span>[] bytes, <span class="keyword">int</span> offset, <span class="keyword">int</span> length, String charsetName) </span><br><span class="line">          通过使用指定的字符集解码指定的 <span class="keyword">byte</span> 子数组，构造一个新的 String。</span><br><span class="line">          </span><br><span class="line">String(<span class="keyword">byte</span>[] bytes, String charsetName) </span><br><span class="line">          通过使用指定的 charset 解码指定的 <span class="keyword">byte</span> 数组，构造一个新的 String。</span><br><span class="line">          </span><br><span class="line">String(<span class="keyword">char</span>[] value) </span><br><span class="line">          分配一个新的 String，使其表示字符数组参数中当前包含的字符序列。</span><br><span class="line">          </span><br><span class="line">String(<span class="keyword">char</span>[] value, <span class="keyword">int</span> offset, <span class="keyword">int</span> count) </span><br><span class="line">          分配一个新的 String，它包含取自字符数组参数一个子数组的字符。</span><br><span class="line">          </span><br><span class="line">String(<span class="keyword">int</span>[] codePoints, <span class="keyword">int</span> offset, <span class="keyword">int</span> count) </span><br><span class="line">          分配一个新的 String，它包含 Unicode 代码点数组参数一个子数组的字符。</span><br><span class="line">          </span><br><span class="line">String(String original) </span><br><span class="line">          初始化一个新创建的 String 对象，使其表示一个与参数相同的字符序列；换句话说，新创建的字符串是该参数字符串的副本。</span><br><span class="line">          </span><br><span class="line">String(StringBuffer buffer) </span><br><span class="line">          分配一个新的字符串，它包含字符串缓冲区参数中当前包含的字符序列。</span><br><span class="line">          </span><br><span class="line">String(StringBuilder builder) </span><br><span class="line">          分配一个新的字符串，它包含字符串生成器参数中当前包含的字符序列。</span><br></pre></td></tr></table></figure>
<p>​    </p>
<hr>
<p>String 之中我们常用的函数方法</p>
<p><strong>str.toCharArray( )</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">String str1=new String(&quot;DoASYouSaid&quot;);</span><br><span class="line">char[] b = str1.toCharArray();</span><br></pre></td></tr></table></figure>
<p><strong>String str1 = new String(str)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String str1 = new String(&quot;OkMan.&quot;);</span><br><span class="line">String temp = new String(str1);</span><br><span class="line">System.out.println(temp);</span><br><span class="line">-&gt; OkMan</span><br></pre></td></tr></table></figure>
<hr>
<font color="red" size="50">类的传递</font>  

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> Car car;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Human</span><span class="params">(<span class="keyword">int</span> age,String name)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setcar</span><span class="params">(Car car)</span></span>&#123; 	<span class="comment">//一个人有车,人里面必须有设置车的信息</span></span><br><span class="line">		<span class="keyword">this</span>.car=car;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Car <span class="title">getcar</span><span class="params">()</span></span>&#123; 			<span class="comment">//从人获得车信息</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.car;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getinfo</span><span class="params">()</span></span>&#123;		</span><br><span class="line">		<span class="keyword">return</span>  <span class="string">"Info is:"</span>+<span class="keyword">this</span>.age+<span class="string">" "</span>+<span class="keyword">this</span>.name;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String carname;</span><br><span class="line">	<span class="keyword">private</span> Human h;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Car</span><span class="params">(String carname)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.carname = carname;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sethuman</span><span class="params">(Human h)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.h=h;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span>  Human <span class="title">gethuman</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.h;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getinfo</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Info is: "</span>+<span class="keyword">this</span>.carname;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>  <span class="class"><span class="keyword">class</span>  <span class="title">ChuanDi</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		Human h =<span class="keyword">new</span> Human(<span class="number">23</span>,<span class="string">"boom"</span>);</span><br><span class="line">		Car c = <span class="keyword">new</span> Car(<span class="string">"McLaRen"</span>);</span><br><span class="line">		h.setcar(c);</span><br><span class="line">		 System.out.println( h.getcar().getinfo() );</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<font color="green" size="45"> 重写和重载</font><br><br><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fzeasxqwcjj30qx0pkqea.jpg" alt=""><br><br>&gt; 这也就是说，重写体现了子类和父类之间多态的体现<br>&gt;<br>&gt; 重载是类之中的多态性的体现<br><br><br><br><br><br><font color="red" font="30"> 继承中容易的犯错 </font>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"///"</span>);		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"***"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">jicheng</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		A a = <span class="keyword">new</span> A(); 			<span class="comment">//1</span></span><br><span class="line">		B b = (B)  a;  			<span class="comment">//2</span></span><br><span class="line">		b.print();				<span class="comment">//3</span></span><br><span class="line"></span><br><span class="line">		B b2= <span class="keyword">new</span> B();			<span class="comment">//4</span></span><br><span class="line">		A a2 = (A) b2;			<span class="comment">//5</span></span><br><span class="line">		a2.print();				<span class="comment">//6</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这是个很简单直白的代码，B继承了A，并且对于A中的print()方法进行了覆写.</p>
<p>我们的问题是:</p>
<blockquote>
<p>只有 1 2 3 行执行时，什么结果</p>
<p>只有 4 5 6 行执行时，什么结果</p>
</blockquote>
<p>答案是:</p>
<blockquote>
<p>一，执行错误：Exception in thread “main” java.lang.ClassCastException: A cannot be cast to B<br>​                 </p>
<p>二，成功执行输出 ***</p>
</blockquote>
<p>原因是：</p>
<blockquote>
<p> 让 a 向下转型，转型为B类 。这个时候报错，A并不知道自己的子类是什么，从上到下，无法向下转型</p>
<p>而向上转型可成功执行</p>
</blockquote>
<font color="blue" size="40"> Usb接口简单实现</font>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Usb</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flash</span> <span class="keyword">implements</span> <span class="title">Usb</span></span>&#123;            <span class="comment">//继承Usb接口以覆写方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Flash start!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Flash stop!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Printer</span> <span class="keyword">implements</span> <span class="title">Usb</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Printer start!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Printer stop!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">computer</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">(Usb usb)</span></span>&#123; 			<span class="comment">//computer只能看得到Usb</span></span><br><span class="line">		usb.start();</span><br><span class="line">		usb.stop();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Usbinterface</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		computer c1 = <span class="keyword">new</span> computer();</span><br><span class="line">		c1.work(<span class="keyword">new</span> Flash());</span><br><span class="line">		c1.work(<span class="keyword">new</span> Printer());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<font color="blue" size="30"> 工厂设计模式</font>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span>  <span class="title">Fruit</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Apple</span> <span class="keyword">implements</span> <span class="title">Fruit</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Eating Apples!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Orange</span> <span class="keyword">implements</span> <span class="title">Fruit</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Eating Orange!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Factory</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Fruit <span class="title">chose</span><span class="params">(String s)</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(<span class="string">"Apple"</span>.equals(s))&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> Apple();</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">"Orange"</span>.equals(s))&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> Orange();</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Factory_test</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		Fruit f =  Factory.chose(<span class="string">"Orange"</span>);</span><br><span class="line">		f.eat();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<font color="blue" size="30"> 代理设计模式</font>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span>  <span class="title">Subject</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RealSubject</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Fooing"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;	</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProxySubject</span> <span class="keyword">implements</span> <span class="title">Subject</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> RealSubject subject;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ProxySubject</span><span class="params">(RealSubject realsubject)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.subject = realsubject;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Beforefoo</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Before fooing!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.Beforefoo();</span><br><span class="line">		<span class="keyword">this</span>.subject.foo();</span><br><span class="line">		<span class="keyword">this</span>.Afterfoo();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Afterfoo</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"After fooing"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Proxy</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		Subject s = <span class="keyword">new</span> ProxySubject(<span class="keyword">new</span> RealSubject());</span><br><span class="line">		s.foo();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<font color="blue" size="30"> Object类</font>

<p><code>object</code>类是所有类的子类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span> <span class="keyword">extends</span> <span class="title">Object</span></span>&#123;&#125; 					<span class="comment">// 继承Object</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Object_class</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		Object obja = <span class="keyword">new</span> Book();			 	<span class="comment">// 向上转型</span></span><br><span class="line">		Object objb = <span class="string">"This is  a String"</span>; 		<span class="comment">//向上转型,Object 也是 String 的父类</span></span><br><span class="line">		Book b =(Book) obja; 					<span class="comment">//向下转型</span></span><br><span class="line">		String s = (String) objb;			 	<span class="comment">//向下转型</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<font color="red" size="3"> Object 之toString() 方法</font>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String bookname=<span class="string">""</span>;</span><br><span class="line">	<span class="keyword">private</span> String author = <span class="string">""</span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Book</span><span class="params">(String bookname,String author)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.bookname = bookname;</span><br><span class="line">		<span class="keyword">this</span>.author = author;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (<span class="keyword">this</span>.author+<span class="string">","</span>+<span class="keyword">this</span>.bookname);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book2</span></span>&#123;                       <span class="comment">//Book2没有重写从 Object 那继承来的 toString()方法</span></span><br><span class="line">	<span class="keyword">private</span> String bookname=<span class="string">""</span>;</span><br><span class="line">	<span class="keyword">private</span> String author = <span class="string">""</span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Book2</span><span class="params">(String bookname,String author)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.bookname = bookname;</span><br><span class="line">		<span class="keyword">this</span>.author = author;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Object_toString</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		Book b = <span class="keyword">new</span> Book(<span class="string">"道德的谱系"</span>,<span class="string">"尼采"</span>);</span><br><span class="line">		Book2 b2 = <span class="keyword">new</span> Book2(<span class="string">"悲剧的诞生"</span>,<span class="string">"尼采"</span>);</span><br><span class="line">		System.out.println(b);</span><br><span class="line">		System.out.println(b2); 		<span class="comment">//因为Book2 没有重写toString(),所以打印出了地址</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">尼采,道德的谱系</span></span><br><span class="line"><span class="comment">Book2@6d06d69c</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<font color="red" size="3"> Object 之 equals() 方法</font>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String title=<span class="string">""</span>;</span><br><span class="line">	<span class="keyword">private</span> String author=<span class="string">""</span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span>  <span class="title">Book</span><span class="params">(String title,String author)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">		<span class="keyword">this</span>.author = author;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span></span>&#123;  <span class="comment">//以下为对从Object中继承的equals()的重写</span></span><br><span class="line">		<span class="keyword">if</span>(!(obj <span class="keyword">instanceof</span> Book))</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">this</span> == obj)</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		<span class="keyword">if</span>(obj == <span class="keyword">null</span>)</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		Book b = (Book) obj; <span class="comment">//关键,缺少这一步必定报错。因为 title,author 是下层的属性, Object 向下转型才能取得这类特殊属性。</span></span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">this</span>.title.equals(b.title) &amp;&amp; <span class="keyword">this</span>.author.equals(b.author) ) </span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		<span class="keyword">return</span>  <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Object_equals</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		Book b1 = <span class="keyword">new</span> Book(<span class="string">"兄弟"</span>,<span class="string">"余华"</span>);</span><br><span class="line">		Book b2 = <span class="keyword">new</span> Book(<span class="string">"基督山伯爵"</span>,<span class="string">"大仲马"</span>);</span><br><span class="line">		System.out.println(b1.equals(b2));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">尼采,道德的谱系</span></span><br><span class="line"><span class="comment">Book2@6d06d69c</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<font color="blue" size="30"> 包装数据类型</font>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">baozhuanglei</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		String s1=<span class="string">"1532"</span>;</span><br><span class="line">		<span class="keyword">int</span> i1 = <span class="number">144</span>;</span><br><span class="line"></span><br><span class="line">		Integer i2 = <span class="keyword">new</span> Integer(<span class="number">1</span>);	 <span class="comment">//直接通过构造函数的方式进行声明</span></span><br><span class="line"></span><br><span class="line">		Integer i3 = <span class="number">1</span>;	 				 <span class="comment">//把 1 自动装箱成一个Integer类</span></span><br><span class="line">		<span class="keyword">int</span> i4 = i3;					 <span class="comment">//自动拆箱</span></span><br><span class="line">      	Integer i5 =i3;					 <span class="comment">//类复制</span></span><br><span class="line"></span><br><span class="line">      	<span class="comment">//以下说明类不能直接比较 i2 i3 i5 都是类，除非这俩类是同一个类，比如 i3 和 i5</span></span><br><span class="line">		System.out.println(i2==i3); 	<span class="comment">// false </span></span><br><span class="line">		System.out.println(i3==i4);		<span class="comment">// true</span></span><br><span class="line">		System.out.println(i2==i4);		<span class="comment">// true </span></span><br><span class="line">		System.out.println(i2==i5);		<span class="comment">// false</span></span><br><span class="line">		System.out.println(i4==i5);	  	<span class="comment">// true </span></span><br><span class="line">		System.out.println(i3==i5);	  	<span class="comment">// true 为啥这俩类比较是相等的呢?因为这俩类实际就是一个类</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">	    <span class="comment">//从代表X数据类型的字符串，转换为X,使用类似 X.parseX 	的方法。</span></span><br><span class="line">		System.out.println(Integer.parseInt(s1));</span><br><span class="line">		<span class="comment">//从某种数据类型转化为字符串，使用String.valueof()方法。</span></span><br><span class="line">        System.out.println(String.valueOf(i1));   </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><font color="blue" size="30"> 单例设计模式</font></p>
<blockquote>
<p>如果想控制一个类中实例化对象的个数    //比如我想让我定义的类无论声明几次都只有一个实例</p>
<p>需要锁定构造法方法      //在构造方法上加一个private</p>
<p>因为新对象必须要依靠构造方法，锁了构造方法意味着锁了对象</p>
<p>又因为既然只需要一个实例化对象，可以在类的内部使用 static 的方法来定义一个公共对象</p>
<p>每次 static 构造方法返回一个唯一的对象，这样外部不管有多少次调用，最终一个类只产生一个唯一的对象。</p>
</blockquote>
<p>例程:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no21;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</span><br><span class="line">    <span class="comment">//final 保证了INSTANCE的值不会再改变</span></span><br><span class="line">    <span class="comment">//paivate 保证了 这是个私有对象， 但外部可以通过getter方法得到</span></span><br><span class="line">    <span class="comment">//static 保证了 外界每次得到的都是同一个公共的对象</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span>  <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton(); <span class="comment">//私有化静态内部变量</span></span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125; <span class="comment">//构造方法私有化,保证外界不能直接实例化对象</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;<span class="comment">//getter方法，保证外界可以实例化</span></span><br><span class="line">		<span class="keyword">return</span> INSTANCE;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Hello World!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>  <span class="class"><span class="keyword">class</span> <span class="title">SingletonTest</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		Singleton  s =<span class="keyword">null</span>; <span class="comment">//声明对象</span></span><br><span class="line">		s =  Singleton.getInstance();</span><br><span class="line">		s.print();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的代码稍加改进:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no21;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span>  <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton();</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125; </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(INSTANCE == <span class="keyword">null</span> )&#123;           	<span class="comment">//不同</span></span><br><span class="line">			INSTANCE = <span class="keyword">new</span> Singleton(); 	<span class="comment">//不同</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Hello World!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>  <span class="class"><span class="keyword">class</span> <span class="title">SingletonTest</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		Singleton  s =<span class="keyword">null</span>; </span><br><span class="line">		s =  Singleton.getInstance();</span><br><span class="line">		s.print();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<font color="blue" size="30"> 多例设计模式</font>

<blockquote>
<p>多例也必须 构造方法私有化</p>
<p>但是一个类 可以提供多个实例化对象</p>
</blockquote>
<p>例程: </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sex</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String title; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span>  Sex MALE = <span class="keyword">new</span> Sex(<span class="string">"男"</span>);</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span>  Sex FEMALE = <span class="keyword">new</span> Sex(<span class="string">"女"</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Sex</span><span class="params">(String s)</span></span>&#123;			<span class="comment">//构造方法私有化	</span></span><br><span class="line">		<span class="keyword">this</span>.title = s;</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123; 		<span class="comment">//重写 toString方法</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.title;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Sex <span class="title">getSex</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;  <span class="comment">//让外部选择，从有限个静态对象中选择</span></span><br><span class="line">		<span class="keyword">switch</span>(i)&#123;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">				<span class="keyword">return</span> MALE;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">				<span class="keyword">return</span> FEMALE;</span><br><span class="line">			<span class="keyword">default</span>:</span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;  </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Multiton</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String argg[])</span></span>&#123;</span><br><span class="line">		Sex  sex = Sex.getSex(<span class="number">1</span>);</span><br><span class="line">		System.out.println(sex);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<font color="red" size="30">异常捕获及处理</font>

<p>对于这个程序段</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">"开始计算"</span>);</span><br><span class="line">System.out.println(<span class="string">"计算除法"</span>+ (<span class="number">10</span>/ <span class="number">2</span>));</span><br><span class="line">System.out.println(<span class="string">"计算结束"</span>);</span><br></pre></td></tr></table></figure>
<p>可以输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">开始计算</span><br><span class="line">计算除法: 5</span><br><span class="line">计算结束</span><br></pre></td></tr></table></figure>
<p>》但是，一旦被除数是零</p>
<p>由于我们没有对异常进行处理,  程序会中断，结果变成:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">开始计算</span><br><span class="line">Exception in thread &quot;main&quot; java.lang.ArithmeticException: / by zero</span><br><span class="line">        at Yichang.main(Yichang.java:4)</span><br></pre></td></tr></table></figure>
<p>意味着<code>发生异常的第二句以及第二句之后的句子都不执行了</code></p>
<p>如果把程序改写为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">"开始计算"</span>);</span><br><span class="line"><span class="keyword">try</span>&#123;       			</span><br><span class="line">	System.out.println(<span class="string">"计算除法"</span>+ (x/ y));</span><br><span class="line">&#125;<span class="keyword">catch</span>(Exception e )&#123;					<span class="comment">//java对于异常的捕捉时十分方便的</span></span><br><span class="line">	e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">"计算结束"</span>);</span><br></pre></td></tr></table></figure>
<p>那么意味着 只监视 try 内容里面的代码，一旦被监视者发生错误，我们 catch 到了这个错误，使用printStackTrace() 方法将错误信息打印出来。 结果是:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">开始计算</span><br><span class="line">java.lang.ArithmeticException: / by zero</span><br><span class="line">        at Yichang.main(Yichang.java:<span class="number">15</span>)</span><br><span class="line">计算结束</span><br></pre></td></tr></table></figure>
<p>更加有代表性的代码是：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Yichang</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"开始计算"</span>);</span><br><span class="line">		</span><br><span class="line">        <span class="keyword">int</span> x= Integer.parseInt(args[<span class="number">0</span>]);  <span class="comment">//用户输入 x</span></span><br><span class="line">        <span class="keyword">int</span> y= Integer.parseInt(args[<span class="number">1</span>]);  <span class="comment">//用户输入 y</span></span><br><span class="line">		</span><br><span class="line">        <span class="comment">/*捕获*/</span></span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			System.out.println(<span class="string">"计算除法"</span>+ (x/ y))</span><br><span class="line">		&#125;<span class="keyword">catch</span>(Exception e )&#123;              </span><br><span class="line">			e.printStackTrace();		<span class="comment">//此处的报错 千变万化，取决于用户的输入有多不合理</span></span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"计算结束"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<font color="red" size="6.4">异常处理模板</font>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">math</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">div</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> <span class="keyword">throws</span> Exception</span>&#123; <span class="comment">//异常返回给调用者处理</span></span><br><span class="line">		<span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">		System.out.println(<span class="string">"除法运算开始"</span>);</span><br><span class="line">		res = x /y;</span><br><span class="line">		System.out.println(<span class="string">"除法运算结束"</span>);</span><br><span class="line">		<span class="keyword">return</span> res;</span><br><span class="line">	&#125; </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mymath</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			System.out.println(math.div(<span class="number">12</span>,<span class="number">0</span>));</span><br><span class="line">		&#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">		 	e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果却是!!!!! 如下</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">除法运算开始</span><br><span class="line">java.lang.ArithmeticException: / by zero</span><br><span class="line">        at math.div(Mymath.java:<span class="number">5</span>)</span><br><span class="line">        at Mymath.main(Mymath.java:<span class="number">14</span>)</span><br></pre></td></tr></table></figure>
<p>但是如果我们希望 <code>即使计算出错，也要把除法计算结束打印出来呢?</code></p>
<p>显然即使  <em>throws</em>  了异常，仍然需要在div方法，把计算错误的异常捕获一下子。</p>
<p>比如下面</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">math</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">div</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> <span class="keyword">throws</span> Exception</span>&#123; <span class="comment">//异常返回给调用者处理</span></span><br><span class="line">		<span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">		System.out.println(<span class="string">"除法运算开始"</span>);</span><br><span class="line">		<span class="comment">/*1号*/</span></span><br><span class="line">        <span class="keyword">try</span>&#123;                        		<span class="comment">//尽管throws了异常， 仍然要从根源处把异常捕获了</span></span><br><span class="line">			res = x /y;  					<span class="comment">//下面五种方法都可以，我们还是推荐第五种</span></span><br><span class="line">		&#125;<span class="keyword">catch</span>(Exception e)&#123;&#125;				<span class="comment">//记住第五种模板</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">/*2号*/</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">			res = x /y;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStacTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/*3号*/</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">			res = x /y;</span><br><span class="line">		&#125;<span class="keyword">catch</span>(Exception e)&#123;&#125;</span><br><span class="line">        <span class="keyword">finally</span>&#123;</span><br><span class="line">        	System.out.println(<span class="string">"除法运算结束"</span>);    </span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/*4号*/</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">			res = x /y;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span>&#123;</span><br><span class="line">        	System.out.println(<span class="string">"除法运算结束"</span>);    </span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/*5号*/</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">			res = x /y;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span>&#123;</span><br><span class="line">        	System.out.println(<span class="string">"除法运算结束"</span>);    </span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">		<span class="keyword">return</span> res;</span><br><span class="line">	&#125; </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mymath</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			System.out.println(math.div(<span class="number">12</span>,<span class="number">0</span>));</span><br><span class="line">		&#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">		 	e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<font color="blue" size="10">Java泛型</font>

<p>观察下面的危险代码:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no21.package1;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span></span>&#123;</span><br><span class="line">	Object x;</span><br><span class="line">	Object y;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setX</span><span class="params">(Object x)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.x = x;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setY</span><span class="params">(Object y)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.y = y;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">getX</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> x;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">getY</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> y;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FanXing</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//设置数据</span></span><br><span class="line">		Point p = <span class="keyword">new</span> Point();</span><br><span class="line">		p.setX(<span class="string">"东经12度"</span>);</span><br><span class="line">		p.setY(<span class="string">"北纬45度"</span>);</span><br><span class="line">		<span class="comment">//取出数据</span></span><br><span class="line">		String x =(String) p.getX(); <span class="comment">//从objet向下转型为Object</span></span><br><span class="line">		String y =(String) p.getY(); <span class="comment">//从objet向下转型为Object</span></span><br><span class="line">		System.out.println(<span class="string">"x坐标是: "</span>+ x +<span class="string">",y坐标是: "</span>+ y);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>危险</code>在于，取出数据的时候，执行了向下转型的操作，这在工程中是极其容易出错的手段。</p>
<p>所以就要引入泛型来解决这一问题.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no21.package1;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span>&lt;<span class="title">T</span>&gt;</span>&#123; <span class="comment">//泛型</span></span><br><span class="line">	 T x;</span><br><span class="line">	 T y;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setX</span><span class="params">(T x)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.x = x;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setY</span><span class="params">(T y)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.y = y;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getX</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> x;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getY</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> y;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FanXing</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//设置数据</span></span><br><span class="line">		Point&lt;String&gt; p = <span class="keyword">new</span> Point&lt;String&gt;();</span><br><span class="line">		p.setX(<span class="string">"这是哪里"</span>);</span><br><span class="line">		p.setY(<span class="string">"北纬12度"</span>);</span><br><span class="line">		<span class="comment">//取出数据</span></span><br><span class="line">		String x = p.getX();         <span class="comment">//注意这时候的 向下转型被取消了，这是泛型的优点</span></span><br><span class="line">		String y = p.getY();		 <span class="comment">//注意这时候的 向下转型被取消了，这是泛型的优点</span></span><br><span class="line">		System.out.println(<span class="string">"x坐标是: "</span>+ x +<span class="string">",y坐标是: "</span>+ y);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<font color="blue">泛型接口</font>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no22.package1;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IMessage</span>&lt;<span class="title">T</span>&gt;</span>&#123;  <span class="comment">//泛型接口,接口命名方式值得学习</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(T t)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MessageImpl</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">IMessage</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">	<span class="meta">@Override</span> <span class="comment">//覆写</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">		System.out.println(t);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Fanxingjiekou</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MessageImpl &lt;String&gt;  message = <span class="keyword">new</span> MessageImpl&lt;String&gt;();<span class="comment">//实例化时确定数据类型</span></span><br><span class="line">		message.print(<span class="string">"Hello World!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<font color="blue">泛型方法</font>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no22.package1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Fanxingfangfa</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		System.out.println(fun(<span class="string">"OkTomIWillBeWithYou"</span>));</span><br><span class="line">		System.out.println(fun(<span class="string">'S'</span>));</span><br><span class="line">		System.out.println(fun(<span class="number">12.3</span>));</span><br><span class="line">		System.out.println(fun(<span class="number">1</span>));</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">fun</span><span class="params">(T t)</span> </span>&#123; <span class="comment">// 泛型方法 ，第一个T代表泛型，第二个T代表返回值类型</span></span><br><span class="line">		<span class="keyword">return</span> t;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<font color="blue" size="20">Anotation</font> 注释；注解<br><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span> : 提醒是个覆写操作</span><br><span class="line"><span class="meta">@Deprecated</span> : 提醒这是个过期的操作</span><br><span class="line"><span class="meta">@SupperssWarnings</span> : 压制警告</span><br></pre></td></tr></table></figure><br><br><font color="blue" size="20"></font>



<font color="blue" size="10">Lamda表达式</font>

<font color="red">Lamda </font>是针对匿名内部类提出的，为了改进匿名内部类的语法而诞生的。<br><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no22.package1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IMessage2</span></span>&#123;           <span class="comment">//接口</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hanshushibiancheng</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">        <span class="comment">//就下面这一个方法，但是要知道因为fun方法含有 IMessage2 接口参数</span></span><br><span class="line">        <span class="comment">// fun函数 功能是把接口的print功能展示出来</span></span><br><span class="line">        <span class="comment">//但是 IMessage 这个接口的 print  方法是必须要复写落地的</span></span><br><span class="line">        <span class="comment">//因此在使用的时候 必须 new 一个匿名的内部类，把print 方法 实例化</span></span><br><span class="line">        fun(</span><br><span class="line">			 <span class="keyword">new</span> IMessage2()&#123;         <span class="comment">//匿名内部类</span></span><br><span class="line">				<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;  <span class="comment">//覆写接口print方法</span></span><br><span class="line">				 System.out.println(<span class="string">"Hello World!"</span>);&#125;&#125;</span><br><span class="line">			);</span><br><span class="line">		</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">(IMessage2 m)</span></span>&#123;     <span class="comment">//方法之中使用到了IMessage对象</span></span><br><span class="line">		m.print(); </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br>通过上面的代码我们可以观察到，匿名内部类的功能仅仅是  覆写一个方法。<br><br>我们使用  lamda 表达式可以改进这一做法<br><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fun( </span><br><span class="line">	</span><br><span class="line">	() -&gt; System.out.println(<span class="string">"H!"</span>) </span><br><span class="line">	</span><br><span class="line">	);</span><br></pre></td></tr></table></figure><br><br>我来解释一下<br><br><strong><em>因为 要想使用fun的话，我们在下边已经给出了fun的函数体，也就是fun的功能是啥 ; 但是要想使用fun，必须要覆写 包含在fu内部的接口的  print  方法 ，如果没有接口方法的覆写，那么fun始终不会动，当很清楚的而意识到了这一点后，直接将 要覆写的内容呈现出来， 即   ( 参数 -&gt; 覆写函数函数体 ) , 这样的话，直接了当，废话少</em></strong><br><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fun( </span><br><span class="line">	<span class="comment">//我们可以很清楚的知道，原来  这就是 覆写方法的样子</span></span><br><span class="line">	() -&gt; System.out.println(<span class="string">"H!"</span>)  </span><br><span class="line">	);</span><br></pre></td></tr></table></figure><br><br><font color="blue" size="9"> 方法的引用</font>

<p>大致上形如 </p>
<blockquote>
<p>X :: Y </p>
</blockquote>
<p>的引用就是方法的引用，其中 Y 是具体的一种方法，而 X 是拥有方法的或对象。</p>
<p>举个例子:</p>
<p>这个例子展现的是 类静态方法的引用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no22.package1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">imessage2</span>&lt;<span class="title">P</span>,<span class="title">Q</span>&gt;</span>&#123;          <span class="comment">//泛型接口 之中 有了一个 zhunahuan() 方法</span></span><br><span class="line">    <span class="comment">//返回值类型是Q ，参数类型是P</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Q  <span class="title">zhuahuan</span><span class="params">(P p)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Fangfayinyong</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//这里就是把 String 类的 valueOf 方法引用了一下</span></span><br><span class="line">        <span class="comment">// 这个方法被赋予给 接口实例化对象【msg】 来使用，这叫接口的引用</span></span><br><span class="line">		imessage2&lt;Integer,String&gt; msg = String::valueOf ;  </span><br><span class="line">		String s =msg.zhuahuan(<span class="number">111</span>);</span><br><span class="line">		</span><br><span class="line">		System.out.println(s.replace(<span class="string">"1"</span>, <span class="string">"3"</span>));	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>展现具体对象方法的引用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no22.package1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">I1</span>&lt;<span class="title">R</span>&gt;</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> R <span class="title">upper</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Fangfayinyong</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;	</span><br><span class="line">		</span><br><span class="line">		I1&lt;String&gt; exp1 = <span class="string">"Hello"</span> :: toUpperCase; 		  <span class="comment">//具体对象方法的引用</span></span><br><span class="line">		System.out.println(exp1.upper());</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 值得注意的是</p>
<font color="red">我们上述的接口内部只能够有一个方法，如果有多个方法程序就是错误的</font>

<p>为此，我们最好在接口上面加上一句话，就是</p>
<blockquote>
<p>@FunctionalInterface</p>
</blockquote>
<p>表明这是个函数式的接口</p>
<p>​    </p>
<p>展现构造方法的引用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no22.package1;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">I2</span>&lt;<span class="title">p</span>&gt;</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> p <span class="title">create</span><span class="params">(String t , <span class="keyword">double</span> p)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">	String title;</span><br><span class="line">	<span class="keyword">double</span> price;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">A</span><span class="params">(String title, <span class="keyword">double</span> price)</span> </span>&#123; <span class="comment">// A构造方法</span></span><br><span class="line">		<span class="keyword">this</span>.price= price;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;				<span class="comment">//复写 toString() 方法</span></span><br><span class="line">		<span class="keyword">return</span> (<span class="string">"书名是"</span> + <span class="keyword">this</span>.title + <span class="string">"价格是"</span> + <span class="keyword">this</span>.price);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Fangfayinyong</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">				</span><br><span class="line">		I2&lt;A&gt; exp2 = A:: <span class="keyword">new</span>; <span class="comment">//具体类的构造方法的引用</span></span><br><span class="line">		A a = exp2.create(<span class="string">"江南"</span>, <span class="number">13.2</span>);</span><br><span class="line">		System.out.println(a);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<font color="red" size="9">※※ 多线程实例</font>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no23.package1;</span><br><span class="line"><span class="keyword">import</span> java.lang.Thread;  <span class="comment">//导入线程类</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mythread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;   <span class="comment">//继承线程类</span></span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Mythread</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">23</span>;i++) &#123;</span><br><span class="line">			System.out.println(<span class="keyword">this</span>.name + i );</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Jinchengyuxiancheng</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Mythread m1 = <span class="keyword">new</span> Mythread(<span class="string">"no1"</span>) ;</span><br><span class="line">		Mythread m2 = <span class="keyword">new</span> Mythread(<span class="string">"no2"</span>) ;</span><br><span class="line">		Mythread m3 = <span class="keyword">new</span> Mythread(<span class="string">"no3"</span>) ;</span><br><span class="line">	<span class="comment">//以下三行代码输出的是  整整齐齐的 从no1到no3的顺序打印	</span></span><br><span class="line">		m1.run(); <span class="comment">//不是多线程,只是轮流执行方法</span></span><br><span class="line">		m2.run(); <span class="comment">//不是多线程,只是轮流执行方法</span></span><br><span class="line">		m3.run(); <span class="comment">//不是多线程,只是轮流执行方法</span></span><br><span class="line">    		</span><br><span class="line">	<span class="comment">//以下三行代码输出的是 杂乱无序的 no1 no2 no3 的混乱排列</span></span><br><span class="line">		m1.start(); <span class="comment">//多线程启动,抢占资源</span></span><br><span class="line">		m2.start(); <span class="comment">//多线程启动,抢占资源</span></span><br><span class="line">		m3.start(); <span class="comment">//多线程启动,抢占资源</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们其实通过对于源码的分析可知，要想启动多线程，必须使用<code>Thead类的start()</code>方法，如果想理解请查阅</p>
<p>Thread 的 start()方法源码。</p>
<p><strong><em>虽然 Thread 可以实现多线程的主体类定义，但是 Java 有单继承局限，为了解决单继承局限的问题，Java里面提供了 Runnable 接口 ，有一个事实我们必须明确，就是要想实现多线程 ，是必须调用  start  方法，也就是必须使用 Thread类的</em></strong></p>
<p><strong><em>同时，Thread 类 中有一个构造方法就是</em></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Thread</span><span class="params">(Runnable target)</span></span></span><br></pre></td></tr></table></figure>
<p><strong><em>意思是，Thread 类可以接收一个 Runnable 对象，从而形成一个Thread对象 ， 这个对象再使用  start 方法就可以解决多继承下的多线程问题</em></strong></p>
<p>范例: </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no23.package1;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123; 		<span class="comment">//首先为 Thread 准备好 Runnable 类</span></span><br><span class="line">	<span class="keyword">private</span> String name;	                       </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyRunnable</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;					</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i &lt; <span class="number">23</span> ;i++)&#123;</span><br><span class="line">			System.out.println(<span class="keyword">this</span>.name +<span class="string">"-&gt;"</span> + i );</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">duoxiancheng</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;    </span><br><span class="line">		MyRunnable  m1 = <span class="keyword">new</span> MyRunnable(<span class="string">"Jack"</span>);   <span class="comment">//得到实例化的 Runnable对象</span></span><br><span class="line">		MyRunnable  m2 = <span class="keyword">new</span> MyRunnable(<span class="string">"Tom"</span>);	   <span class="comment">//得到实例化的 Runnable对象</span></span><br><span class="line">		</span><br><span class="line">		<span class="keyword">new</span> Thread(m1).start();				 		<span class="comment">// 匿名的Thread对象</span></span><br><span class="line">		<span class="keyword">new</span> Thread(m2).start();				 		<span class="comment">// 匿名的Thread对象</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><em>你看上面的 多进程，都是纯粹的打印，而没有返回值，我们想要返回值的话应该怎样做呢？</em></strong></p>
<p>我们使用 <code>callable 接口  +  FutureTask()类</code> 的组合完成进程流的结果的收集.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no23.package1 ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.FutureTask;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mycallable</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">String</span>&gt;</span>&#123; <span class="comment">//Mycallable 类</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> ticket = <span class="number">10</span> ;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">20</span>;i++) &#123;</span><br><span class="line">			<span class="keyword">if</span>(<span class="keyword">this</span>.ticket&gt; <span class="number">0</span> ) &#123;</span><br><span class="line">				System.out.println(<span class="string">"卖票， ticket= "</span> + <span class="keyword">this</span>.ticket -- );</span><br><span class="line">			&#125;</span><br><span class="line">		  &#125;	</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"票买光了!"</span> ;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">duoxiancheng2</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException </span>&#123;</span><br><span class="line">		Mycallable c1 =<span class="keyword">new</span> Mycallable(); <span class="comment">//callable对象</span></span><br><span class="line">		Mycallable c2 =<span class="keyword">new</span> Mycallable(); <span class="comment">//callable对象</span></span><br><span class="line">		</span><br><span class="line">		FutureTask&lt;String&gt; f1 = <span class="keyword">new</span> FutureTask&lt;String&gt;(c1); <span class="comment">//中间结果过渡层</span></span><br><span class="line">		FutureTask&lt;String&gt; f2 = <span class="keyword">new</span> FutureTask&lt;String&gt;(c2); <span class="comment">// 中间结果过渡层</span></span><br><span class="line">		<span class="keyword">new</span> Thread(f1).start();		<span class="comment">//进程必须开始,才可能有结果,此两句省略，将没有返回值</span></span><br><span class="line">		<span class="keyword">new</span> Thread(f2).start();     </span><br><span class="line">		</span><br><span class="line">		System.out.println(f1.get());</span><br><span class="line">		System.out.println(f2.get());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  <font color="red"> callable 交给 FutureTask  交给 Thread  </font>

  <font color="red"> 只有 Thread 跑起来，FutureTask才可能收集到结果</font> 



<font color="gold"> 接下来深入理解进程和线程的关系</font>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no23.package1;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRunnable2</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(Thread.currentThread().getName()); <span class="comment">//输出进程流的名字</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test153</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyRunnable2 m1 = <span class="keyword">new</span> MyRunnable2();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">new</span> Thread(m1).start(); </span><br><span class="line">		<span class="keyword">new</span> Thread(m1).start();</span><br><span class="line"> 		<span class="keyword">new</span> Thread(m1).start();</span><br><span class="line">		m1.run();  </span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 第一次执行结果是  </span></span><br><span class="line"><span class="comment">		 * main</span></span><br><span class="line"><span class="comment">		 * Thread-2</span></span><br><span class="line"><span class="comment">		 * Thread-1</span></span><br><span class="line"><span class="comment">		 * Thread-0</span></span><br><span class="line"><span class="comment">		 * 第二次执行结果是</span></span><br><span class="line"><span class="comment">		 * main</span></span><br><span class="line"><span class="comment">		 * Thread-1</span></span><br><span class="line"><span class="comment">		 * Thread-2</span></span><br><span class="line"><span class="comment">		 * Thread-0</span></span><br><span class="line"><span class="comment">		 *</span></span><br><span class="line"><span class="comment">		 * 意味着如果你不给线程命名，线程会自动命名  	  </span></span><br><span class="line"><span class="comment">		 * 且 m1 由于出现在main的线程之下，而下面的三个new都可以归结为是Thread下面的线程，故它们的名字是main</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">        </span><br><span class="line">	&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Thread.currentThread().getName()</code>返回线程的名字。</p>
<p>这样一来，线程的执行顺序就被完完整整的记录了下来。</p>
<p>我们观察到: <strong><em>首先是main的线程，随后是 三个Thread类线程， 最重要的是，这三个线程的命名是有规律的，但是由于线程抢占资源，所以三个Thread的打印顺序不是有序的</em></strong></p>
<p>我们可以认为 <strong><em>每当我们运行一个Java程序的时候，我们都可以在任务管理器中看到一个新的 进程 的出现，所以我们认为， 一个     Jvm  进程启动的时候，main只是这个进程的一个线程而已。</em></strong></p>
<p><strong><em>且 Jvm 进程至少开启两个线程， 一： main线程，  二： gc线程 （垃圾收集）</em></strong></p>
<font color="blue"> 进程的同步和死锁 </font>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no23.package1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRun</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> ticket = <span class="number">5</span>;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">20</span>;i++) &#123;</span><br><span class="line">			<span class="keyword">if</span>(<span class="keyword">this</span>.ticket &gt;<span class="number">0</span>) &#123;</span><br><span class="line">				System.out.println(Thread.currentThread().getName()+ <span class="string">" 卖票，ticket ="</span> +ticket--);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;	</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test156</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyRun m1 = <span class="keyword">new</span> MyRun();</span><br><span class="line">		<span class="keyword">new</span> Thread(m1 ,<span class="string">"票贩子A"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(m1 ,<span class="string">"票贩子B"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(m1 ,<span class="string">"票贩子C"</span>).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">票贩子A 卖票，ticket =5</span></span><br><span class="line"><span class="comment">票贩子B 卖票，ticket =3</span></span><br><span class="line"><span class="comment">票贩子B 卖票，ticket =1</span></span><br><span class="line"><span class="comment">票贩子C 卖票，ticket =4</span></span><br><span class="line"><span class="comment">票贩子A 卖票，ticket =2</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>对比加了延迟之后的不同步的 Thread 们</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">package no2.no23.package1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class MyRun implements Runnable&#123;</span><br><span class="line">	private int ticket = 5;</span><br><span class="line">	@Override</span><br><span class="line">	public void run() &#123;</span><br><span class="line">		for(int i=0;i&lt;20;i++) &#123;</span><br><span class="line">			try &#123;</span><br><span class="line">				Thread.sleep(100);</span><br><span class="line">			&#125; catch (InterruptedException e) &#123;</span><br><span class="line">				// TODO Auto-generated catch block</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			if(this.ticket &gt;0) &#123;</span><br><span class="line">				System.out.println(Thread.currentThread().getName()+ &quot; 卖票，ticket =&quot; +ticket--);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;	</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class test156&#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		MyRun m1 = new MyRun();</span><br><span class="line">		new Thread(m1 ,&quot;票贩子A&quot;).start();</span><br><span class="line">		new Thread(m1 ,&quot;票贩子B&quot;).start();</span><br><span class="line">		new Thread(m1 ,&quot;票贩子C&quot;).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*  结果如下</span><br><span class="line">票贩子A 卖票，ticket =5</span><br><span class="line">票贩子B 卖票，ticket =4</span><br><span class="line">票贩子C 卖票，ticket =3</span><br><span class="line">票贩子C 卖票，ticket =2</span><br><span class="line">票贩子A 卖票，ticket =2</span><br><span class="line">票贩子B 卖票，ticket =2</span><br><span class="line">票贩子B 卖票，ticket =1</span><br><span class="line">票贩子A 卖票，ticket =1</span><br><span class="line">票贩子C 卖票，ticket =1</span><br><span class="line"></span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
<p><strong><em>上面加了延迟的相当就是，当一个进程判断到 ticket 剩一 的时候，他会进入到  for 里面去，但是还来不及改变 ticket ，又有另外一个 Thread 也判断了ticket 是1 ，也进入到 for 里面， 这两者最终会让 ticket的数值变为 -1 ，这就是不同步导致的问题。</em></strong></p>
<p><strong>事到如今，我们已经能够感觉到了，要想解决不同步引起的问题，对于上面卖票事务，必须要有这样一个逻辑，即</strong></p>
<blockquote>
<p>当一个票贩子通过判断语句之后，其他的票贩子就不能再进行判断了，以免造成多人进入</p>
</blockquote>
<p>Java 中要想实现线程的同步，可以使用  <code>synchronized</code> 关键字，而这个关键字可以通过两种方式使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. 同步代码块</span><br><span class="line"><span class="number">2</span>. 同步方法</span><br></pre></td></tr></table></figure>
<p><u>同步代码块</u></p>
<p>Java中有四种代码块：普通代码块，构造块，静态块，同步块。</p>
<p>观察同步代码块</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(<span class="keyword">this</span>)&#123;</span><br><span class="line">	代码部分；    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代码部分一次只允许一个线程进去</p>
<p><strong><em>于是我们在上面出错的程序之中的： if() 语句那部分给括起来，表明 这一块一次只能让一个线程进去</em></strong></p>
<p>最终改变为： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no23.package1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRun</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> ticket = <span class="number">5</span>;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">20</span>;i++) &#123;</span><br><span class="line">			<span class="keyword">synchronized</span>(<span class="keyword">this</span>) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				Thread.sleep(<span class="number">100</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(<span class="keyword">this</span>.ticket &gt;<span class="number">0</span>) &#123;</span><br><span class="line">				System.out.println(Thread.currentThread().getName()+ <span class="string">" 卖票，ticket ="</span> +ticket--);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;	</span><br><span class="line">	&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test156</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		MyRun m1 = <span class="keyword">new</span> MyRun();</span><br><span class="line">		<span class="keyword">new</span> Thread(m1 ,<span class="string">"票贩子A"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(m1 ,<span class="string">"票贩子B"</span>).start();</span><br><span class="line">		<span class="keyword">new</span> Thread(m1 ,<span class="string">"票贩子C"</span>).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><u>同步方法</u></p>
<p>上面的 给代码块加括号的行为实在是太难看了 </p>
<p>最好是把那一块封装起来，就叫同步方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	<span class="keyword">try</span> &#123;</span><br><span class="line">				Thread.sleep(<span class="number">100</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(<span class="keyword">this</span>.ticket &gt;<span class="number">0</span>) &#123;</span><br><span class="line">				System.out.println(Thread.currentThread().getName()+ <span class="string">" 卖票，ticket ="</span> +ticket--);</span><br><span class="line">		&#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样的话，class MyRun 就可以大大简化了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRun</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> ticket = <span class="number">5</span>;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.fun();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<font color="red">同步实战</font>

<p>目标： </p>
<p>设计一个生产消费模式( Producer and Customer )</p>
<p>实现  生产者生产一件商品，消费者就消费一件商品</p>
<p>利用多线程的初步构思如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no23.package1;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Inf</span></span>&#123;   				<span class="comment">//Inf类包含了一件商品的名字和内容，同时可以返回名字和内容</span></span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	<span class="keyword">private</span> String content;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTitle</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setContent</span><span class="params">(String content)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.content = content;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> title;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> content;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producer</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123; <span class="comment">//生产者类，循环生产鞋子和裤子,我们希望生产的被Customer使用</span></span><br><span class="line">	<span class="keyword">private</span> Inf infp;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Producer</span><span class="params">(Inf infp)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.infp = infp;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">101</span>;i++) &#123;</span><br><span class="line">			<span class="keyword">if</span>(i%<span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="keyword">this</span>.infp.setTitle(<span class="string">"一号物品"</span>);   		<span class="comment">//制造名字1</span></span><br><span class="line">				</span><br><span class="line">				<span class="keyword">try</span> &#123;										<span class="comment">//制造名字后 延迟 制造内容</span></span><br><span class="line">					Thread.sleep(<span class="number">100</span>);					</span><br><span class="line">				&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;			</span><br><span class="line">					<span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">				&#125;</span><br><span class="line">				</span><br><span class="line">				<span class="keyword">this</span>.infp.setContent(<span class="string">"11111111"</span>);			<span class="comment">//制造内容2</span></span><br><span class="line">			&#125;<span class="keyword">else</span> &#123; </span><br><span class="line">				<span class="keyword">this</span>.infp.setTitle(<span class="string">"二"</span>);		<span class="comment">//制造名字2</span></span><br><span class="line">				</span><br><span class="line">                <span class="keyword">try</span> &#123;										<span class="comment">//制造名字后 延迟 制造内容</span></span><br><span class="line">                   Thread.sleep(<span class="number">100</span>);</span><br><span class="line">				&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">					<span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">				&#125;</span><br><span class="line">				</span><br><span class="line">                <span class="keyword">this</span>.infp.setContent(<span class="string">"2222222"</span>); 		<span class="comment">//制造内容2</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">		</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Customer</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Inf infc; </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Customer</span><span class="params">(Inf infc)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.infc = infc;</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="meta">@Override</span> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;           <span class="comment">//针对传入的Inf对象，获取它的信息</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">100</span>;i++) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				Thread.sleep(<span class="number">10</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println(<span class="keyword">this</span>.infc.getTitle() + <span class="string">" - "</span> + <span class="keyword">this</span>.infc.getContent()); <span class="comment">//使用</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProducerAndCostumer</span> </span>&#123;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">			Inf inf = <span class="keyword">new</span> Inf();</span><br><span class="line">			<span class="keyword">new</span> Thread(<span class="keyword">new</span> Producer(inf)).start(); <span class="comment">//生产线程循环执行</span></span><br><span class="line">			<span class="keyword">new</span> Thread(<span class="keyword">new</span> Customer(inf)).start(); <span class="comment">//消费进程循环执行</span></span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果是<a href="https://paste.ubuntu.com/p/9yT6s7z54v/" target="_blank" rel="noopener">点击查看结果</a></p>
<p>原因很简单，消费者线程和生产者进程并驾齐驱，生产者刚  命名，还没有 设置内容 的时候，消费者就急着消费了，这是不同步造成的，详细的说，这是由于 <strong>名字和内容之间存在时间间隔，名字设置好了，进入等待期，这个时候，消费者就开始消费了，然后才开始设置内容</strong></p>
<p>这就是<strong><em>不同步</em></strong></p>
<p>第一个解决想法就是，把起名字和写内容 放在一块，也即是一个 同步块里面</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no23.package1;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Inf</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	<span class="keyword">private</span> String content;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(String title, String content)</span></span>&#123; <span class="comment">//名字和内容的设置同步了</span></span><br><span class="line">		<span class="keyword">this</span>.title = title;						<span class="comment">//设置名字	</span></span><br><span class="line">        </span><br><span class="line">		<span class="keyword">try</span> &#123;									<span class="comment">//加延迟</span></span><br><span class="line">			Thread.sleep(<span class="number">200</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">			<span class="comment">// <span class="doctag">TODO:</span> handle exception	</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">this</span>.content = content;					<span class="comment">//设置内容</span></span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">()</span> </span>&#123;     <span class="comment">//调用get方法可以实现信息的打印</span></span><br><span class="line">		System.out.println(<span class="string">"名字是"</span>+ <span class="keyword">this</span>.title + <span class="string">"内容是"</span> + <span class="keyword">this</span>.content);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producer</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123; <span class="comment">//生产者，循环生产鞋子和裤子</span></span><br><span class="line">	<span class="keyword">private</span> Inf infp;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Producer</span><span class="params">(Inf infp)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.infp = infp;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">101</span>;i++) &#123;</span><br><span class="line">			<span class="keyword">if</span>(i%<span class="number">2</span>==<span class="number">1</span>) &#123;</span><br><span class="line">				<span class="keyword">this</span>.infp.set(<span class="string">"啦啦啦"</span>, <span class="string">"lalala"</span>);</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">this</span>.infp.set(<span class="string">"哈哈哈"</span>, <span class="string">"hahaha"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Customer</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Inf infc; </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Customer</span><span class="params">(Inf infc)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.infc = infc;</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="meta">@Override</span> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">100</span>;i++) &#123;</span><br><span class="line">			<span class="keyword">this</span>.infc.get();       <span class="comment">//没延迟，直接调用get方法打印.</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProducerAndCustomer</span> </span>&#123;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">			Inf inf = <span class="keyword">new</span> Inf();</span><br><span class="line">			<span class="keyword">new</span> Thread(<span class="keyword">new</span> Producer(inf)).start();	</span><br><span class="line">			<span class="keyword">new</span> Thread(<span class="keyword">new</span> Customer(inf)).start();</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果是<a href="https://paste.ubuntu.com/p/kZVqQ75QNK/" target="_blank" rel="noopener">点击查看结果</a></p>
<p>我们发现，虽然很好的解决了错乱问题，但是内容重复问题仍然严重，依旧无法像理想的那样，一个接着一个不同的进行打印。</p>
<p>我们需要等待与唤醒机制解决。</p>
<p>关于等待与唤醒机制</p>
<p>因此，我们使用 <strong>object</strong>  类的 <code>wait()</code>方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> no2.no23.package1;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Inf</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	<span class="keyword">private</span> String content;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> flag;</span><br><span class="line">	<span class="comment">// flag = true 表示可以生产</span></span><br><span class="line">	<span class="comment">// flag = fase 表示不可以生产</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(String title, String content)</span> </span>&#123;</span><br><span class="line">		<span class="comment">/**判断能不能生产，如果不能，证明上一波生产还没有被使用**/</span></span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">this</span>.flag == <span class="keyword">false</span> )</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="keyword">super</span>.wait();</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">			&#125;</span><br><span class="line">		<span class="comment">/****/</span></span><br><span class="line">		</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Thread.sleep(<span class="number">200</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">			<span class="comment">// <span class="doctag">TODO:</span> handle exception	</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">this</span>.content = content;</span><br><span class="line">		<span class="keyword">this</span>.flag = <span class="keyword">false</span>;</span><br><span class="line">		<span class="keyword">super</span>.notify(); <span class="comment">//唤醒其他等待</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">this</span>.flag == <span class="keyword">true</span> )&#123;  <span class="comment">//可以生产，说明还没生产呢，无法使用</span></span><br><span class="line">			<span class="keyword">super</span>.wait();</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"名字是"</span>+ <span class="keyword">this</span>.title + <span class="string">"内容是"</span> + <span class="keyword">this</span>.content);</span><br><span class="line">		<span class="keyword">this</span>.flag = <span class="keyword">true</span>;</span><br><span class="line">		<span class="keyword">super</span>.notify();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producer</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123; <span class="comment">//生产者，循环生产鞋子和裤子</span></span><br><span class="line">	<span class="keyword">private</span> Inf infp;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Producer</span><span class="params">(Inf infp)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.infp = infp;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">101</span>;i++) &#123;</span><br><span class="line">			<span class="keyword">if</span>(i%<span class="number">2</span>==<span class="number">1</span>) &#123;</span><br><span class="line">				<span class="keyword">this</span>.infp.set(<span class="string">"啦啦啦"</span>, <span class="string">"lalala"</span>);</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">this</span>.infp.set(<span class="string">"哈哈哈"</span>, <span class="string">"hahaha"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Customer</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Inf infc; </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Customer</span><span class="params">(Inf infc)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.infc = infc;</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="meta">@Override</span> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">100</span>;i++) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="keyword">this</span>.infc.get();</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProducerAndCustomer</span> </span>&#123;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">			Inf inf = <span class="keyword">new</span> Inf();</span><br><span class="line">			<span class="keyword">new</span> Thread(<span class="keyword">new</span> Producer(inf)).start();	</span><br><span class="line">			<span class="keyword">new</span> Thread(<span class="keyword">new</span> Customer(inf)).start();</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div><div class="tags"><a href="/tags/Java/">Java</a></div><div class="post-nav"><a class="pre" href="/2019/02/02/原谅我不明白你的悲伤/">旧病</a><a class="next" href="/2018/12/31/Lisp扫盲/">Lisp扫盲</a></div><div id="container"></div><link rel="stylesheet" href="https://35p32.github.io/gitment/style/default.css"><script src="https://35p32.github.io/gitment/dist/gitment.browser.js"></script><script>var gitment = new Gitment({
  owner: '35p32## Your GitHub ID, e.g. username',
  repo: 'cogito',
  oauth: {
    client_id: 'e40571b1a5ccce57c5c4## GitHub client ID, e.g. 75752dafe7907a897619',
    client_secret: 'e7020e3140ee19bf8bea9bceece0133736bc5057',
  },
})
gitment.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/lisp/" style="font-size: 15px;">lisp</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/前端基础/" style="font-size: 15px;">前端基础</a> <a href="/tags/C/" style="font-size: 15px;">C++</a> <a href="/tags/工具/" style="font-size: 15px;">工具</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a> <a href="/tags/complier/" style="font-size: 15px;">complier</a> <a href="/tags/话/" style="font-size: 15px;">话</a> <a href="/tags/ACM/" style="font-size: 15px;">ACM</a> <a href="/tags/MachineLearning/" style="font-size: 15px;">MachineLearning</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/04/10/Java备忘录Ⅲ/">Java备忘录Ⅲ</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/02/原谅我不明白你的悲伤/">旧病</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/16/Java备忘录Ⅰ/">Java备忘录Ⅰ</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/31/Lisp扫盲/">Lisp扫盲</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/25/机器学习日记(二)/">机器学习日记_2</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/24/机器学习日记(一)/">机器学习日记_1</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/11/Re-NFA-DFA-词法分析器代码/">词法分析器</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/10/特殊的dp/">特殊的dp</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/10/仓库/">仓库</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/09/三类背包/">三类背包</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://www.baidu.com/s?ie=UTF-8&amp;wd=vps%E6%90%AD%E5%BB%BA" title="眼" target="_blank">眼</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">35.32.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>