<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>35.32</title>
  
  <subtitle>æ­£å¦‚æˆ‘è§†ç¬›å¡å°”çš„æ„šè ¢çš„æœ¬è´¨</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="httpsp://yoursite.com/"/>
  <updated>2018-11-04T10:17:32.002Z</updated>
  <id>httpsp://yoursite.com/</id>
  
  <author>
    <name>æ§¨å†§</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æœ‰é™çŠ¶æ€è‡ªåŠ¨æœº</title>
    <link href="httpsp://yoursite.com/2018/11/04/%E6%9C%89%E9%99%90%E7%8A%B6%E6%80%81%E8%87%AA%E5%8A%A8%E6%9C%BA/"/>
    <id>httpsp://yoursite.com/2018/11/04/æœ‰é™çŠ¶æ€è‡ªåŠ¨æœº/</id>
    <published>2018-11-04T08:59:36.185Z</published>
    <updated>2018-11-04T10:17:32.002Z</updated>
    
    <content type="html"><![CDATA[<p>æ€»ç»“</p><a id="more"></a><p>ä¸¾ä¾‹å­å¦‚å›¾:</p><p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fww66hr1b9j30vz0mytbc.jpg" alt=""></p><p>å¦‚å›¾ <code>(q0,a)-&gt;q1,(q0,b)-&gt;q0</code> è¿™å°±å«åšçŠ¶æ€è½¬ç§»å‡½æ•°ï¼Œå’‹è§£é‡Šå‘¢ï¼Ÿ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">é»„è‰²åœ†å½¢ä»£è¡¨ä¸€ä¸ªä¸€ä¸ªçŠ¶æ€ï¼Œå†…éƒ¨æ•°å­—å°±æ˜¯çŠ¶æ€å¯¹åº”çš„ç¼–å·</span><br><span class="line">q0 æ¥å— a åˆ°è¾¾ q1 </span><br><span class="line">q0 æ¥å— b åˆ°è¾¾ q0</span><br><span class="line">. . .</span><br></pre></td></tr></table></figure><p>ç„¶åå°±åƒä½ çœ‹åˆ°çš„ï¼ŒæŠŠè¿™äº›çŠ¶æ€(<code>å°æ‹¬å·åŒ…æ‹¬ä½çš„</code>)ç§¯æ”’åœ¨ä¸€èµ·ï¼Œå°±æ˜¯æˆ‘ä»¬çš„å›¾1çš„ <code>S</code>ä¹Ÿå«<code>çŠ¶æ€é›†</code></p><p>è¿™äº›  <code>ä»æŸä¸ªçŠ¶æ€åˆ°è¾¾å¦å¤–ä¸€ä¸ªçŠ¶æ€</code> çš„è¿‡ç¨‹ï¼Œæœ¬èº«å¯ä»¥ç§°ä½œä¸€ä¸ªå‡½æ•°ï¼Œè¿™äº›å‡½æ•°çš„é›†åˆå«åšï¼Œè½¬ç§»å‡½æ•°é›†åˆã€‚</p><p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fww682bj7lj30w00ka40t.jpg" alt=""></p><p><code>æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºï¼š</code></p><ol><li>éç¡®å®šæœ‰é™çŠ¶æ€è‡ªåŠ¨æœº(NFA)</li><li>ç¡®å®šçš„æœ‰é™çŠ¶æ€è‡ªåŠ¨æœº(DFA)</li></ol><p>æˆ‘ä»¬ç¬¬ä¸€ä¸ªå›¾å°±æ˜¯ä¸ªç¡®å®šçš„ï¼Œæ¥çœ‹çœ‹ä¸€ä¸ªä¸ç¡®å®šçš„:</p><p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fww6kumrtij30u00n5dhr.jpg" alt=""></p><p>è¿™ä¸ªä¸ºä»€ä¹ˆå«ä¸ç¡®å®šçš„çŠ¶æ€è‡ªåŠ¨æœºï¼Ÿ  ä½ çœ‹çœ‹ï¼Œ åŠ å…¥æˆ‘ä»¬ç»™ <code>q0 ä¼ é€’ a</code>  ,ä½ èƒ½çŸ¥é“ q0åˆ°q0ï¼Œè¿˜æ˜¯q0åˆ°q1ï¼Ÿï¼Ÿ ä½ æ˜¯ä¸ç¡®å®šçš„ï¼Œæ‰€ä»¥å«æœ‰è¿™ç§æ„é€ çš„è‡ªåŠ¨æœºå°±å«<code>NFA</code></p><h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>é—®ï¼Ÿåœ¨NFAä¸­ï¼Œæˆ‘ä»¬åœ¨åˆå§‹çŠ¶æ€ä¸º <code>q0</code> æ—¶ï¼Œä¼ å…¥ å­—ç¬¦ä¸²s=<code>&quot;a&quot;</code>,è¯·é—®å¯¹äºNFAï¼Œå®ƒå¯ä»¥æ¥å—å—ï¼Ÿ</p><p>ç­”ï¼šå¯ä»¥ï¼Œå°½ç®¡q0 æœ‰å¯èƒ½æ¥å— <code>a</code>åè¿˜æ˜¯çŠ¶æ€æœ¬èº«ï¼Œä½†åªè¦æœ‰ä¸€æ¡è·¯å¯è½¬ç§»èµ°ï¼ŒNFAåœ¨ç»è¿‡<code>éå†</code> åï¼Œå°±å¯ä»¥æ‰¾åˆ°äº†ï¼</p><h2 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h2><p>æˆ‘ä»¬è¯¥æ€æ ·æŠŠè¿™ä¹ˆä¸€ä¸ªæŠ½è±¡çš„è‡ªåŠ¨æœºé€šè¿‡ä»£ç å®ç°å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å…¶ä¸­ä¸€ä¸ªåŠæ³•å°±æ˜¯ï¼Œå›¾çš„é‚»æ¥çŸ©é˜µå®ç°ã€‚</p><p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fww6umswk8j30sq0nnwg3.jpg" alt=""></p><p>è§£é‡Šï¼š0æ¥å—aå˜ä¸º1ï¼›0æ¥å—bå˜æˆ0 ä»¥æ­¤ç±»æ¨</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ€»ç»“&lt;/p&gt;
    
    </summary>
    
    
      <category term="complier" scheme="httpsp://yoursite.com/tags/complier/"/>
    
  </entry>
  
  <entry>
    <title>ä»å¾®åšspiderè¯¦è§£Scrapy</title>
    <link href="httpsp://yoursite.com/2018/11/03/%E4%BB%8E%E5%BE%AE%E5%8D%9Aspider%E8%AF%A6%E8%A7%A3Scrapy/"/>
    <id>httpsp://yoursite.com/2018/11/03/ä»å¾®åšspiderè¯¦è§£Scrapy/</id>
    <published>2018-11-03T13:25:57.811Z</published>
    <updated>2018-11-03T13:25:57.818Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡æ—¨åœ¨å½»åº•å‰–æScrapyçˆ¬è™«æ¡†æ¶</p><a id="more"></a><h2 id="ç›®çš„"><a href="#ç›®çš„" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h2><p>é’ˆå¯¹: <code>https://m.weibo.cn</code> çˆ¬å–æ–°æµªå¾®åšç”¨æˆ·çš„å…¬å¼€åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·æ˜µç§°ã€å¤´åƒã€ç”¨æˆ·çš„å…³æ³¨ã€ç²‰ä¸åˆ—è¡¨ä»¥ åŠå‘å¸ƒçš„å¾®åšç­‰ï¼Œè¿™äº›ä¿¡æ¯æŠ“å–ä¹‹åä¿å­˜è‡³ MongoDBã€‚</p><h2 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h2><p>æƒ…ç¡®ä¿å‰æ–‡æ‰€è®²çš„ä»£ç†æ± ã€ Cookies æ± å·²ç»å®ç°å¹¶å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œå®‰è£… Scrapyã€ PyMongo åº“ï¼Œå¦‚ æ²¡æœ‰å®‰è£…å¯ä»¥å‚è€ƒå‰æ–‡å†…å®¹</p><h2 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h2><p>é’ˆå¯¹è¯·æ±‚è§£æä¸å†è¿‡å¤šé˜è¿°ï¼Œ </p><p>ä»XHRåˆ†æå¯çŸ¥ï¼Œè¯·æ±‚ç±»å‹ä¸ºGet ,å› æ­¤ï¼Œæ¨¡ä»¿åˆ›é€ è¯·æ±‚ã€‚</p><p><code>https://m.weibo.cn/api/container/getlndex?contaiaerid= 231 051äºŒfollowers-_1916655407 &amp;luicode= I 00000 l l&amp;lfid= I 005051916655407 &amp;featurecode=20000320&amp;type =uid&amp;value= 1916655407 &amp;page=2</code></p><p>å…¶ä¸­æœ€ä¸»è¦çš„å‚æ•°å°±æ˜¯ containerid å’Œ pageã€‚ æœ‰äº†è¿™ä¸¤ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥è·å–è¯·æ±‚ç»“æœã€‚ æˆ‘ ä»¬å¯ä»¥å°†æ¥å£ç²¾ç®€ä¸º  <a href="https://m.weibo.cn/api/container/getIndex?containerid=231051-_followers-_1916655407&amp;page=2" target="_blank" rel="noopener">https://m.weibo.cn/api/container/getIndex?containerid=231051-_followers-_1916655407&amp;page=2</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡æ—¨åœ¨å½»åº•å‰–æScrapyçˆ¬è™«æ¡†æ¶&lt;/p&gt;
    
    </summary>
    
    
      <category term="çˆ¬è™«" scheme="httpsp://yoursite.com/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>C++ template â€”â€” æ¨¡æ¿åŸºç¡€ï¼ˆä¸€ï¼‰</title>
    <link href="httpsp://yoursite.com/2018/11/01/C++-template-%E2%80%94%E2%80%94-%E6%A8%A1%E6%9D%BF%E5%9F%BA%E7%A1%80%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <id>httpsp://yoursite.com/2018/11/01/C++-template-â€”â€”-æ¨¡æ¿åŸºç¡€ï¼ˆä¸€ï¼‰/</id>
    <published>2018-11-01T03:33:01.175Z</published>
    <updated>2018-11-01T03:48:52.276Z</updated>
    
    <content type="html"><![CDATA[<p>C++çš„é­…åŠ›ï¼Œå®åœ¨ä½¿äººéš¾ä»¥å¿˜å´ã€‚</p><a id="more"></a><p><a href="https://www.cnblogs.com/yyxt/category/772515.html" target="_blank" rel="noopener">æ‹œè¯»</a></p><p>æœ¬æ–‡è½¬è½½äº: <a href="https://www.cnblogs.com/yyxt/" target="_blank" rel="noopener">åšå®¢å›­_å°å¤©</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;C++çš„é­…åŠ›ï¼Œå®åœ¨ä½¿äººéš¾ä»¥å¿˜å´ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="C++" scheme="httpsp://yoursite.com/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>å®Œç¾å“ˆå¸Œ</title>
    <link href="httpsp://yoursite.com/2018/10/31/Scrapy%E6%A1%86%E6%9E%B6%E9%80%9A%E7%94%A8%E7%88%AC%E8%99%AB/"/>
    <id>httpsp://yoursite.com/2018/10/31/Scrapyæ¡†æ¶é€šç”¨çˆ¬è™«/</id>
    <published>2018-10-31T01:53:27.982Z</published>
    <updated>2018-11-01T16:15:39.315Z</updated>
    
    <content type="html"><![CDATA[<p>é€šè¿‡æ„é€ å®Œç¾å“ˆå¸Œï¼Œå¯ä»¥åœ¨O(1)æ—¶é—´å†…å®ç°å…³é”®å­—çš„æŸ¥è¯¢ã€‚</p><p> å…³é”®å­—è¡¨ç®—æ³•: é€šè¿‡æ„é€ å®Œç¾å“ˆå¸Œï¼Œå¯ä»¥åœ¨O(1)æ—¶é—´å†…å®ç°å…³é”®å­—çš„æŸ¥è¯¢.</p><a id="more"></a><p><a href="https://www.cnblogs.com/gaochundong/p/hashtable_and_perfect_hashing.html" target="_blank" rel="noopener">å“ˆå¸Œç»¼è¿°</a> </p><p><a href="https://www.ibm.com/developerworks/cn/linux/l-gperf.html" target="_blank" rel="noopener">gperfç®—æ³•</a></p><p>PHF(<em>Perfect Hash Function</em>)å’ŒMPHF(<em>Minimal Perfect Hash Function</em>)ç”Ÿæˆç®—æ³•ï¼š</p><p>  <a href="http://homepages.dcc.ufmg.br/~nivio/papers/wea05.pdf" target="_blank" rel="noopener">A Practical Minimal Perfect Hashing Method</a></p><p>  <a href="http://homepages.dcc.ufmg.br/~nivio/papers/tr06.pdf" target="_blank" rel="noopener">An Approach for Minimal Perfect Hash Functions for Very Large Databases</a></p><p>  <a href="http://homepages.dcc.ufmg.br/~nivio/papers/tr004_04.ps" target="_blank" rel="noopener">A New algorithm for constructing minimal perfect hash functions</a></p><p>  <a href="http://citeseer.ist.psu.edu/czech92optimal.html" target="_blank" rel="noopener">A optimal algorithm to generating minimal perfect hash function</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é€šè¿‡æ„é€ å®Œç¾å“ˆå¸Œï¼Œå¯ä»¥åœ¨O(1)æ—¶é—´å†…å®ç°å…³é”®å­—çš„æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;p&gt; å…³é”®å­—è¡¨ç®—æ³•: é€šè¿‡æ„é€ å®Œç¾å“ˆå¸Œï¼Œå¯ä»¥åœ¨O(1)æ—¶é—´å†…å®ç°å…³é”®å­—çš„æŸ¥è¯¢.&lt;/p&gt;
    
    </summary>
    
    
      <category term="complier" scheme="httpsp://yoursite.com/tags/complier/"/>
    
  </entry>
  
  <entry>
    <title>Scrapyå¯¹æ¥Splash</title>
    <link href="httpsp://yoursite.com/2018/10/29/Scrapy%E5%AF%B9%E6%8E%A5Splash/"/>
    <id>httpsp://yoursite.com/2018/10/29/Scrapyå¯¹æ¥Splash/</id>
    <published>2018-10-29T11:19:24.631Z</published>
    <updated>2018-10-31T01:44:48.609Z</updated>
    
    <content type="html"><![CDATA[<p>æŠ“å–æ·˜å®å•†å“æ˜¯ä¸€ç§æŠ“å–JavaScriptæ¸²æŸ“é¡µé¢çš„æ–¹å¼ï¼Œé™¤äº†ä½¿ç”¨Seleniumè¿˜æœ‰<code>splash</code>åŒæ ·å¯ä»¥è¾¾åˆ°åŒæ ·çš„åŠŸèƒ½</p><a id="more"></a><p>è€æ ·å­ï¼Œæ–°å»ºä¸€ä¸ª<code>é¡¹ç›®+çˆ¬è™«</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject scrapysplashtes</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy genspider taobao www.taobao.com</span><br></pre></td></tr></table></figure><p>åˆ¶é€ è€…å·²ç»ä¸ºscrapyåˆ¶å®šäº†å®Œå¤‡çš„splashæ¥å£ï¼Œæˆ‘ä»¬åªéœ€:</p><h2 id="åœ¨settingsä¸­é…ç½®å…³äºsplashçš„ç›¸å…³è®¾ç½®"><a href="#åœ¨settingsä¸­é…ç½®å…³äºsplashçš„ç›¸å…³è®¾ç½®" class="headerlink" title="åœ¨settingsä¸­é…ç½®å…³äºsplashçš„ç›¸å…³è®¾ç½®"></a>åœ¨settingsä¸­é…ç½®å…³äºsplashçš„ç›¸å…³è®¾ç½®</h2><p>â€“&gt;ä¿®æ”¹settings.pyï¼Œé¦–å…ˆå°†SPLASH_URLé…ç½®ä¸€ä¸‹ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬çš„Splashæ˜¯åœ¨æœ¬åœ°è¿è¡Œçš„ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥é…ç½®æœ¬åœ°çš„åœ°å€</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SPLASH_URL = <span class="string">'http://localhost:8050'</span></span><br></pre></td></tr></table></figure><p>â€“&gt; æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜éœ€è¦é…ç½®å‡ ä¸ªMiddleware</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DOWNLOADER_MIDDLEWARES = &#123;</span><br><span class="line">    <span class="string">'scrapy_splash.SplashCookiesMiddleware'</span>: <span class="number">723</span>,</span><br><span class="line">    <span class="string">'scrapy_splash.SplashMiddleware'</span>: <span class="number">725</span>,</span><br><span class="line">    <span class="string">'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware'</span>: <span class="number">810</span>,</span><br><span class="line">&#125;</span><br><span class="line">SPIDER_MIDDLEWARES = &#123;</span><br><span class="line">    <span class="string">'scrapy_splash.SplashDeduplicateArgsMiddleware'</span>: <span class="number">100</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ğŸ‘†é…ç½®äº†ä¸‰ä¸ªDownloader Middlewareå’Œä¸€ä¸ªSpider Middlewareï¼Œè¿™æ˜¯ScrapySplashçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œé…ç½®äº†å®ƒä»¬æˆ‘ä»¬å°±å¯ä»¥å¯¹æ¥Splashè¿›è¡Œé¡µé¢æŠ“å–ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä¸å†éœ€è¦åƒå¯¹æ¥Seleniumé‚£æ ·å®ç°ä¸€ä¸ªDownloader Middlewareï¼ŒScrapySplashåº“éƒ½ä¸ºæˆ‘ä»¬å‡†å¤‡å¥½äº†ï¼Œç›´æ¥é…ç½®å³å¯.</p><p>ç€è¿˜éœ€è¦é…ç½®ä¸€ä¸ªå»é‡çš„ç±»DUPEFILTER_CLASS</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DUPEFILTER_CLASS = <span class="string">'scrapy_splash.SplashAwareDupeFilter'</span></span><br></pre></td></tr></table></figure><p>æœ€åè¿˜éœ€è¦é…ç½®ä¸€ä¸ªCacheå­˜å‚¨HTTPCACHE_STORAGE</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTTPCACHE_STORAGE = <span class="string">'scrapy_splash.SplashAwareFSCacheStorage'</span></span><br></pre></td></tr></table></figure><p><em>å®Œæˆï¼</em> </p><hr><p>æœ¬èŠ‚æˆ‘ä»¬è¦åšçš„æŠ“å–æ˜¯æ·˜å®å•†å“ä¿¡æ¯ï¼Œæ¶‰åŠåˆ°é¡µé¢åŠ è½½ç­‰å¾…ã€æ¨¡æ‹Ÿç‚¹å‡»ç¿»é¡µç­‰æ“ä½œï¼Œæ‰€ä»¥è¿™é‡Œå°±éœ€è¦Luaè„šæœ¬æ¥å®ç°äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥é¦–å…ˆå®šä¹‰ä¸€ä¸ªLuaè„šæœ¬ï¼Œæ¥å®ç°é¡µé¢åŠ è½½ã€æ¨¡æ‹Ÿç‚¹å‡»ç¿»é¡µçš„åŠŸèƒ½<a href="https://www.runoob.com/lua/lua-tutorial.html" target="_blank" rel="noopener">å…³äºLua</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function main(splash, args)</span><br><span class="line">  args = &#123;</span><br><span class="line">    url=<span class="string">"https://s.taobao.com/search?q=iPad"</span>,</span><br><span class="line">    wait=<span class="number">5</span>,</span><br><span class="line">    page=<span class="number">5</span></span><br><span class="line">  &#125;</span><br><span class="line">  splash.images_enabled = false</span><br><span class="line">  <span class="keyword">assert</span>(splash:go(args.url))</span><br><span class="line">  <span class="keyword">assert</span>(splash:wait(args.wait))</span><br><span class="line">  js = string.format(<span class="string">"document.querySelector('#mainsrp-pager div.form &gt; input').value=%d;document.querySelector('#mainsrp-pager div.form &gt; span.btn.J_Submit').click()"</span>, args.page)</span><br><span class="line">  splash:evaljs(js)</span><br><span class="line">  <span class="keyword">assert</span>(splash:wait(args.wait))</span><br><span class="line">  <span class="keyword">return</span> splash:html()</span><br><span class="line">end</span><br></pre></td></tr></table></figure><p>luaæ˜¯ä¸€ç§è„šæœ¬è¯­è¨€ï¼Œæˆ‘ä»¬å†™å‡ºä¸€æ®µ<code>luaè„šæœ¬</code>ä¹‹åï¼Œå¯¹æ¥åˆ°SplashRequestä¸­ï¼Œå°±å¯ä½¿ç”¨</p><p>æœ€ç»ˆtaobao.pyç»“æœå¦‚ä¸‹:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy <span class="keyword">import</span> Spider</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> quote</span><br><span class="line"><span class="keyword">from</span> scrapysplashtest.items <span class="keyword">import</span> ProductItem</span><br><span class="line"><span class="keyword">from</span> scrapy_splash <span class="keyword">import</span> SplashRequest</span><br><span class="line"></span><br><span class="line">script = <span class="string">""" #luaè„šæœ¬</span></span><br><span class="line"><span class="string">function main(splash, args)</span></span><br><span class="line"><span class="string">  splash.images_enabled = false</span></span><br><span class="line"><span class="string">  assert(splash:go(args.url))</span></span><br><span class="line"><span class="string">  assert(splash:wait(args.wait))</span></span><br><span class="line"><span class="string">  js = string.format("document.querySelector('#mainsrp-pager div.form &gt; input').value=%d;document.querySelector('#mainsrp-pager div.form &gt; span.btn.J_Submit').click()", args.page)</span></span><br><span class="line"><span class="string">  splash:evaljs(js)</span></span><br><span class="line"><span class="string">  assert(splash:wait(args.wait))</span></span><br><span class="line"><span class="string">  return splash:html()</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TaobaoSpider</span><span class="params">(Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'taobao'</span></span><br><span class="line">    allowed_domains = [<span class="string">'www.taobao.com'</span>]</span><br><span class="line">    base_url = <span class="string">'https://s.taobao.com/search?q='</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_request</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> keyword <span class="keyword">in</span> self.settings.get(<span class="string">'KEYWORD'</span>):</span><br><span class="line">            <span class="keyword">for</span> page <span class="keyword">in</span> range(<span class="number">1</span>,self.settings.get(<span class="string">'MAX_PAGE'</span>)+<span class="number">1</span>):</span><br><span class="line">                url = self.base_url + quote(keyword)</span><br><span class="line">                <span class="keyword">yield</span> SelfshResponse(url,callback = self.parse,endpoint=<span class="string">'execute'</span>,args=&#123;<span class="string">'lua_source'</span>:script,<span class="string">'page'</span>:page,<span class="string">'wait'</span>:<span class="number">7</span>&#125;)</span><br></pre></td></tr></table></figure><p><code>æŠŠLuaè„šæœ¬å®šä¹‰æˆé•¿å­—ç¬¦ä¸²</code>ï¼Œé€šè¿‡<code>SplashRequest çš„ args</code>æ¥ä¼ é€’å‚æ•°ï¼Œå¦å¤–argså‚æ•°é‡Œè¿˜æœ‰ä¸€ä¸ªlua_sourceå­—æ®µç”¨äºæŒ‡å®šLuaè„šæœ¬å†…å®¹ï¼Œè¿™æ ·æˆ‘ä»¬å°±æˆåŠŸæ„é€ äº†ä¸€ä¸ªSplashRequestï¼Œå¯¹æ¥Splashçš„å·¥ä½œå°±å®Œæˆäº†</p><p>æ¥ä¸‹æ¥çš„å·¥ä½œå°±å¾ˆæ­£å¸¸äº†</p><p>settingsä¸­è®¾ç½®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SPLASH_URL = <span class="string">'http://192.168.99.100:8050'</span> <span class="comment">#è€Œéhttp://localhost:8050</span></span><br><span class="line"></span><br><span class="line">DOWNLOADER_MIDDLEWARES = &#123;</span><br><span class="line">    <span class="string">'scrapy_splash.SplashCookiesMiddleware'</span>: <span class="number">723</span>,</span><br><span class="line">    <span class="string">'scrapy_splash.SplashMiddleware'</span>: <span class="number">725</span>,</span><br><span class="line">    <span class="string">'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware'</span>: <span class="number">810</span>,</span><br><span class="line">&#125;</span><br><span class="line">SPIDER_MIDDLEWARES = &#123;</span><br><span class="line">    <span class="string">'scrapy_splash.SplashDeduplicateArgsMiddleware'</span>: <span class="number">100</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#å»é‡çš„ç±»DUPEFILTER_CLASS</span></span><br><span class="line">DUPEFILTER_CLASS = <span class="string">'scrapy_splash.SplashAwareDupeFilter'</span></span><br><span class="line"><span class="comment">#ä¸€ä¸ªCacheå­˜å‚¨HTTPCACHE_STORAGE</span></span><br><span class="line">HTTPCACHE_STORAGE = <span class="string">'scrapy_splash.SplashAwareFSCacheStorage'</span></span><br></pre></td></tr></table></figure><p><em>æ­¤å¤„å¿…é¡»è§£é‡Šä¸€ä¸‹ï¼Œæ›¾åœ¨è¿™é‡Œå¡åˆ°äº†ç¬¬ä¸€å¥è¯ä¸Šï¼Œå´”åº†æ‰è€å¸ˆè®¾ç½®çš„æ˜¯åè€…ï¼Œè¿™å’Œdockerå¼€çš„ç«¯å£æœ‰å…³</em></p><p>é¦–å…ˆæ‰“å¼€<code>virtualbox</code>ï¼Œå¼€å¯<code>default</code>æœåŠ¡ï¼ŒåŒæ—¶æ‰“å¼€<code>docker quickstart terminal</code></p><p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fwr5oncmf5j30lv0a3mx9.jpg" alt=""></p><p>/<em>å¦‚æœdockerå‡ºç°ä»€ä¹ˆæŠ¥é”™ï¼Œå°±å…ˆè§£å†³é‚£ä¸ªé—®é¢˜,åˆšæ¥è§¦dockerï¼Œæ„Ÿè§‰è¿™ä¸ªä¸œè¥¿å‘å¾ˆæ·±</em>/ ,<br>/<em>è¿‡ç¨‹ä¸­è¯·ä¿æŒvirtualboxçš„defaultæ‰“å¼€</em>/<br> æˆ‘ä»¬æ¸…æ¥šçš„çœ‹åˆ°<code>dockerè¢«é…ç½®ä¸ºä½¿ç”¨IP 192.168.99.100çš„é»˜è®¤æœºå™¨</code></p><p>æ‰€ä»¥ï¼Œä½¿ç”¨dockerå¿…é¡»splash_urlæ”¹ä¸º<code>http://192.168.99.100:8050</code></p><p>è¿è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl taobao</span><br></pre></td></tr></table></figure><p>çˆ¬è™«çš„é€Ÿåº¦å°†æ˜¯æƒŠäººçš„ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æŠ“å–æ·˜å®å•†å“æ˜¯ä¸€ç§æŠ“å–JavaScriptæ¸²æŸ“é¡µé¢çš„æ–¹å¼ï¼Œé™¤äº†ä½¿ç”¨Seleniumè¿˜æœ‰&lt;code&gt;splash&lt;/code&gt;åŒæ ·å¯ä»¥è¾¾åˆ°åŒæ ·çš„åŠŸèƒ½&lt;/p&gt;
    
    </summary>
    
    
      <category term="çˆ¬è™«" scheme="httpsp://yoursite.com/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Scrapyæ¡†æ¶(äºŒ)</title>
    <link href="httpsp://yoursite.com/2018/10/28/Scrapy%E6%A1%86%E6%9E%B6(%E4%BA%8C)/"/>
    <id>httpsp://yoursite.com/2018/10/28/Scrapyæ¡†æ¶(äºŒ)/</id>
    <published>2018-10-28T12:00:53.156Z</published>
    <updated>2018-10-28T12:40:57.993Z</updated>
    
    <content type="html"><![CDATA[<p>ä»å®ä¾‹ä¸­çœ‹scrapyæ¡†æ¶ä¸­å„éƒ¨åˆ†çš„åŠŸèƒ½</p><p><img src="https://wx1.sinaimg.cn/mw690/6c3e6b13gy1fwjoq4i6rcj20zk0wk4qp.jpg" alt=""></p><a id="more"></a><p>å–çš„ç›®æ ‡ç½‘ç«™ä¸ºï¼š<a href="https://image.so.com" target="_blank" rel="noopener">https://image.so.com</a></p><p>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼Œè¿‡æ»¤å™¨åˆ‡æ¢åˆ°XHRé€‰é¡¹,ä¸‹æ‹‰é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢å°±ä¼šå‘ˆç°è®¸å¤šAjaxè¯·æ±‚</p><p><img src="https://ask.qcloudimg.com/http-save/developer-news/q8remsppeb.jpeg" alt=""></p><p><img src="https://ask.qcloudimg.com/http-save/developer-news/7xvqjdt74l.jpeg" alt=""></p><p>è¿”å›æ ¼å¼æ˜¯JSONã€‚å…¶ä¸­å­—æ®µå°±æ˜¯ä¸€å¼ å¼ å›¾ç‰‡çš„è¯¦æƒ…ä¿¡æ¯ï¼ŒåŒ…å«äº†30å¼ å›¾ç‰‡çš„IDã€åç§°ã€é“¾æ¥ã€ç¼©ç•¥å›¾ç­‰ä¿¡æ¯ã€‚å¦å¤–è§‚å¯ŸAjaxè¯·æ±‚çš„å‚æ•°ä¿¡æ¯ï¼Œæœ‰ä¸€ä¸ªå‚æ•°ä¸€ç›´åœ¨å˜åŒ–ï¼Œè¿™ä¸ªå‚æ•°å¾ˆæ˜æ˜¾å°±æ˜¯åç§»é‡ã€‚å½“ä¸º30æ—¶ï¼Œè¿”å›çš„æ˜¯å‰30å¼ å›¾ç‰‡ï¼Œsnä¸º60æ—¶ï¼Œè¿”å›çš„å°±æ˜¯ç¬¬31~60å¼ å›¾ç‰‡ã€‚</p><p>å®é™…ä¸Šï¼Œæˆ‘ä»¬å‘æµè§ˆå™¨å‘é€ajaxè¯·æ±‚ï¼Œæˆ‘ä»¬ä»ç½‘å€ä¸Šï¼Œå³è¢«urlç¼–ç çš„paramsåˆ—è¡¨ï¼Œæ¯”å¦‚ï¼š</p><p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fwo4qvh794j311b0bu75u.jpg" alt=""></p><p>æˆ‘ä»¬çœ‹åˆ°äº†:</p><ol><li>ch</li><li>sn</li><li>listtype</li><li>temp</li></ol><p>æ‰€ä»¥æ‰€è°“çš„å‚æ•°åˆ—è¡¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">params&#123;</span><br><span class="line">    xxx</span><br><span class="line">    xxx</span><br><span class="line">    xxx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªç”¨å«æœ‰è¿™å‡ ä¸ªå‚æ•°å°±å¯ä»¥äº†ã€‚</p><hr><p>åˆ†æå®Œæ¯•åï¼Œå¼€å§‹æ–°å»ºé¡¹ç›®.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject images360</span><br></pre></td></tr></table></figure><p>cd åˆ°è¿™ä¸ªé¡¹ç›®çš„ spidersé¡¹ç›®ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªçˆ¬è™«åä¸º<code>images360</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy genspider images360  images.so.com</span><br></pre></td></tr></table></figure><p><strong>æœ‰äº†çˆ¬è™«ï¼Œæ¥ä¸‹æ¥åº”è¯¥åšä»€ä¹ˆï¼Ÿ</strong>ğŸ§</p><h2 id="ç¬¬ä¸€"><a href="#ç¬¬ä¸€" class="headerlink" title="ç¬¬ä¸€"></a>ç¬¬ä¸€</h2><p>è‚¯å®šæ˜¯è¦å¯¹spiderså¤„ç†ï¼Œæˆ‘ä»¬è¿›å…¥spidersæ–‡ä»¶å¤¹é‡Œé¢çš„<code>images.py</code>é‡Œçœ‹ï¼Œçˆ¬è™«æœ‰äº†ï¼Œæ–¹æ³•è¦æˆ‘ä»¬åˆ›å»ºã€‚</p><p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fwo522pfeyj30ld0ic0ti.jpg" alt=""></p><p>è¿™é‡Œçš„çˆ¬è™«æœ‰ä¸‰ä¸ªéƒ¨åˆ†:</p><p><em>1</em> :  <code>name</code>æ˜¯çˆ¬è™«åï¼Œ<code>allowed_domain</code>æ˜¯è®¿é—®çš„åŸŸåï¼Œ<code>start_urls</code>çš„å«ä¹‰æ˜¯è¿‡æ»¤çˆ¬å–çš„åŸŸåï¼Œåœ¨æ’ä»¶OffsiteMiddlewareå¯ç”¨çš„æƒ…å†µä¸‹ï¼ˆé»˜è®¤æ˜¯å¯ç”¨çš„ï¼‰ï¼Œä¸åœ¨æ­¤å…è®¸èŒƒå›´å†…çš„åŸŸåå°±ä¼šè¢«è¿‡æ»¤ï¼Œè€Œä¸ä¼šè¿›è¡Œçˆ¬å–,</p><p>è¯·æ³¨æ„,ä»¥ä¸Šä¸‰ä¸ªéƒ¨åˆ†ï¼Œéƒ½æ˜¯åœ¨æˆ‘ä»¬ç¬¬äºŒä¸ªå‘½ä»¤æ‰§è¡Œæ—¶ï¼ŒSæ¡†æ¶è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæˆ‘ä»¬ä¸ç”¨åŠ¨.</p><p><em>2</em>: <code>start_requests</code>å°±ç®—æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„é€šè¿‡å¾ªç¯å‘æµè§ˆå™¨å‘é€ajaxè¯·æ±‚ï¼Œ<code>parse</code>æ˜¯å¯¹è¿”å›çš„responseè¿›è¡Œè§£æï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒåŸºæœ¬çš„çˆ¬è™«å®ç°éƒ½æ˜¯åœ¨è¿™é‡Œåšçš„ã€‚</p><p>æˆ‘ä»¬é‡ç‚¹å…³æ³¨å…¶ä»–éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯æ¡†æ¶çš„å…¶ä»–ç¯èŠ‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">item</span><br><span class="line">middleware</span><br><span class="line">settings</span><br><span class="line">piplines</span><br></pre></td></tr></table></figure><p><code>item</code>:æ‰“ä¸ªæ¯”æ–¹ï¼Œä½ æƒ³è¦ä½ çˆ¬åˆ°çš„ä¸œè¥¿çš„ä»€ä¹ˆéƒ¨åˆ†ï¼Ÿä½ å¸Œæœ›ä»–ä»¬ä»¥ä»€ä¹ˆæ ·å­äº¤ç»™ä½ ï¼Ÿ</p><p>â€‹               æˆ‘æƒ³è¦ç½‘ç«™å›¾ç‰‡çš„id,é“¾æ¥åœ°å€ï¼Œä¸»é¢˜ï¼Œç¼©ç•¥å›¾,æˆ‘æƒ³è¦å®ƒä»¬ä»¥ä¸€ä¸ªå­—å…¸çš„å½¢å¼å‘ˆäº¤ç»™æˆ‘</p><p>â€‹              é‚£ä¹ˆï¼Œitem.pyå°±æ˜¯å¹²è¿™ä¸ªçš„.â€‹           </p><p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fwo5bmi8y8j30h80ai3ym.jpg" alt=""></p><p><code>middleware</code>:ä¸­é—´ä»¶ï¼Œä½œç”¨æ˜¯ä¿®æ”¹ä»£ç†ipå•¦ï¼Œè®¿é—®æµè§ˆå™¨çš„user_agentå•¦ï¼Œ<a href="https://blog.csdn.net/yancey_blog/article/details/53896092" target="_blank" rel="noopener">äº†è§£ä¸€ä¸‹</a> ,æ­¤ä¾‹ä¸ç”¨middleware     </p><p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fwo6sjw5saj30mq0p80ua.jpg" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»å®ä¾‹ä¸­çœ‹scrapyæ¡†æ¶ä¸­å„éƒ¨åˆ†çš„åŠŸèƒ½&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://wx1.sinaimg.cn/mw690/6c3e6b13gy1fwjoq4i6rcj20zk0wk4qp.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="çˆ¬è™«" scheme="httpsp://yoursite.com/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Ajaxå’ŒXHR</title>
    <link href="httpsp://yoursite.com/2018/10/28/Ajax%E5%92%8CXHR/"/>
    <id>httpsp://yoursite.com/2018/10/28/Ajaxå’ŒXHR/</id>
    <published>2018-10-28T02:29:32.444Z</published>
    <updated>2018-10-28T02:29:32.451Z</updated>
    
    <content type="html"><![CDATA[<p>  ajaxæ˜¯asynchronous javascript and XMLçš„ç®€å†™</p><a id="more"></a><p><a href="https://www.cnblogs.com/xiaohuochai/p/6036475.html" target="_blank" rel="noopener">æ‹œè¯»</a></p><p><br><br><br><br></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;  ajaxæ˜¯asynchronous javascript and XMLçš„ç®€å†™&lt;/p&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯åŸºç¡€" scheme="httpsp://yoursite.com/tags/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>Scrapyæ¡†æ¶è§£æ</title>
    <link href="httpsp://yoursite.com/2018/10/26/Scrapy/"/>
    <id>httpsp://yoursite.com/2018/10/26/Scrapy/</id>
    <published>2018-10-25T16:14:46.767Z</published>
    <updated>2018-10-28T12:24:44.089Z</updated>
    
    <content type="html"><![CDATA[<p>Scrapyæ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„çˆ¬è™«æ¡†æ¶</p><a id="more"></a><h3 id="ä»€ä¹ˆæ˜¯Scrapyï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Scrapyï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Scrapyï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Scrapyï¼Ÿ</h3><p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fwml6x6211j30jg0dqdi2.jpg" alt=""></p><p><code>Scrapyæ˜¯ä¸€ä¸ªä¸ºäº†çˆ¬å–ç½‘ç«™æ•°æ®ï¼Œæå–ç»“æ„æ€§æ•°æ®è€Œç¼–å†™çš„åº”ç”¨æ¡†æ¶ã€‚ å¯ä»¥åº”ç”¨åœ¨åŒ…æ‹¬æ•°æ®æŒ–æ˜ï¼Œä¿¡æ¯å¤„ç†æˆ–å­˜å‚¨å†å²æ•°æ®ç­‰ä¸€ç³»åˆ—çš„ç¨‹åºä¸­</code></p><h3 id="1-å…ˆå®‰è£…"><a href="#1-å…ˆå®‰è£…" class="headerlink" title="1 . å…ˆå®‰è£…"></a>1 . <a href="https://www.cnblogs.com/lfoder/p/6565088.html" target="_blank" rel="noopener">å…ˆå®‰è£…</a></h3><h3 id="2-ç¬¬ä¸€ä¸ªé¡¹"><a href="#2-ç¬¬ä¸€ä¸ªé¡¹" class="headerlink" title="2. ç¬¬ä¸€ä¸ªé¡¹"></a>2. ç¬¬ä¸€ä¸ªé¡¹</h3><p><code>scrapy startproject tutorial</code><br>ç›´æ¥cmdæ‰§è¡Œï¼Œç„¶ååœ¨   c/user/xxx   è·¯å¾„ä¸‹ï¼Œå‡ºç°äº†ä¸€ä¸ªtutorial æ–‡ä»¶å¤¹</p><h3 id="Downloader-Middleware-ğŸ”"><a href="#Downloader-Middleware-ğŸ”" class="headerlink" title="Downloader Middleware ğŸ”"></a>Downloader Middleware ğŸ”</h3><p>Middleware æ˜¯æ•´ä¸ªscrapyæ¡†æ¶ä¸­è´Ÿè´£ç½‘é¡µä¸‹è½½ç¯èŠ‚çš„å·¥ä½œï¼Œæ¯”å¦‚è¯´ æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œå¹¶æœ‰ä¸ªè¯¥é¡¹ç›®ä¸‹çš„spider</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpbinSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'httpbin'</span></span><br><span class="line">    allowed_domains = [<span class="string">'httpbin.org'</span>]</span><br><span class="line">    start_urls = [<span class="string">'http://httpbin.org/get'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        self.logger.debug(response.text) <span class="comment">#æ‰“å°å“åº”</span></span><br><span class="line">        self.logger.debug(<span class="string">'Status Code: '</span> + str(response.status))</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œspider</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl httpbin</span><br></pre></td></tr></table></figure><p>å‘ç°è·å–åˆ°çš„å†…å®¹ä¸­å«æœ‰:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">2018-10-27 08:57:09 [scrapy.statscollectors] INFO: Dumping Scrapy stats:</span><br><span class="line">&#123;'downloader/request_bytes': 439,</span><br><span class="line"> 'downloader/request_count': 2,</span><br><span class="line"> 'downloader/request_method_count/GET': 2,</span><br><span class="line"> 'downloader/response_bytes': 768,</span><br><span class="line"> 'downloader/response_count': 2,</span><br><span class="line"> 'downloader/response_status_count/200': 2,</span><br><span class="line"> 'finish_reason': 'finished',</span><br><span class="line"> 'finish_time': datetime.datetime(2018, 10, 27, 0, 57, 9, 949044),</span><br><span class="line"> 'log_count/DEBUG': 5,</span><br><span class="line"> 'log_count/INFO': 7,</span><br><span class="line"> 'response_received_count': 2,</span><br><span class="line"> 'scheduler/dequeued': 1,</span><br><span class="line"> 'scheduler/dequeued/memory': 1,</span><br><span class="line"> 'scheduler/enqueued': 1,</span><br><span class="line"> 'scheduler/enqueued/memory': 1,</span><br><span class="line"> 'start_time': datetime.datetime(2018, 10, 27, 0, 57, 8, 773548)&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­çš„<code>headers</code>ä¸­çš„<code>User_Agent</code> æ˜¯<code>DownloaderMiddleware</code>å¹¶åˆ©ç”¨ process_requestï¼ˆï¼‰æ–¹æ³•è®¾ç½®çš„ User_Agent</p><p>æˆ‘ä»¬æ”¹åŠ¨ä¸€ä¸‹ <code>midddlerware.py</code>ï¼Œæ·»åŠ ä¸€ä¸ªRandomUserAgentMiddlewareç±» ï¼Œå¦‚ä¸‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RandomUserAgentMiddleware</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">()</span>:</span></span><br><span class="line">        self.user_agent=[</span><br><span class="line">        <span class="number">1.</span>ä»£ç†</span><br><span class="line">        <span class="number">2.</span>ä»£ç†</span><br><span class="line">        <span class="number">3.</span>ä»£ç†</span><br><span class="line">        ]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_request</span><span class="params">(self,request,spider)</span>:</span></span><br><span class="line">        request.headers[<span class="string">'User_Agent'</span>] = random.choice(self.user_agent)</span><br></pre></td></tr></table></figure><p>å¹¶ä¸”å¿…é¡»åœ¨settings.pyä¸­å–æ¶ˆæ³¨é‡Š:  <code>DOWNLOADER_MIDDLEWARES</code>å¹¶è®¾ç½®æˆå¦‚ä¸‹å†…å®¹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DOWNLOADER_USERAGENT&#123;</span><br><span class="line">    &apos;scrapydownloadermiddtest.middlewares.RandomUserAgentMiddleware&apos;: 543,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬é‡æ–°è¿è¡Œ Spiderï¼Œå°±å¯ä»¥çœ‹åˆ° User-Agent è¢«æˆåŠŸä¿®æ”¹ä¸ºåˆ—è¡¨ä¸­æ‰€å®šä¹‰çš„éšæœºçš„ä¸€ä¸ª User-Agent äº†</p><p> Downloader Middleware è¿˜æœ‰<code>process_response()</code>æ–¹æ³•ã€‚ Downloaderå¯¹ Request æ‰§è¡Œä¸‹è½½ä¹‹ åä¼šå¾—åˆ° Responseï¼Œéšå Scrapy å¼•æ“ä¼šå°† Response å‘é€å› Spiderè¿›è¡Œå¤„ç†ã€‚ ä½†æ˜¯åœ¨ Response è¢«å‘é€ ç»™ Spider ä¹‹å‰ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨<code>process_response()</code>æ–¹æ³•å¯¹ Response è¿›è¡Œå¤„ç†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">def process_response(self, request, response, spider):</span><br><span class="line">    response.status = 201 </span><br><span class="line">    return response`</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å°† response å˜é‡çš„ status å±æ€§ä¿®æ”¹ä¸º 201 ï¼Œéšåå°† response è¿”å›ï¼Œè¿™ä¸ªè¢«ä¿®æ”¹åçš„ Response å°±ä¼šè¢«å‘é€åˆ° Spiderã€‚<br>æˆ‘ä»¬å†åœ¨ Spideré‡Œé¢è¾“å‡ºä¿®æ”¹åçš„çŠ¶æ€ç ï¼Œåœ¨ parse() æ–¹æ³•ä¸­æ·»åŠ å¦‚ä¸‹çš„è¾“å‡ºè¯­å¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.logger.debugï¼ˆ&apos;StatusCode:&apos; + str(response.status))</span><br></pre></td></tr></table></figure><p>é‡æ–°è¿è¡Œä¹‹åï¼Œæ§åˆ¶å°è¾“å‡ºäº†å¦‚ä¸‹å†…å®¹ï¼š<br><code>[httpbin] DEBUG: Status Code: 201</code></p><p> Response çš„çŠ¶æ€ç æˆåŠŸä¿®æ”¹äº†ã€‚<br>å› æ­¤è¦æƒ³å¯¹ Response è¿›è¡Œåå¤„ç†ï¼Œå°±å¯ä»¥å€ŸåŠ©äº<code>process_response()</code>æ–¹æ³•</p><h3 id="SpiderMiddleware-ç”¨æ³•ğŸ³â€ğŸŒˆ"><a href="#SpiderMiddleware-ç”¨æ³•ğŸ³â€ğŸŒˆ" class="headerlink" title="SpiderMiddleware ç”¨æ³•ğŸ³â€ğŸŒˆ"></a>SpiderMiddleware ç”¨æ³•ğŸ³â€ğŸŒˆ</h3><p>Spiderä¸­é—´ä»¶æ˜¯åœ¨å¼•æ“åŠSpiderä¹‹é—´çš„ç‰¹å®šé’©å­(specific hook)ï¼Œå¤„ç†spiderçš„è¾“å…¥(response)å’Œè¾“å‡º(itemsåŠrequests)ã€‚ å…¶æä¾›äº†ä¸€ä¸ªç®€ä¾¿çš„æœºåˆ¶ï¼Œé€šè¿‡æ’å…¥è‡ªå®šä¹‰ä»£ç æ¥æ‰©å±•ScrapyåŠŸèƒ½ã€‚æ›´å¤šå†…å®¹è¯·çœ‹ Spiderä¸­é—´ä»¶(Middleware)<br>ä¸€å¥è¯æ€»ç»“å°±æ˜¯ï¼š<code>å¤„ç†è§£æéƒ¨</code></p><h3 id="Item-PipeLine-ç”¨æ³•ğŸ±â€ğŸ‘“"><a href="#Item-PipeLine-ç”¨æ³•ğŸ±â€ğŸ‘“" class="headerlink" title="Item PipeLine ç”¨æ³•ğŸ±â€ğŸ‘“"></a>Item PipeLine ç”¨æ³•ğŸ±â€ğŸ‘“</h3><p>å½“spiderçˆ¬å–åˆ°itemåï¼Œå®ƒè¢«å‘é€åˆ°é¡¹ç›®ç®¡é“ï¼ˆItem Pipelineï¼‰ï¼Œé€šè¿‡å‡ ä¸ªç»„ä»¶æŒ‰é¡ºåºè¿›è¡Œå¤„ç†ã€‚æ¯ä¸€ä¸ªItem Pipelineæ˜¯ä¸€ä¸ªå®ç°äº†ç®€å•æ–¹æ³•çš„Pythonç±»ï¼Œå®ƒæ¥æ”¶åˆ°ä¸€ä¸ªitemå¹¶å¯¹å…¶æ‰§è¡Œä¸€ä¸ªæ“ä½œï¼Œä¹Ÿè¦å†³å®šè¯¥itemæ˜¯å¦åº”è¯¥ç»§ç»­é€šè¿‡ç®¡é“ï¼Œæˆ–è€…è¢«ä¸¢å¼ƒï¼Œä¸å†è¿›è¡Œå¤„ç†ã€‚</p><p><code>ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬é€šè¿‡çˆ¬è™«çˆ¬å–çš„é¡¹ç›®ï¼Œå…ˆäº¤ç»™é¡¹ç›®ç®¡é“ï¼Œé¡¹ç›®ç®¡é“æŠŠæ•°æ®å¤„ç†å¤„ç†(åˆ é™¤ä¸€äº›å•¦ï¼Œå­˜åˆ°mongodbå•¦)äº§ç”Ÿæ–°çš„item</code></p><p><strong>Item Pipelineå…¸å‹çš„ç”¨é€”æ˜¯ï¼š</strong><br>1.æ¸…ç†HTMLæ•°æ®<br>2.éªŒè¯çˆ¬å–çš„æ•°æ®(æ£€æŸ¥itemsæ˜¯å¦åŒ…å«æŸäº›å­—æ®µ)<br>3.æ£€æŸ¥å‰¯æœ¬(å¹¶åˆ é™¤å®ƒä»¬)<br>4.å°†itemæ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“ä¸­</p><p><code>æ¯ä¸ªItem Pipelineéƒ½æ˜¯ä¸€ä¸ªPythonç±»</code>ï¼Œå®ƒå¿…é¡»å®ç°ä»¥ä¸‹æ–¹æ³•:</p><p><strong>process_item(self, item, spider)</strong></p><p>è¿™ä¸ªæ–¹æ³•å¯ä»¥è¢«æ¯ä¸ªItem Pipelineè°ƒç”¨ï¼Œprocess_item()å¿…é¡»æ˜¯:è¿”å›ä¸€ä¸ªå­—å…¸ç±»å‹æ•°æ®ã€è¿”å›ä¸€ä¸ªæ¡ç›®(æˆ–ä»»ä½•å­ç±»)å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ª Twisted Deferred æˆ–è€…DropItemå¼‚å¸¸ï¼Œä¸¢å¼ƒçš„itemä¸å†ç”±è¿›ä¸€æ­¥çš„Item Pipelineå¤„ç†ã€‚<br>å‚æ•°å«ä¹‰ï¼š<br>itemï¼š Itemå¯¹è±¡æˆ–å­—å…¸ï¼Œçˆ¬å–çš„item<br>spiderï¼šspiderå¯¹è±¡ï¼Œçˆ¬å–äº†è¿™ä¸ªitemçš„spider<br>æ­¤å¤–ï¼Œä»–ä»¬è¿˜å¯ä»¥å®ç°ä»¥ä¸‹æ–¹æ³•:</p><p><strong>open_spider(self, spider)</strong> -&gt;å½“spideræ‰“å¼€æ—¶ï¼Œå‡½æ•°å°±ä¼šè¢«è°ƒç”¨ï¼Œspiderå‚æ•°å«ä¹‰ï¼šè¢«æ‰“å¼€çš„spider<br><strong>close_spider(self, spider)</strong>  -&gt;å½“spiderå…³é—­æ˜¯ï¼Œå‡½æ•°ä¼šè¢«è°ƒç”¨<br><strong>from_crawler(cls, crawler)</strong>  -&gt; å¦‚æœå­˜åœ¨ï¼Œè¿™ä¸ªç±»æ–¹æ³•è¢«è°ƒç”¨æ¥ä»ä¸€ä¸ªCrawleråˆ›å»ºä¸€ä¸ªspiderå®ä¾‹ã€‚å®ƒå¿…é¡»è¿”å›ç®¡é“çš„ä¸€ä¸ªæ–°å®ä¾‹ï¼ŒCrawlerå¯¹è±¡æä¾›å¯¹æ‰€æœ‰çš„scrapyæ ¸å¿ƒç»„ä»¶çš„è®¿é—®ï¼Œæ¯”å¦‚è®¾ç½®å’Œä¿¡å·;è¿™æ˜¯ç®¡é“è®¿é—®å®ƒä»¬å¹¶å°†å…¶åŠŸèƒ½è¿æ¥åˆ°scrapyçš„ä¸€ç§æ–¹å¼ã€‚</p><hr><p>å‚è€ƒé“¾æ¥:</p><p>â€‹              <a href="https://blog.csdn.net/xnby/article/details/52297047" target="_blank" rel="noopener">Scrapyè¿›é˜¶,middlewareçš„ä½¿ç”¨</a></p><p>â€‹              <a href="http://blog.51cto.com/linuxliu/2068601?wx" target="_blank" rel="noopener">è¿ç»´å­¦Pythonä¹‹çˆ¬è™«é«˜çº§ç¯‡</a></p><p>â€‹              </p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Scrapyæ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„çˆ¬è™«æ¡†æ¶&lt;/p&gt;
    
    </summary>
    
    
      <category term="çˆ¬è™«" scheme="httpsp://yoursite.com/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>ä¸è¯¥æ­»çš„äººï¼Œè¿˜æ´»ç€</title>
    <link href="httpsp://yoursite.com/2018/10/21/nuisance/"/>
    <id>httpsp://yoursite.com/2018/10/21/nuisance/</id>
    <published>2018-10-21T14:08:04.533Z</published>
    <updated>2018-10-21T14:08:15.830Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘å†æ¬¡ä½“ä¼šåˆ°å°†è¦æ”¾å¼ƒçš„æ„Ÿè§‰ï¼Œæ­¤åˆ»æˆ‘æƒ³çš„å¹¶ä¸æ˜¯ï¼Œé»‘è‰²æˆä¸ºé»‘è‰²çš„åŸå› ï¼Œè€Œæ˜¯çœ¼å‰çš„çº¢è‰²ä¸ºä»€ä¹ˆè¿™ä¹ˆåˆºçœ¼ã€‚<br><a id="more"></a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘å†æ¬¡ä½“ä¼šåˆ°å°†è¦æ”¾å¼ƒçš„æ„Ÿè§‰ï¼Œæ­¤åˆ»æˆ‘æƒ³çš„å¹¶ä¸æ˜¯ï¼Œé»‘è‰²æˆä¸ºé»‘è‰²çš„åŸå› ï¼Œè€Œæ˜¯çœ¼å‰çš„çº¢è‰²ä¸ºä»€ä¹ˆè¿™ä¹ˆåˆºçœ¼ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="è¯" scheme="httpsp://yoursite.com/tags/%E8%AF%9D/"/>
    
  </entry>
  
  <entry>
    <title>qppiumæ¨¡æ‹Ÿ---å¾®ä¿¡æœ‹å‹åœˆ</title>
    <link href="httpsp://yoursite.com/2018/10/20/wechatspider/"/>
    <id>httpsp://yoursite.com/2018/10/20/wechatspider/</id>
    <published>2018-10-20T14:38:13.269Z</published>
    <updated>2018-10-28T13:18:23.294Z</updated>
    
    <content type="html"><![CDATA[<p>åˆå°Androidçˆ¬è™«<br><a id="more"></a></p><h2 id="1-appiumä»‹ç»"><a href="#1-appiumä»‹ç»" class="headerlink" title="1. appiumä»‹ç»"></a>1. appiumä»‹ç»</h2><hr><p><a href="https://testerhome.com/wiki/appiumdoccn" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Appium is an open source test automation framework <span class="keyword">for</span> use with native <span class="keyword">and</span> hybrid mobile apps.</span><br></pre></td></tr></table></figure><p>å¦‚æœè¯´æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Seleniumåœ¨webç«¯å¯¹è¡Œä¸ºè¿›è¡Œæ¨¡æ‹Ÿï¼Œé‚£ä¹ˆAppniumå³æ˜¯æˆ‘ä»¬é’ˆå¯¹Appçš„æ“ä½œæ¨¡æ‹Ÿå™¨ã€‚</p><h2 id="2-çˆ¬å–æ€è·¯"><a href="#2-çˆ¬å–æ€è·¯" class="headerlink" title="2 . çˆ¬å–æ€è·¯"></a>2 . çˆ¬å–æ€è·¯</h2><hr><p>ç‚¹å‡» Start ServeræŒ‰é’®å³å¯å¯åŠ¨ Appium çš„æœåŠ¡ï¼Œç›¸å½“äºå¼€å¯äº†ä¸€ä¸ª Appium æœåŠ¡å™¨ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ Appium å†…ç½®çš„é©±åŠ¨æˆ– Pythonä»£ç å‘ Appium çš„æœåŠ¡å™¨å‘é€ä¸€ç³»åˆ—æ“ä½œæŒ‡ä»¤ï¼Œ Appium å°±ä¼šæ ¹æ® ä¸åŒçš„æŒ‡ä»¤å¯¹ç§»åŠ¨è®¾å¤‡è¿›è¡Œé©±åŠ¨ï¼Œå®Œæˆä¸åŒçš„åŠ¨ä½œ</p><p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fwhfvq2ynqj30m50kiwfv.jpg" alt=""></p><p>Appium è¿è¡Œä¹‹åæ­£åœ¨ç›‘å¬ 4723 ç«¯å£ ã€‚ æˆ‘ä»¬å¯ä»¥å‘æ­¤ç«¯å£å¯¹åº”çš„æœåŠ¡æ¥å£å‘é€æ“ä½œæŒ‡ä»¤ï¼Œæ­¤é¡µé¢å°±ä¼šæ˜¾ç¤ºè¿™ä¸ªè¿‡ç¨‹çš„æ“ä½œæ—¥å¿—</p><p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fwhfw7fi3fj30m30klgls.jpg" alt=""></p><p><em>å¼€å§‹è¿æ¥</em></p><p>1.Android æ‰‹æœºé€šè¿‡æ•°æ®çº¿å’Œè¿è¡Œ Appium çš„ PC ç›¸è¿ï¼ŒåŒæ—¶æ‰“å¼€ USB è°ƒè¯•åŠŸèƒ½<br>2.cmd è¾“å…¥<code>adb devices</code>ï¼Œå¾—åˆ°è®¾å¤‡åç§°<br>3.é…ç½®Capabilityå‚æ•°(å¦‚ä¸‹å›¾)ï¼Œå…¶ä¸­ï¼š<br>â€‹     //  platformNameï¼š å®ƒæ˜¯å¹³å°åç§°ï¼Œéœ€è¦åŒºåˆ† Android æˆ– iOSï¼Œæ­¤å¤„å¡«å†™ Android<br>â€‹     //  deviceNameï¼š å®ƒæ˜¯è®¾å¤‡åç§°ï¼Œæ­¤å¤„æ˜¯æ‰‹æœºçš„å…·ä½“ç±»å‹ã€‚<br>â€‹     //  appPackageï¼š å®ƒæ˜¯ App ç¨‹åºåŒ…åã€‚é€šè¿‡cmdå‘½ä»¤<code>adb shell pm list packages</code>å¯æŸ¥<br>â€‹     //  appActivityï¼š å®ƒæ˜¯å…¥å£ Activity åï¼Œè¿™é‡Œé€šå¸¸éœ€è¦ä»¥ï¼å¼€å¤´ã€‚<br>4.start Session</p><p>â€‹                                                    </p><p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fwhfwunwn5j31160jignb.jpg" alt=""></p><p> åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨appiumçœ‹åˆ°æ¯å—å…ƒç´ çš„idï¼Œxpathå®šä½ç­‰ä¿¡æ¯ï¼Œ åŒæ—¶ï¼Œ  tap(),click(),ç­‰åŠ¨ä½œå‡½æ•°ï¼Œä¹Ÿç»™æˆ‘ä»¬éšå¿ƒæ‰€æ¬²çš„æ¨¡æ‹Ÿæä¾›ç©ºé—´ã€‚</p><p>å°±æ˜¯<code>å®šä½</code>+<code>è·å–</code>ï¼Œå¹¶æŠŠè·å–å†…å®¹å­˜å…¥MongoDB</p><p>//å®šä½å¯é€šè¿‡ IDï¼Œæˆ–ç›´æ¥ XPATH å®šä½(äº‹å®ä¸Šï¼Œappiumå¾ˆäººæ€§åŒ–çš„ç›´æ¥ä¸ºç”¨æˆ·æä¾›äº†æŸå…ƒç´ çš„XPATHæŸ¥æ‰¾è·¯å¾„)</p><p>//æˆªè‡³10.23 0:17 ä»æœªæ‰¾åˆ°è·å–æ–‡æœ¬å®‰å“å…ƒç´ å¯¹åº”çš„æ–‡æœ¬çš„æ–¹æ³•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os </span><br><span class="line"><span class="keyword">from</span> appium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> appium.webdriver.common.touch_action <span class="keyword">import</span> TouchAction</span><br><span class="line"><span class="keyword">from</span> selenium.common.exceptions <span class="keyword">import</span> NoSuchElementException</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">from</span> pymongo <span class="keyword">import</span> MongoClient</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="keyword">from</span> processor <span class="keyword">import</span> Processor</span><br><span class="line"><span class="keyword">from</span> config <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Moments</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        åˆå§‹åŒ–</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># é©±åŠ¨é…ç½®</span></span><br><span class="line">        self.desired_caps = &#123;</span><br><span class="line">            <span class="string">'platformName'</span>: PLATFORM,</span><br><span class="line">            <span class="string">'deviceName'</span>: DEVICE_NAME,</span><br><span class="line">            <span class="string">'appPackage'</span>: APP_PACKAGE,</span><br><span class="line">            <span class="string">'appActivity'</span>: APP_ACTIVITY</span><br><span class="line">        &#125;</span><br><span class="line">        self.driver = webdriver.Remote(DRIVER_SERVER, self.desired_caps)</span><br><span class="line">        self.wait = WebDriverWait(self.driver, TIMEOUT)</span><br><span class="line">        self.client = MongoClient(MONGO_URL)</span><br><span class="line">        self.db = self.client[MONGO_DB]</span><br><span class="line">        self.collection = self.db[MONGO_COLLECTION]</span><br><span class="line">        <span class="comment"># å¤„ç†å™¨</span></span><br><span class="line">        self.processor = Processor()</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        ç™»å½•å¾®ä¿¡</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># ç™»å½•æŒ‰é’®</span></span><br><span class="line">        login = self.wait.until(EC.presence_of_element_located((By.ID, <span class="string">'com.tencent.mm:id/d75'</span>)))</span><br><span class="line">        login.click()</span><br><span class="line">        <span class="comment"># æ‰‹æœºè¾“å…¥</span></span><br><span class="line">        phone = self.wait.until(EC.presence_of_element_located((By.ID, <span class="string">'com.tencent.mm:id/hz'</span>)))</span><br><span class="line">        phone.set_text(USERNAME)</span><br><span class="line">        <span class="comment"># ä¸‹ä¸€æ­¥</span></span><br><span class="line">        next = self.wait.until(EC.element_to_be_clickable((By.ID, <span class="string">'com.tencent.mm:id/alr'</span>)))</span><br><span class="line">        next.click()</span><br><span class="line">        <span class="comment"># å¯†ç </span></span><br><span class="line">        password = self.wait.until(</span><br><span class="line">            EC.presence_of_element_located((By.XPATH, <span class="string">'//*[@resource-id="com.tencent.mm:id/hz"][1]'</span>)))</span><br><span class="line">        password.set_text(PASSWORD)</span><br><span class="line">        <span class="comment"># æäº¤</span></span><br><span class="line">        submit = self.wait.until(EC.element_to_be_clickable((By.ID, <span class="string">'com.tencent.mm:id/alr'</span>)))</span><br><span class="line">        submit.click()</span><br><span class="line">        submit = self.wait.until(EC.element_to_be_clickable((By.ID, <span class="string">'com.tencent.mm:id/an3'</span>)))</span><br><span class="line">        submit.click()</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        è¿›å…¥æœ‹å‹åœˆ</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># é€‰é¡¹å¡</span></span><br><span class="line">        tab = self.wait.until(</span><br><span class="line">            EC.presence_of_element_located((By.XPATH, <span class="string">'//android.widget.FrameLayout[@content-desc="å½“å‰æ‰€åœ¨é¡µé¢,ä¸wxid_br71rgy4kg5n22çš„èŠå¤©"]/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.RelativeLayout/android.widget.LinearLayout/android.widget.RelativeLayout[3]/android.widget.LinearLayout/android.widget.RelativeLayout/android.widget.ImageView'</span>)))</span><br><span class="line">        tab.click()</span><br><span class="line">        <span class="comment"># æœ‹å‹åœˆ</span></span><br><span class="line">        moments = self.wait.until(EC.presence_of_element_located((By.ID, <span class="string">'com.tencent.mm:id/a7f'</span>)))</span><br><span class="line">        moments.click()</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">crawl</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        çˆ¬å–</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">            <span class="comment"># å½“å‰é¡µé¢æ˜¾ç¤ºçš„æ‰€æœ‰çŠ¶æ€</span></span><br><span class="line">            items = self.wait.until(</span><br><span class="line">                EC.presence_of_all_elements_located(</span><br><span class="line">                    (By.XPATH,<span class="string">'//android.widget.FrameLayout[@content-desc="å½“å‰æ‰€åœ¨é¡µé¢,æœ‹å‹åœˆ"]/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.RelativeLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.ListView/android.widget.FrameLayout'</span>)))</span><br><span class="line">            <span class="comment"># ä¸Šæ»‘</span></span><br><span class="line">            self.driver.swipe(FLICK_START_X, FLICK_START_Y + FLICK_DISTANCE, FLICK_START_X, FLICK_START_Y)</span><br><span class="line">            <span class="comment"># éå†æ¯æ¡çŠ¶æ€</span></span><br><span class="line">            <span class="keyword">for</span> item <span class="keyword">in</span> items:              </span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    <span class="comment"># æ˜µç§°</span></span><br><span class="line">                    nickname = self.wait.until(</span><br><span class="line">                EC.presence_of_all_elements_located(</span><br><span class="line">                    (By.XPATH,<span class="string">'//android.widget.FrameLayout[@content-desc="å½“å‰æ‰€åœ¨é¡µé¢,æœ‹å‹åœˆ"]/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.RelativeLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.ListView/android.widget.FrameLayout[1]/android.widget.LinearLayout/android.widget.RelativeLayout/android.widget.TextView'</span>))).text()</span><br><span class="line">                    <span class="comment"># æ­£æ–‡</span></span><br><span class="line">                    content = self.wait.until(</span><br><span class="line">                EC.presence_of_all_elements_located(</span><br><span class="line">                    (By.XPATH,<span class="string">'//android.widget.FrameLayout[@content-desc="å½“å‰æ‰€åœ¨é¡µé¢,æœ‹å‹åœˆ"]/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.RelativeLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.ListView/android.widget.FrameLayout[1]/android.widget.LinearLayout/android.widget.LinearLayout[1]/android.widget.LinearLayout/android.view.View'</span>))).text()</span><br><span class="line">                    <span class="comment"># æ—¥æœŸ</span></span><br><span class="line">                    date = self.wait.until(</span><br><span class="line">                EC.presence_of_all_elements_located(</span><br><span class="line">                    (By.XPATH,<span class="string">'//android.widget.FrameLayout[@content-desc="å½“å‰æ‰€åœ¨é¡µé¢,æœ‹å‹åœˆ"]/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.RelativeLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.ListView/android.widget.FrameLayout[1]/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.LinearLayout/android.widget.TextView'</span>))).text()</span><br><span class="line">                    <span class="comment"># å¤„ç†æ—¥æœŸ</span></span><br><span class="line">                    date = self.processor.date(date)</span><br><span class="line">                    print(<span class="string">'ä¸€æ¬¡insertè®°å½•'</span>)</span><br><span class="line">                    print(nickname, content, date)</span><br><span class="line">                    data = &#123;</span><br><span class="line">                        <span class="string">'nickname'</span>: nickname,</span><br><span class="line">                        <span class="string">'content'</span>: content,</span><br><span class="line">                        <span class="string">'date'</span>: date,</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment"># æ’å…¥MongoDB</span></span><br><span class="line">                    self.collection.update(&#123;<span class="string">'nickname'</span>: nickname, <span class="string">'content'</span>: content&#125;, &#123;<span class="string">'$set'</span>: data&#125;, <span class="keyword">True</span>)</span><br><span class="line">                    sleep(SCROLL_SLEEP_TIME)</span><br><span class="line">                <span class="keyword">except</span> NoSuchElementException:</span><br><span class="line">                    <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        å…¥å£</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># ç™»å½•</span></span><br><span class="line">        self.login()</span><br><span class="line">        <span class="comment"># è¿›å…¥æœ‹å‹åœˆ</span></span><br><span class="line">        self.enter()</span><br><span class="line">        <span class="comment"># çˆ¬å–</span></span><br><span class="line">        self.crawl()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    moments = Moments()</span><br><span class="line">    moments.main()</span><br></pre></td></tr></table></figure><p>å¯¹æœ‹å‹åœˆæ—¶é—´è¿›è¡Œå¤„ç†</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Processor</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">date</span><span class="params">(self, datetime)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        å¤„ç†æ—¶é—´</span></span><br><span class="line"><span class="string">        :param datetime: åŸå§‹æ—¶é—´</span></span><br><span class="line"><span class="string">        :return: å¤„ç†åæ—¶é—´</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> re.match(<span class="string">'\d+åˆ†é’Ÿå‰'</span>, datetime):</span><br><span class="line">            minute = re.match(<span class="string">'(\d+)'</span>, datetime).group(<span class="number">1</span>)</span><br><span class="line">            datetime = time.strftime(<span class="string">'%Y-%m-%d'</span>, time.localtime(time.time() - float(minute) * <span class="number">60</span>))</span><br><span class="line">        <span class="keyword">if</span> re.match(<span class="string">'\d+å°æ—¶å‰'</span>, datetime):</span><br><span class="line">            hour = re.match(<span class="string">'(\d+)'</span>, datetime).group(<span class="number">1</span>)</span><br><span class="line">            datetime = time.strftime(<span class="string">'%Y-%m-%d'</span>, time.localtime(time.time() - float(hour) * <span class="number">60</span> * <span class="number">60</span>))</span><br><span class="line">        <span class="keyword">if</span> re.match(<span class="string">'æ˜¨å¤©'</span>, datetime):</span><br><span class="line">            datetime = time.strftime(<span class="string">'%Y-%m-%d'</span>, time.localtime(time.time() - <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span>))</span><br><span class="line">        <span class="keyword">if</span> re.match(<span class="string">'\d+å¤©å‰'</span>, datetime):</span><br><span class="line">            day = re.match(<span class="string">'(\d+)'</span>, datetime).group(<span class="number">1</span>)</span><br><span class="line">            datetime = time.strftime(<span class="string">'%Y-%m-%d'</span>, time.localtime(time.time()) - float(day) * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span>)</span><br><span class="line">        <span class="keyword">return</span> datetime</span><br></pre></td></tr></table></figure><p>â€”æœªå®Œå¾…ç»­</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åˆå°Androidçˆ¬è™«&lt;br&gt;
    
    </summary>
    
    
      <category term="çˆ¬è™«" scheme="httpsp://yoursite.com/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>MongoDB</title>
    <link href="httpsp://yoursite.com/2018/10/20/MongoDB/"/>
    <id>httpsp://yoursite.com/2018/10/20/MongoDB/</id>
    <published>2018-10-20T07:11:28.435Z</published>
    <updated>2018-10-20T09:45:36.168Z</updated>
    
    <content type="html"><![CDATA[<p><em>ä»€ä¹ˆæ˜¯MongoDB?æˆ‘ä»¬åˆè¯¥å»æ€æ ·ä½¿ç”¨å®ƒï¼Ÿ</em></p><a id="more"></a><p><code>å·²åˆ </code></p><p><a href="https://www.runoob.com/mongodb" target="_blank" rel="noopener">MongoDBå®˜æ–¹æ–‡æ¡£</a></p><p><a href="https://blog.csdn.net/callinglove/article/details/45668673?utm_source=blogxgwz0" target="_blank" rel="noopener">PyMongoæ˜¯åœ¨Pythonç¯å¢ƒä¸‹ä½¿ç”¨MongoDBçš„è¯­è¨€</a></p><p>å†™äº†ä¸€åŠï¼Œå¿½ç„¶è§‰å¾—ï¼Œé’ˆå¯¹ é‚£äº›[å·¥å…·æ€§çš„]ï¼Œå°±è€è€å®å®æŠŠå®˜æ–¹çš„æ–‡æ¡£çœ‹æ‡‚ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;em&gt;ä»€ä¹ˆæ˜¯MongoDB?æˆ‘ä»¬åˆè¯¥å»æ€æ ·ä½¿ç”¨å®ƒï¼Ÿ&lt;/em&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="å·¥å…·" scheme="httpsp://yoursite.com/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>å†™åœ¨å­¦ä¹ ä»£ç†æ± å’Œcookieæ± ä¹‹å</title>
    <link href="httpsp://yoursite.com/2018/10/08/sougoupachong/"/>
    <id>httpsp://yoursite.com/2018/10/08/sougoupachong/</id>
    <published>2018-10-08T15:33:42.293Z</published>
    <updated>2018-10-20T09:54:19.440Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰å…³åŸºæœ¬æ€è·¯çš„æè¿°</p> <a id="more"></a><p>è¿™ç¯‡åšå®¢çš„ç›®çš„æ˜¯ï¼Œå°è¯•ææ‡‚æˆ‘æœ€è¿‘åšäº†ä»€ä¹ˆ.</p><p>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ç”¨ä»£ç†æ± ï¼Ÿ<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">éƒ¨åˆ†ç½‘ç«™æœ‰åçˆ¬è™«æªæ–½ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªipåœ°å€å¯¹è¯¥ç½‘ç«™è¿›è¡Œè¿‡å¤šçš„è®¿é—®æ—¶ï¼Œä¼šè¢«åçˆ¬è™«æœºåˆ¶è‡ªåŠ¨è§†ä¸ºçˆ¬è™«ï¼Œä»è€Œipæ‹‰é»‘.</span><br></pre></td></tr></table></figure><p>ä»£ç†æ± çš„æ„å»ºæ˜¯æ€æ ·çš„ï¼Ÿ<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¯¹ç½‘ä¸Šçš„å…è´¹ipä»£ç†ç½‘ç«™è¿›è¡Œçˆ¬å–(è¥¿åˆºï¼Œproxy360)ï¼Œå®ƒä»¬ç½‘ç«™çš„ipæºæ˜¯å®Œå…¨æš´éœ²åœ¨ç½‘é¡µæºç ä¸Šçš„ï¼Œæˆ‘ä»¬åªç”¨ç®€å•çš„è¿›è¡Œåˆ†æï¼Œå°±å¯ä»¥æ‹¿åˆ°è¶³å¤Ÿçš„ip.</span><br></pre></td></tr></table></figure><p>å¦‚æ­¤ä¸€æ¥ï¼Œæ€è·¯å¾ˆæ¸…æ™°ï¼Œè®¾è®¡ä¸€ä¸ªçˆ¬è™«ï¼Œé’ˆå¯¹å‡ ä¸ªå…è´¹çš„ç½‘ç«™è§£æçˆ¬å–ï¼Œå°†æ‹¿åˆ° ip è¿›è¡Œç­›é€‰ï¼Œæ’åï¼Œå­˜å…¥æ•°æ®åº“ã€‚  å¹¶å¯ä»¥å®ç°è·å–æ¥å£ï¼Œå³è°ƒå³ç”¨ã€‚</p><p><code>åŸºæœ¬æ¨¡å—åˆ†ä¸º 4å—ï¼šå­˜å‚¨æ¨¡å—ã€è·å–æ¨¡å—ã€æ£€æµ‹æ¨¡å—ã€æ¥å£æ¨¡å—</code></p><p>###</p><ol><li><p>å­˜å‚¨æ¨¡å—ï¼š è´Ÿè´£å­˜å‚¨æŠ“å–ä¸‹æ¥çš„ä»£ç†ã€‚ é¦–å…ˆè¦ä¿è¯ä»£ç†ä¸é‡å¤ï¼Œ è¦æ ‡è¯†ä»£ç†çš„å¯ç”¨æƒ…å†µï¼Œè¿˜ è¦åŠ¨æ€å®æ—¶å¤„ç†æ¯ä¸ªä»£ç†ï¼Œæ‰€ä»¥ä¸€ç§æ¯”è¾ƒé«˜æ•ˆå’Œæ–¹ä¾¿çš„å­˜å‚¨æ–¹å¼å°±æ˜¯ä½¿ç”¨ Redis çš„ Sorted Setï¼Œå³æœ‰åºé›†åˆã€‚</p></li><li><p>è·å–æ¨¡å—ï¼š éœ€è¦å®šæ—¶åœ¨å„å¤§ä»£ç†ç½‘ç«™æŠ“å–ä»£ç†ã€‚ ä»£ç†å¯ä»¥æ˜¯å…è´¹å…¬å¼€ä»£ç†ä¹Ÿå¯ä»¥æ˜¯ä»˜è´¹ä»£ ç†ï¼Œä»£ç†çš„å½¢å¼éƒ½æ˜¯ IP åŠ ç«¯å£ï¼Œæ­¤æ¨¡å—å°½é‡ä»ä¸åŒæ¥æºè·å–ï¼Œå°½é‡æŠ“å–é«˜åŒ¿ä»£ç†ï¼ŒæŠ“å–æˆåŠŸ ä¹‹åå°†å¯ç”¨ä»£ç†ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚ </p></li><li><p>æ£€æµ‹æ¨¡å—ï¼š éœ€è¦å®šæ—¶æ£€æµ‹æ•°æ®åº“ä¸­çš„ä»£ç†ã€‚ è¿™é‡Œéœ€è¦è®¾ç½®ä¸€ä¸ªæ£€æµ‹é“¾æ¥ï¼Œæœ€å¥½æ˜¯çˆ¬å–å“ªä¸ªç½‘ ç«™å°±æ£€æµ‹å“ªä¸ªç½‘ç«™ï¼Œè¿™æ ·æ›´åŠ æœ‰é’ˆå¯¹æ€§ï¼Œå¦‚æœè¦åšä¸€ä¸ªé€šç”¨å‹çš„ä»£ç†ï¼Œé‚£å¯ä»¥è®¾ç½®ç™¾åº¦ç­‰é“¾ æ¥æ¥æ£€æµ‹ã€‚ å¦å¤–ï¼Œæˆ‘ä»¬éœ€è¦æ ‡è¯†æ¯ä¸€ä¸ªä»£ç†çš„çŠ¶æ€ï¼Œå¦‚è®¾ç½®åˆ†æ•°æ ‡è¯†ï¼Œ 100 åˆ†ä»£è¡¨å¯ç”¨ï¼Œåˆ† æ•°è¶Šå°‘ä»£è¡¨è¶Šä¸å¯ç”¨ã€‚ æ£€æµ‹ä¸€æ¬¡ï¼Œå¦‚æœä»£ç†å¯ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†åˆ†æ•°æ ‡è¯†ç«‹å³è®¾ç½®ä¸º 100 æ»¡ åˆ†ï¼Œä¹Ÿå¯ä»¥åœ¨åŸåŸºç¡€ä¸ŠåŠ  låˆ†ï¼›å¦‚æœä»£ç†ä¸å¯ç”¨ï¼Œå¯ä»¥å°†åˆ†æ•°æ ‡è¯†å‡ l åˆ†ï¼Œå½“åˆ†æ•°æˆšåˆ°ä¸€å®šé˜” å€¼åï¼Œä»£ç†å°±ç›´æ¥ä»æ•°æ®åº“ç§»é™¤ã€‚ é€šè¿‡è¿™æ ·çš„æ ‡è¯†åˆ†æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¾¨åˆ«ä»£ç†çš„å¯ç”¨æƒ…å†µï¼Œ é€‰ç”¨çš„æ—¶å€™ä¼šæ›´æœ‰é’ˆå¯¹æ€§ã€‚ </p></li><li><p>æ¥å£æ¨¡å—ï¼š éœ€è¦ç”¨ API æ¥æä¾›å¯¹å¤–æœåŠ¡çš„æ¥å£ ã€‚ å…¶å®æˆ‘ä»¬å¯ä»¥ç›´æ¥è¿æ¥æ•°æ®åº“é‡‡å–å¯¹åº”çš„æ•° æ®ï¼Œä½†æ˜¯è¿™æ ·å°±éœ€è¦çŸ¥é“æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ï¼Œå¹¶ä¸”è¦é…ç½®è¿æ¥ï¼Œè€Œæ¯”è¾ƒå®‰å…¨å’Œæ–¹ä¾¿çš„æ–¹å¼å°± æ˜¯æä¾›ä¸€ä¸ª Web API æ¥å£ï¼Œæˆ‘ä»¬é€šè¿‡è®¿é—®æ¥å£å³å¯æ‹¿åˆ°å¯ç”¨ä»£ç†ã€‚ å¦å¤–ï¼Œç”±äºå¯ç”¨ä»£ç†å¯èƒ½ æœ‰å¤šä¸ªï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªéšæœºè¿”å›æŸä¸ªå¯ç”¨ä»£ç†çš„æ¥å£ï¼Œè¿™æ ·å°±èƒ½ä¿è¯æ¯ä¸ªå¯ç”¨ä»£ç† éƒ½å¯ä»¥å–åˆ°ï¼Œå®ç°è´Ÿè½½å‡è¡¡</p></li></ol><p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fw7uv32bfaj30px0cfahk.jpg" alt=""></p><p><a href="https://github.com/Python3WebSpider/ProxyPool" target="_blank" rel="noopener">æˆ‘ä»¬éœ€è¦è‡ªå·±é€ è½®å­å—</a>  æˆ‘è§‰å¾—è¿™è¦åˆ†æƒ…å†µã€‚ </p><p><br><br></p><p>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ä½¿ç”¨cookieæ± </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cookiesæ˜¯æˆ‘ä»¬ç™»é™†ä¸€ä¸ªé¡µé¢çš„æ¥å£ï¼Œä¸ç™»é™†å›ºç„¶å¯ä»¥è·å–ç½‘é¡µæºç ï¼Œä½†æ˜¯ä¼šå—è®¿é—®é™åˆ¶ï¼Œä»¥åŠä¸å…·æœ‰ä¸€äº›é¡µé¢çš„æƒé™ï¼Œæ¯”å¦‚å¾®åšæ¥è¯´ï¼Œæˆ‘ä»¬çš„cookieæ± å®é™…ä¸Šå°±æ˜¯å¤šä¸ªå¾®åšè´¦å·çš„ä¿¡æ¯ã€‚</span><br></pre></td></tr></table></figure><p>ä¸ä¸Šé¢ipæ± çš„æ­å»ºå·®åˆ«æ˜¯ä¸€äº›å¾®åšè´¦å·æ˜¯æˆ‘ä»¬éœ€è¦è‡ªå·±é€šè¿‡æŸäº›æ¸ é“è´­ä¹°çš„ã€‚</p><p><a href="https://github.com/Python3WebSpider/CookiesPool" target="_blank" rel="noopener">è½®å­</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ‰å…³åŸºæœ¬æ€è·¯çš„æè¿°&lt;/p&gt;
    
    </summary>
    
    
      <category term="çˆ¬è™«" scheme="httpsp://yoursite.com/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>python ã® __new__()</title>
    <link href="httpsp://yoursite.com/2018/10/07/python_new/"/>
    <id>httpsp://yoursite.com/2018/10/07/python_new/</id>
    <published>2018-10-07T09:28:04.356Z</published>
    <updated>2018-10-09T14:14:49.151Z</updated>
    
    <content type="html"><![CDATA[<p><code>åœ¨å­¦ä¹ ä»£ç†æ± ä¸­ï¼Œå‘ç°äº†è‡ªå·±æç½®çš„é—®é¢˜ã€‚æˆ‘å°è¯•é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæ¥ç†æ¸…   __ new __  () å’Œ __ init __()çš„å…³ç³».</code></p> <a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span><span class="params">(object)</span>:</span></span><br><span class="line">    price = <span class="number">50</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">how_much_of_book</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        print(self)</span><br><span class="line">        <span class="keyword">return</span> self.price * n</span><br><span class="line"></span><br><span class="line">foo = Foo()</span><br><span class="line">print(foo.how_much_of_book(<span class="number">8</span>))</span><br><span class="line">print(dir(Foo))</span><br></pre></td></tr></table></figure><p>â¬†â¬†â¬†åˆ†æä¸Šé¢çš„ä»£ç ï¼Œè¿™ä¸ªç±»å®ä¾‹åŒ–è¿‡ç¨‹ï¼ŒFooç±»ç»§æ‰¿objectç±»ï¼Œç»§æ‰¿äº†objectçš„<strong>new</strong>æ–¹æ³•ã€‚å½“ä½ æ²¡æœ‰é‡è½½è¿™ä¸ªæ–¹æ³•(é€šä¿—æ¥è¯´ï¼Œ<code>ä½ æ²¡æœ‰åœ¨Fooç±»ä¸­æ²¡æœ‰å†™__new__æ–¹æ³•)</code>ï¼ŒFooå®ä¾‹åŒ–æ˜¯é»˜è®¤è‡ªåŠ¨è°ƒç”¨çˆ¶ç±»<strong>new</strong>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›å€¼ä¸ºç±»çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯self, ç”¨æ¥æä¾›è¿™ä¸ªå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span><span class="params">(object)</span>:</span></span><br><span class="line">    price = <span class="number">50</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *agrs, **kwds)</span>:</span></span><br><span class="line">        inst = object.__new__(cls, *agrs, **kwds)</span><br><span class="line">        print(inst)</span><br><span class="line">        <span class="keyword">return</span> inst</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">how_much_of_book</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        print(self)</span><br><span class="line">        <span class="keyword">return</span> self.price * n</span><br><span class="line"></span><br><span class="line">foo = Foo()</span><br><span class="line">print(foo.how_much_of_book(<span class="number">8</span>))</span><br><span class="line"><span class="comment"># &lt;__main__.Foo object at 0x1006f2750&gt;</span></span><br><span class="line"><span class="comment"># &lt;__main__.Foo object at 0x1006f2750&gt;</span></span><br><span class="line"><span class="comment"># 400</span></span><br></pre></td></tr></table></figure><p>â¬†â¬†â¬†è¯·çœ‹ä¸Šé¢ä»£ç ï¼ŒFooç±»ä¸­é‡è½½äº†<strong>new</strong>æ–¹æ³•ï¼Œå®ƒçš„è¿”å›å€¼ä¸ºFooç±»çš„å®ä¾‹å¯¹è±¡</p><hr><p><code>_init__ æ–¹æ³•ä¸ºåˆå§‹åŒ–æ–¹æ³•ï¼Œä¸ºç±»çš„å®ä¾‹æä¾›ä¸€äº›å±æ€§æˆ–å®Œæˆä¸€äº›åŠ¨ä½œ</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *agrs, **kwds)</span>:</span></span><br><span class="line">        inst = object.__new__(cls, *agrs, **kwds)</span><br><span class="line">        print(inst)</span><br><span class="line">        <span class="keyword">return</span> inst</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, price=<span class="number">50</span>)</span>:</span></span><br><span class="line">        self.price = price</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">how_much_of_book</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        print(self)</span><br><span class="line">        <span class="keyword">return</span> self.price * n</span><br><span class="line"></span><br><span class="line">foo = Foo()</span><br><span class="line">print(foo.how_much_of_book(<span class="number">8</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># &lt;__main__.Foo object at 0x1006f2750&gt;</span></span><br><span class="line"><span class="comment"># &lt;__main__.Foo object at 0x1006f2750&gt;</span></span><br><span class="line"><span class="comment"># 400</span></span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆè¯´åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ç”¨ä¸¤å¥è¯æ¥æ€»ç»“å°±æ˜¯:</p><p>â­<strong>new</strong> æ–¹æ³•åˆ›å»ºå®ä¾‹å¯¹è±¡ä¾›<strong>init</strong> æ–¹æ³•ä½¿ç”¨ï¼Œ<strong>init</strong>æ–¹æ³•å®šåˆ¶å®ä¾‹å¯¹è±¡ã€‚</p><p><strong>â­new</strong> æ–¹æ³•å¿…é¡»è¿”å›å€¼ï¼Œ<strong>init</strong>æ–¹æ³•ä¸éœ€è¦è¿”å›å€¼ã€‚(å¦‚æœè¿”å›éNoneå€¼å°±æŠ¥é”™)</p><p><br><br></p><p>æˆ‘ä»¬ä¸¾ä¸¤ä¸ªä¾‹å­ï¼Œè§‚å¯ŸNewçš„å¸¸è§ä¸¤ç§ç”¨æ³•</p><p>ç¬¬ä¸€ï¼š ç»§æ‰¿ä¸å¯å˜æ•°æ®ç±»å‹æ—¶éœ€è¦ç”¨åˆ°<strong>new</strong>æ–¹æ³•(like int, str, or tupleï¼‰ </p><p> å°†è‹±å¯¸è½¬åŒ–æˆç±³</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># coding:utf-8</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Inch(float):</span><br><span class="line">    &quot;Convert from inch to meter&quot;</span><br><span class="line">    def __new__(cls, arg=0.0):</span><br><span class="line">        return float.__new__(cls, arg*0.0254)</span><br><span class="line"></span><br><span class="line">print(Inch(12))</span><br></pre></td></tr></table></figure><p><br></p><p>ç¬¬äºŒ:   ç”¨åœ¨å…ƒç±»ï¼Œå®šåˆ¶åˆ›å»ºç±»å¯¹è±¡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"><span class="string">'''æ¥è‡ªhttp://eli.thegreenplace.net/2011/08/14/python-metaclasses-by-example'''</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MetaClass</span><span class="params">(type)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(meta, name, bases, dct)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'-----------------------------------'</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Allocating memory for class"</span>, name</span><br><span class="line">        <span class="keyword">print</span> meta</span><br><span class="line">        <span class="keyword">print</span> bases</span><br><span class="line">        <span class="keyword">print</span> dct</span><br><span class="line">        <span class="keyword">return</span> super(MetaClass, meta).__new__(meta, name, bases, dct)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(cls, name, bases, dct)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'-----------------------------------'</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Initializing class"</span>, name</span><br><span class="line">        <span class="keyword">print</span> cls</span><br><span class="line">        <span class="keyword">print</span> bases</span><br><span class="line">        <span class="keyword">print</span> dct</span><br><span class="line">        super(MetaClass, cls).__init__(name, bases, dct)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Myclass</span><span class="params">(object)</span>:</span></span><br><span class="line">    __metaclass__ = MetaClass</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(self, param)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> param</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p = Myclass()</span><br><span class="line">p.foo(<span class="string">"hello"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------------------------</span></span><br><span class="line"><span class="comment"># Allocating memory for class Myclass</span></span><br><span class="line"><span class="comment"># &lt;class '__main__.MetaClass'&gt;</span></span><br><span class="line"><span class="comment"># (&lt;type 'object'&gt;,)</span></span><br><span class="line"><span class="comment"># &#123;'__module__': '__main__', 'foo': &lt;function foo at 0x1007f6500&gt;, '__metaclass__': &lt;class '__main__.MetaClass'&gt;&#125;</span></span><br><span class="line"><span class="comment"># -----------------------------------</span></span><br><span class="line"><span class="comment"># Initializing class Myclass</span></span><br><span class="line"><span class="comment"># &lt;class '__main__.Myclass'&gt;</span></span><br><span class="line"><span class="comment"># (&lt;type 'object'&gt;,)</span></span><br><span class="line"><span class="comment"># &#123;'__module__': '__main__', 'foo': &lt;function foo at 0x1007f6500&gt;, '__metaclass__': &lt;class '__main__.MetaClass'&gt;&#125;</span></span><br><span class="line"><span class="comment"># hello</span></span><br></pre></td></tr></table></figure><p><code>Myclassç›¸å½“äº æ‹·è´äº† MetaClass çš„æ–¹æ³•ï¼ŒMetaClass çš„ç§ç±»ä»ç„¶æ˜¯ MetaClassï¼Œå®šåˆ¶çš„init çš„ç§ç±» ä¹Ÿè‡ªç„¶æ˜¯Myclass</code></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;åœ¨å­¦ä¹ ä»£ç†æ± ä¸­ï¼Œå‘ç°äº†è‡ªå·±æç½®çš„é—®é¢˜ã€‚æˆ‘å°è¯•é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæ¥ç†æ¸…   __ new __  () å’Œ __ init __()çš„å…³ç³».&lt;/code&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="å·¥å…·" scheme="httpsp://yoursite.com/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºæµ·</title>
    <link href="httpsp://yoursite.com/2018/10/07/photo/"/>
    <id>httpsp://yoursite.com/2018/10/07/photo/</id>
    <published>2018-10-07T08:57:03.798Z</published>
    <updated>2018-10-09T15:27:18.878Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://wx4.sinaimg.cn/mw690/6c3e6b13gy1fvyja7cikaj20uk0kedj0.jpg" alt=""><br><a id="more"></a><br><img src="https://wx3.sinaimg.cn/mw690/006lRDaTgy1fw2apaw5nlj32ro1ugnpe.jpg" alt=""><br><br><br><br><br><!--more--></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://wx4.sinaimg.cn/mw690/6c3e6b13gy1fvyja7cikaj20uk0kedj0.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="è¯" scheme="httpsp://yoursite.com/tags/%E8%AF%9D/"/>
    
  </entry>
  
  <entry>
    <title>GEETESTæ»‘åŠ¨éªŒè¯ç ç ´è§£</title>
    <link href="httpsp://yoursite.com/2018/10/04/huadongpojie/"/>
    <id>httpsp://yoursite.com/2018/10/04/huadongpojie/</id>
    <published>2018-10-04T10:44:21.396Z</published>
    <updated>2018-10-20T09:56:17.090Z</updated>
    
    <content type="html"><![CDATA[<p>éªŒè¯ç çš„ç ´è§£ï¼Œæ˜¯ç½‘ç«™çˆ¬è™«æ­£å¸¸è¿è¡Œæ‰€å¿…é¡»å…·å¤‡çš„åŠŸèƒ½ã€‚</p><a id="more"></a>   <p> æ³¨: æœ¬æ–‡é’ˆå¯¹[<em>æ»‘åŠ¨éªŒè¯è¢«åˆ‡å‰²éšæœºæ‰“ä¹±ï¼Œå¹¶æ ¹æ®æºç ä¸­ <strong>&lt; DIV &gt;</strong> æ ‡ç­¾é¡ºåºè¿›è¡Œ <strong>å–å—æ’åˆ—</strong>  éªŒè¯æƒ…å†µ ï¼Œå±äºå¸¸è§çš„ä¸€ç§æ··æ·†æ–¹å¼</em>]</p><hr><p>å…³é”®è¯ï¼š</p><ol><li><strong><a href="#1" target="_self">å›¾åƒåˆ†æ</a></strong></li><li><strong><a href="#2" target="_self">å›¾åƒæ‹¼æ¥</a></strong></li></ol><p id="1"><br>å›¾åƒåˆ†æ:</p><p>   &nbsp;&nbsp; æˆ‘ä»¬ä»¥<a href="https://www.huxiu.com/" target="_blank" rel="noopener">è™å—…ç½‘</a>ç™»é™†é¡µé¢ä¸ºä¾‹ï¼Œæˆ‘ä»¬åœ¨è¾“å…¥æ‰‹æœºæ³¨å†Œå‰ï¼Œéœ€è¦é€šè¿‡ä¸€ä¸ªæ»‘åŠ¨å¼çš„ <em>captcha</em> ,æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>webdriver.chrome  + selenium</code> æ¥æ¨¡æ‹Ÿæ‹–åŠ¨ï¼Œé—®é¢˜å°±åœ¨äºç©¶ç«Ÿè¦æ‹–åŠ¨å¤šè¿œï¼Ÿæ‹–åŠ¨çš„è·ç¦»ç©¶ç«Ÿæ˜¯å¤šå°‘ï¼Ÿ(offset ç©¶ç«Ÿæ˜¯å¤šå°‘ï¼Ÿ)</p><p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fvxl234pokj30dg07w76i.jpg" alt="è¿™æ˜¯æˆªå›¾"></p><p>   &nbsp;&nbsp;ä»”ç»†ä¸€æƒ³ï¼Œå¦‚æœæœ‰ä¸€ä¸ªä¸å­˜åœ¨ç¼ºå£çš„<strong>æºå›¾ç‰‡</strong>ï¼Œé‚£å°±èˆ’æœäº†ï¼Œå› ä¸ºé‚£æ ·çš„è¯ï¼Œæˆ‘ä»¬åªéœ€æ¯”è¾ƒï¼Œ<code>æºå›¾å“ªäº›åƒç´ å—ï¼Œæ¯”ä¸Šé¢çš„å›¾å½¢é¢œè‰²æ›´æ·±ï¼Œä»è€Œåˆ¤æ–­å‡ºæ·±é¢œè‰²ç¼ºå£çš„ä½ç½®</code>,è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ï¼Œéœ€è¦æ¨¡æ‹Ÿæ‹–åŠ¨çš„è·ç¦»äº†ã€‚é‚£ä¹ˆä»å“ªé‡Œå¯ä»¥å¾—åˆ°åŸå§‹å›¾ç‰‡å‘¢ï¼Ÿ<br>   F12å®¡æŸ¥ä»£ç æ—¶ï¼Œå‘ç°äº†è¿™æ ·ä¸¤ä¸ª&lt; div&gt;:</p><p><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fvxku4epdej31620ew0uu.jpg" alt="é»„çº¿æ ‡å‡º"></p><p>æˆ‘ä»¬æ‰“å¼€åå‘ç°ï¼Œé‡Œé¢å›¾ç‰‡é“¾æ¥å…¨éƒ¨æŒ‡å‘å„è‡ªçš„é‚£ä¸€ä¸ªå›¾ç‰‡ï¼Œ<a href="http://ww1.sinaimg.cn/large/006YPp6gly1fvxkuhcc8ij31630iq41p.jpg" target="_blank" rel="noopener">ä¸€ä¸ªé•¿è¿™æ ·</a>,<a href="http://ww1.sinaimg.cn/large/006YPp6gly1fvxkxx3xzuj30kc0doabb.jpg" target="_blank" rel="noopener">ä¸€ä¸ªé•¿è¿™æ ·</a>,è¿™ï¼Œè¿™ï¼è¿™ä¸å°±æ˜¯æœ‰ç¼ºå£å’Œæ²¡ç¼ºå£çš„å›¾ç‰‡å—ï¼Ÿ</p><p></p><p id="2"> <br><br> å›¾åƒæ‹¼æ¥:</p><br>ç­‰ç­‰ï¼Œä¸ºä»€ä¹ˆä¹±äº†ï¼Ÿ<p></p><p>å¯¹ï¼Œå¦‚æœæˆ‘ä»¬ä»”ç»†è§‚å¯Ÿï¼Œæˆ‘ä»¬å‘ç°å›¾ç‰‡æ˜¯è¢«åˆ‡å‰²æ‰“ä¹±äº†çš„ï¼Œè€Œä¸”ï¼Œæˆ‘ä»¬åˆ¤æ–­ï¼Œå¦‚æœæƒ³å¾—åˆ°åŸå›¾ï¼Œä¸€å®šæ˜¯è¦åƒæ‹¼ç§¯æœ¨ä¸€æ ·æŠŠè¿™äº›å°å—é‡æ–°æ’åˆ—ç»„åˆ,é‚£ä¹ˆï¼Œæœ‰ä»€ä¹ˆè§„å¾‹åœ¨å…¶ä¸­å‘¢ï¼Ÿæˆ‘ä»¬è¯¥æ€æ ·ä¸€ä¸ªä¸€ä¸ªæ‹¼å‘¢ï¼Ÿ<br>å…¶å®ï¼Œä¸éš¾å‘ç°ï¼Œæˆ‘ä»¬åœ¨æ‰“å¼€é‚£ä¸¤ä¸ªæ ‡ç­¾åï¼Œæˆ‘ä»¬å‘ç°ä¸€äº›æ•´æ•´é½é½çš„ä»ä¸Šåˆ°ä¸‹çš„æ ‡ç­¾ï¼Œå¹¶ä¸”è¿˜æœ‰   <code>position</code>å±æ€§ï¼Œx,å€¼ä»¥12ä¸ºå·®ï¼Œæœ€å°1 æœ€å¤§ 277ï¼Œä½†yåªæœ‰ 0 æˆ– 58ï¼Œç”±æ­¤åˆ†æå‡ºï¼Œä»ä¸Šåˆ°ä¸‹ï¼Œæ˜¯æˆ‘ä»¬å–ç§¯æœ¨çš„é¡ºåºï¼Œå–æ‰“ä¹±å›¾çš„ç¬¬ä¸€ä¸ª(x,y)åæ ‡ç‚¹å¯¹åº”å¤„çš„ä¸€å—ç§¯æœ¨ï¼Œç„¶åæ‹¼æ¥åˆ°ä¸€ä¸ªç©ºç™½æ¡†çš„å·¦ä¸Šè§’ï¼Œç„¶åæ¥ç€ä»ä¹±å›¾é‡Œé¢å–å‡ºç¬¬äºŒä¸ªä½ç½®çš„ç§¯æœ¨ï¼Œç´§æŒ¨ç€åˆšæ‰é‚£ä¸€ä¸ªå‘å³ï¼Œæ­¤è¡Œæ»¡äº†æ¢ä¸‹ä¸€è¡Œï¼Œä»¥æ­¤ç±»æ¨,æœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå®Œæ•´å›¾ã€‚<br>è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬çš„åˆ†æå°±ç»“æŸäº†ï¼Œç„¶åæˆ‘ä»¬é€šè¿‡åƒç´ æ¯”è¾ƒå°±å¯ä»¥æ‰¾å‡ºï¼Œç¼ºå£çš„ä½ç½®ï¼Œç„¶åæ¨¡æ‹Ÿæ‹–åŠ¨å°±okäº†ã€‚<br>æ³¨æ„ï¼Œå®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®éªŒæ€§æ¨¡æ‹Ÿæ‹–åŠ¨å‡ æ¬¡ï¼Œå†å¯¹æ‹–åŠ¨è·ç¦»distanceè¿›è¡Œå¾®ä¿®æ­£ï¼Œä»è€Œæé«˜å‡†ç¡®ç‡ã€‚<br><br><br><br><a href="https://paste.ubuntu.com/p/y7PSVFdxsJ/" target="_blank" rel="noopener">æºç </a><br><br><br><a href="https://www.jianshu.com/p/c8df1194b514" target="_blank" rel="noopener">å‚è€ƒåšå®¢</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;éªŒè¯ç çš„ç ´è§£ï¼Œæ˜¯ç½‘ç«™çˆ¬è™«æ­£å¸¸è¿è¡Œæ‰€å¿…é¡»å…·å¤‡çš„åŠŸèƒ½ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="çˆ¬è™«" scheme="httpsp://yoursite.com/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>å¿«é€Ÿç†Ÿæ‚‰ markdown</title>
    <link href="httpsp://yoursite.com/2018/10/02/learn_MarkDown/"/>
    <id>httpsp://yoursite.com/2018/10/02/learn_MarkDown/</id>
    <published>2018-10-02T12:24:50.086Z</published>
    <updated>2018-10-09T13:56:34.248Z</updated>
    
    <content type="html"><![CDATA[<p><em>å¿«é€Ÿç†Ÿæ‚‰</em><br>   <strong><em>markdown</em></strong></p><a id="more"></a>        <hr><blockquote><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨  <strong>å¤§äºå·</strong> ï¼Œæ¥è¡¨ç¤ºå¼•ç”¨</p></blockquote><p><del>æˆ‘ä»¬åœ¨æ–‡æœ¬ä¸¤è¾¹ï¼ŒåŠ ä¸Šä¸€å¯¹åŒæ³¢æµªå·ï¼Œå°±å¾—åˆ°åˆ é™¤ç‰¹æ•ˆ</del></p><p><a href="http://www.baidu.com" target="_blank" rel="noopener">æ–¹æ¡†å†…éƒ¨æ˜¯æ–‡æœ¬,ç‚¹å‡»è·³è½¬ç™¾åº¦</a><br><img src="http://ww1.sinaimg.cn/large/006YPp6gly1fvu4hphapdj307g08edh6.jpg" alt="å¦‚æœæ¡†èµ·å‰é¢åŠ ä¸ªæ„Ÿå¹å·ï¼Œä»£è¡¨æˆ‘è¦åŠ å›¾ç‰‡å›¾ç‰‡"><br>å€˜è‹¥æˆ‘å…ˆå†™ä¸‰ä¸ªäº•å·ï¼Œä»£è¡¨æˆ‘è¦å¼€å§‹<strong>åˆ—è¡¨</strong>ï¼Œ*ã€+å·å¸¦é¢†æ— åºï¼Œ1.å¸¦é¢†æœ‰åº</p><p>###</p><ul><li>k1</li><li>k2</li><li>k3</li></ul><ol><li>l1</li><li>l2</li><li>l3<br>###<br>ä¸€å¯¹åå¼•å·å¯ä»¥ç”Ÿæˆä¸€ä¸ª<code>èƒŒæ™¯åŠ æ·±</code>ï¼Œè¿™å¾ˆè®¨å–œ<br>ä¸”è¡¨æ ¼çš„åˆ›å»ºï¼Œæ ¼å¤–æ–¹ä¾¿ï¼Œåªç”¨æ·»åŠ ä¸€ç‚¹  |:â€”-: |è¿™è¡¨æ˜ï¼Œæˆ‘æ­£åœ¨å†™è¡¨æ ¼<br>|ç”µå½±|å¯¼æ¼”|è¯„åˆ†|<br>|:â€”-:|:â€”-:|:â€”-:|<br>|å¤©æ³¨å®š|è´¾æ¨ŸæŸ¯|æœªçŸ¥|<br>|æ±Ÿæ¹–å„¿å¥³|è´¾æ¨ŸæŸ¯|æœªçŸ¥|<br>|ä¸‰å³¡å¥½äºº|è´¾æ¨ŸæŸ¯|æœªçŸ¥|<br>|ç«™å°|è´¾æ¨ŸæŸ¯|æœªçŸ¥|</li></ol><p>æˆ‘ä»¬è§„å®šç”¨ä¸‰ä¸ªåå¼•å·æ‹¬ä½ä»£ç å—<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const unsigned long int a ;</span><br><span class="line">a = inf ;</span><br></pre></td></tr></table></figure></p><p><a href="http://ww1.sinaimg.cn/large/006YPp6gly1fvu792e3vuj30wx0npmz5.jpg" target="_blank" rel="noopener">ç‚¹å‡»æŸ¥çœ‹æºç å›¾</a><br><a href="http://ww1.sinaimg.cn/large/006YPp6gly1fvu6opl5ytj30j80ofagp.jpg" target="_blank" rel="noopener">ç‚¹å‡»æŸ¥çœ‹æ•ˆæœå›¾</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;em&gt;å¿«é€Ÿç†Ÿæ‚‰&lt;/em&gt;&lt;br&gt;   &lt;strong&gt;&lt;em&gt;markdown&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="å·¥å…·" scheme="httpsp://yoursite.com/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>Hexo æ›´æ¢ä¸»é¢˜</title>
    <link href="httpsp://yoursite.com/2018/09/29/newtheme/"/>
    <id>httpsp://yoursite.com/2018/09/29/newtheme/</id>
    <published>2018-09-29T15:13:40.218Z</published>
    <updated>2018-10-09T15:01:21.150Z</updated>
    
    <content type="html"><![CDATA[<p>ç®€çŸ­çš„å…³äºHexoä¸»é¢˜æ›´æ–°é…ç½®çš„è¯´æ˜<br>å½“ä½ éœ€è¦æ›´æ¢è‡ªå·±çš„åšå®¢ä¸»é¢˜æ—¶ï¼Œä½ éœ€è¦è¿™æ ·åšï¼š<br> <a id="more"></a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">$ git clone https://*********</span><br><span class="line">$ npm install hexo-renderer-pug --save</span><br><span class="line">$ npm install hexo-renderer-sass --save   #ä¸‹è½½ä¸»é¢˜æ–‡ä»¶å’Œæ¸²æŸ“å™¨ï¼Œå¦‚æœåœ¨ä¸‹è½½ç¬¬ä¸‰ä¸ªæ–‡ä»¶çš„è¿‡ç¨‹ä¸­æŠ¥é”™ï¼Œä½ å¯ä»¥è¯•è¯•npmå›½å†…é•œåƒï¼Œæˆ–ç§‘å­¦ä¸Šç½‘ã€‚</span><br><span class="line"></span><br><span class="line">theme: ****        #æ‰“å¼€æ ¹ç›®å½•ä¸‹çš„_config.yml,å¹¶æ‰¾åˆ° themeå…³é”®å­—ï¼Œæ›´æ–°è‡ªå·±ä¸»é¢˜åç§°</span><br><span class="line">$ hexo clean</span><br><span class="line">$ hexo g           # ç”Ÿæˆé™æ€é¡µé¢</span><br><span class="line">$ hexo d           # ä¸Šä¼ åˆ°github</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç®€çŸ­çš„å…³äºHexoä¸»é¢˜æ›´æ–°é…ç½®çš„è¯´æ˜&lt;br&gt;å½“ä½ éœ€è¦æ›´æ¢è‡ªå·±çš„åšå®¢ä¸»é¢˜æ—¶ï¼Œä½ éœ€è¦è¿™æ ·åšï¼š&lt;br&gt;
    
    </summary>
    
    
      <category term="å·¥å…·" scheme="httpsp://yoursite.com/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
</feed>
