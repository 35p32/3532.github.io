[{"title":"Scrapyæ¡†æ¶(äºŒ)","url":"/2018/10/28/Scrapyæ¡†æ¶(äºŒ)/","content":"\nä»å®ä¾‹ä¸­çœ‹scrapyæ¡†æ¶ä¸­å„éƒ¨åˆ†çš„åŠŸèƒ½\n\n![](https://wx1.sinaimg.cn/mw690/6c3e6b13gy1fwjoq4i6rcj20zk0wk4qp.jpg)\n\n<!--more-->\n\nå–çš„ç›®æ ‡ç½‘ç«™ä¸ºï¼šhttps://image.so.com\n\næ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼Œè¿‡æ»¤å™¨åˆ‡æ¢åˆ°XHRé€‰é¡¹,ä¸‹æ‹‰é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢å°±ä¼šå‘ˆç°è®¸å¤šAjaxè¯·æ±‚\n\n![](https://ask.qcloudimg.com/http-save/developer-news/q8remsppeb.jpeg)\n\n![](https://ask.qcloudimg.com/http-save/developer-news/7xvqjdt74l.jpeg)\n\nè¿”å›æ ¼å¼æ˜¯JSONã€‚å…¶ä¸­å­—æ®µå°±æ˜¯ä¸€å¼ å¼ å›¾ç‰‡çš„è¯¦æƒ…ä¿¡æ¯ï¼ŒåŒ…å«äº†30å¼ å›¾ç‰‡çš„IDã€åç§°ã€é“¾æ¥ã€ç¼©ç•¥å›¾ç­‰ä¿¡æ¯ã€‚å¦å¤–è§‚å¯ŸAjaxè¯·æ±‚çš„å‚æ•°ä¿¡æ¯ï¼Œæœ‰ä¸€ä¸ªå‚æ•°ä¸€ç›´åœ¨å˜åŒ–ï¼Œè¿™ä¸ªå‚æ•°å¾ˆæ˜æ˜¾å°±æ˜¯åç§»é‡ã€‚å½“ä¸º30æ—¶ï¼Œè¿”å›çš„æ˜¯å‰30å¼ å›¾ç‰‡ï¼Œsnä¸º60æ—¶ï¼Œè¿”å›çš„å°±æ˜¯ç¬¬31~60å¼ å›¾ç‰‡ã€‚\n\nå®é™…ä¸Šï¼Œæˆ‘ä»¬å‘æµè§ˆå™¨å‘é€ajaxè¯·æ±‚ï¼Œæˆ‘ä»¬ä»ç½‘å€ä¸Šï¼Œå³è¢«urlç¼–ç çš„paramsåˆ—è¡¨ï¼Œæ¯”å¦‚ï¼š\n\n![](http://ww1.sinaimg.cn/large/006YPp6gly1fwo4qvh794j311b0bu75u.jpg)\n\næˆ‘ä»¬çœ‹åˆ°äº†:\n\n1. ch\n2. sn\n3. listtype\n4. temp\n\næ‰€ä»¥æ‰€è°“çš„å‚æ•°åˆ—è¡¨\n\n```\nparams{\n    xxx\n    xxx\n    xxx\n}\n```\n\nåªç”¨å«æœ‰è¿™å‡ ä¸ªå‚æ•°å°±å¯ä»¥äº†ã€‚\n\n____\n\nåˆ†æå®Œæ¯•åï¼Œå¼€å§‹æ–°å»ºé¡¹ç›®.\n\n```\nscrapy startproject images360\n```\n\ncd åˆ°è¿™ä¸ªé¡¹ç›®çš„ spidersé¡¹ç›®ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªçˆ¬è™«åä¸º`images360`\n\n```\nscrapy genspider images360  images.so.com\n```\n\n**æœ‰äº†çˆ¬è™«ï¼Œæ¥ä¸‹æ¥åº”è¯¥åšä»€ä¹ˆï¼Ÿ**ğŸ§\n\n## ç¬¬ä¸€ ##\n\nè‚¯å®šæ˜¯è¦å¯¹spiderså¤„ç†ï¼Œæˆ‘ä»¬è¿›å…¥spidersæ–‡ä»¶å¤¹é‡Œé¢çš„`images.py`é‡Œçœ‹ï¼Œçˆ¬è™«æœ‰äº†ï¼Œæ–¹æ³•è¦æˆ‘ä»¬åˆ›å»ºã€‚\n\n![](http://ww1.sinaimg.cn/large/006YPp6gly1fwo522pfeyj30ld0ic0ti.jpg)\n\nè¿™é‡Œçš„çˆ¬è™«æœ‰ä¸‰ä¸ªéƒ¨åˆ†:\n\n*1* :  `name`æ˜¯çˆ¬è™«åï¼Œ`allowed_domain `æ˜¯è®¿é—®çš„åŸŸåï¼Œ`start_urls`çš„å«ä¹‰æ˜¯è¿‡æ»¤çˆ¬å–çš„åŸŸåï¼Œåœ¨æ’ä»¶OffsiteMiddlewareå¯ç”¨çš„æƒ…å†µä¸‹ï¼ˆé»˜è®¤æ˜¯å¯ç”¨çš„ï¼‰ï¼Œä¸åœ¨æ­¤å…è®¸èŒƒå›´å†…çš„åŸŸåå°±ä¼šè¢«è¿‡æ»¤ï¼Œè€Œä¸ä¼šè¿›è¡Œçˆ¬å–,\n\nè¯·æ³¨æ„,ä»¥ä¸Šä¸‰ä¸ªéƒ¨åˆ†ï¼Œéƒ½æ˜¯åœ¨æˆ‘ä»¬ç¬¬äºŒä¸ªå‘½ä»¤æ‰§è¡Œæ—¶ï¼ŒSæ¡†æ¶è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæˆ‘ä»¬ä¸ç”¨åŠ¨.\n\n*2*: `start_requests`å°±ç®—æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„é€šè¿‡å¾ªç¯å‘æµè§ˆå™¨å‘é€ajaxè¯·æ±‚ï¼Œ`parse`æ˜¯å¯¹è¿”å›çš„responseè¿›è¡Œè§£æï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒåŸºæœ¬çš„çˆ¬è™«å®ç°éƒ½æ˜¯åœ¨è¿™é‡Œåšçš„ã€‚\n\n\n\næˆ‘ä»¬é‡ç‚¹å…³æ³¨å…¶ä»–éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯æ¡†æ¶çš„å…¶ä»–ç¯èŠ‚\n\n```\nitem\nmiddleware\nsettings\npiplines\n```\n\n`item`:æ‰“ä¸ªæ¯”æ–¹ï¼Œä½ æƒ³è¦ä½ çˆ¬åˆ°çš„ä¸œè¥¿çš„ä»€ä¹ˆéƒ¨åˆ†ï¼Ÿä½ å¸Œæœ›ä»–ä»¬ä»¥ä»€ä¹ˆæ ·å­äº¤ç»™ä½ ï¼Ÿ\n\nâ€‹               æˆ‘æƒ³è¦ç½‘ç«™å›¾ç‰‡çš„id,é“¾æ¥åœ°å€ï¼Œä¸»é¢˜ï¼Œç¼©ç•¥å›¾,æˆ‘æƒ³è¦å®ƒä»¬ä»¥ä¸€ä¸ªå­—å…¸çš„å½¢å¼å‘ˆäº¤ç»™æˆ‘\n\nâ€‹              é‚£ä¹ˆï¼Œitem.pyå°±æ˜¯å¹²è¿™ä¸ªçš„.â€‹           \n\n![](http://ww1.sinaimg.cn/large/006YPp6gly1fwo5bmi8y8j30h80ai3ym.jpg)\n\n`middleware`:ä¸­é—´ä»¶ï¼Œä½œç”¨æ˜¯ä¿®æ”¹ä»£ç†ipå•¦ï¼Œè®¿é—®æµè§ˆå™¨çš„user_agentå•¦ï¼Œ[äº†è§£ä¸€ä¸‹](https://blog.csdn.net/yancey_blog/article/details/53896092) ,æ­¤ä¾‹ä¸ç”¨middleware     \n\n![](http://ww1.sinaimg.cn/large/006YPp6gly1fwo6sjw5saj30mq0p80ua.jpg)","tags":["çˆ¬è™«"]},{"title":"Ajaxå’ŒXHR","url":"/2018/10/28/Ajaxå’ŒXHR/","content":"\n  ajaxæ˜¯asynchronous javascript and XMLçš„ç®€å†™\n\n<!--more--->\n\n[æ‹œè¯»](https://www.cnblogs.com/xiaohuochai/p/6036475.html)\n\n<br><br><br><br>","tags":["å‰ç«¯åŸºç¡€"]},{"title":"Scrapyæ¡†æ¶è§£æ","url":"/2018/10/26/Scrapy/","content":"\nScrapyæ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„çˆ¬è™«æ¡†æ¶\n\n<!--more-->\n\n###  ä»€ä¹ˆæ˜¯Scrapyï¼Ÿ \n\n![](http://ww1.sinaimg.cn/large/006YPp6gly1fwml6x6211j30jg0dqdi2.jpg)\n\n`Scrapyæ˜¯ä¸€ä¸ªä¸ºäº†çˆ¬å–ç½‘ç«™æ•°æ®ï¼Œæå–ç»“æ„æ€§æ•°æ®è€Œç¼–å†™çš„åº”ç”¨æ¡†æ¶ã€‚ å¯ä»¥åº”ç”¨åœ¨åŒ…æ‹¬æ•°æ®æŒ–æ˜ï¼Œä¿¡æ¯å¤„ç†æˆ–å­˜å‚¨å†å²æ•°æ®ç­‰ä¸€ç³»åˆ—çš„ç¨‹åºä¸­`\n\n### 1 . [å…ˆå®‰è£…](https://www.cnblogs.com/lfoder/p/6565088.html)\n### 2. ç¬¬ä¸€ä¸ªé¡¹\n`scrapy startproject tutorial` \nç›´æ¥cmdæ‰§è¡Œï¼Œç„¶ååœ¨   c/user/xxx   è·¯å¾„ä¸‹ï¼Œå‡ºç°äº†ä¸€ä¸ªtutorial æ–‡ä»¶å¤¹\n\n\n\n\n\n### Downloader Middleware ğŸ”\n\nMiddleware æ˜¯æ•´ä¸ªscrapyæ¡†æ¶ä¸­è´Ÿè´£ç½‘é¡µä¸‹è½½ç¯èŠ‚çš„å·¥ä½œï¼Œæ¯”å¦‚è¯´ æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œå¹¶æœ‰ä¸ªè¯¥é¡¹ç›®ä¸‹çš„spider\n\n```python\n# -*- coding: utf-8 -*-\nimport scrapy\n\nclass HttpbinSpider(scrapy.Spider):\n    name = 'httpbin'\n    allowed_domains = ['httpbin.org']\n    start_urls = ['http://httpbin.org/get']\n\n    def parse(self, response):\n        self.logger.debug(response.text) #æ‰“å°å“åº”\n        self.logger.debug('Status Code: ' + str(response.status))\n```\n\næ‰§è¡Œspider\n\n```c&#39;m&#39;d\nscrapy crawl httpbin\n```\n\nå‘ç°è·å–åˆ°çš„å†…å®¹ä¸­å«æœ‰:\n\n```html\n2018-10-27 08:57:09 [scrapy.statscollectors] INFO: Dumping Scrapy stats:\n{'downloader/request_bytes': 439,\n 'downloader/request_count': 2,\n 'downloader/request_method_count/GET': 2,\n 'downloader/response_bytes': 768,\n 'downloader/response_count': 2,\n 'downloader/response_status_count/200': 2,\n 'finish_reason': 'finished',\n 'finish_time': datetime.datetime(2018, 10, 27, 0, 57, 9, 949044),\n 'log_count/DEBUG': 5,\n 'log_count/INFO': 7,\n 'response_received_count': 2,\n 'scheduler/dequeued': 1,\n 'scheduler/dequeued/memory': 1,\n 'scheduler/enqueued': 1,\n 'scheduler/enqueued/memory': 1,\n 'start_time': datetime.datetime(2018, 10, 27, 0, 57, 8, 773548)}\n```\n\nå…¶ä¸­çš„`headers`ä¸­çš„`User_Agent` æ˜¯`DownloaderMiddleware`å¹¶åˆ©ç”¨ process_requestï¼ˆï¼‰æ–¹æ³•è®¾ç½®çš„ User_Agent\n\næˆ‘ä»¬æ”¹åŠ¨ä¸€ä¸‹ `midddlerware.py`ï¼Œæ·»åŠ ä¸€ä¸ªRandomUserAgentMiddlewareç±» ï¼Œå¦‚ä¸‹\n\n```python\nimport random\n\nclass RandomUserAgentMiddleware(self):\n    def __init__():\n        self.user_agent=[\n        1.ä»£ç†\n        2.ä»£ç†\n        3.ä»£ç†\n        ]\n    def process_request(self,request,spider):\n        request.headers['User_Agent'] = random.choice(self.user_agent)\n```\n\nå¹¶ä¸”å¿…é¡»åœ¨settings.pyä¸­å–æ¶ˆæ³¨é‡Š:  `DOWNLOADER_MIDDLEWARES `å¹¶è®¾ç½®æˆå¦‚ä¸‹å†…å®¹:\n\n```\nDOWNLOADER_USERAGENT{\n    'scrapydownloadermiddtest.middlewares.RandomUserAgentMiddleware': 543,\n}\n```\n\næ¥ä¸‹æ¥æˆ‘ä»¬é‡æ–°è¿è¡Œ Spiderï¼Œå°±å¯ä»¥çœ‹åˆ° User-Agent è¢«æˆåŠŸä¿®æ”¹ä¸ºåˆ—è¡¨ä¸­æ‰€å®šä¹‰çš„éšæœºçš„ä¸€ä¸ª User-Agent äº†\n\n\n\n\n\n Downloader Middleware è¿˜æœ‰` process_response()`æ–¹æ³•ã€‚ Downloaderå¯¹ Request æ‰§è¡Œä¸‹è½½ä¹‹ åä¼šå¾—åˆ° Responseï¼Œéšå Scrapy å¼•æ“ä¼šå°† Response å‘é€å› Spiderè¿›è¡Œå¤„ç†ã€‚ ä½†æ˜¯åœ¨ Response è¢«å‘é€ ç»™ Spider ä¹‹å‰ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨` process_response()`æ–¹æ³•å¯¹ Response è¿›è¡Œå¤„ç†\n\n```\ndef process_response(self, request, response, spider):\n    response.status = 201 \n    return response` \n```\n\næˆ‘ä»¬å°† response å˜é‡çš„ status å±æ€§ä¿®æ”¹ä¸º 201 ï¼Œéšåå°† response è¿”å›ï¼Œè¿™ä¸ªè¢«ä¿®æ”¹åçš„ Response å°±ä¼šè¢«å‘é€åˆ° Spiderã€‚\næˆ‘ä»¬å†åœ¨ Spideré‡Œé¢è¾“å‡ºä¿®æ”¹åçš„çŠ¶æ€ç ï¼Œåœ¨ parse() æ–¹æ³•ä¸­æ·»åŠ å¦‚ä¸‹çš„è¾“å‡ºè¯­å¥ï¼š\n\n```\nself.logger.debugï¼ˆ'StatusCode:' + str(response.status)) \n```\n\né‡æ–°è¿è¡Œä¹‹åï¼Œæ§åˆ¶å°è¾“å‡ºäº†å¦‚ä¸‹å†…å®¹ï¼š\n`[httpbin] DEBUG: Status Code: 201 `\n\n Response çš„çŠ¶æ€ç æˆåŠŸä¿®æ”¹äº†ã€‚\nå› æ­¤è¦æƒ³å¯¹ Response è¿›è¡Œåå¤„ç†ï¼Œå°±å¯ä»¥å€ŸåŠ©äº` process_response()`æ–¹æ³•\n\n\n\n###  SpiderMiddleware ç”¨æ³•ğŸ³â€ğŸŒˆ\n\nSpiderä¸­é—´ä»¶æ˜¯åœ¨å¼•æ“åŠSpiderä¹‹é—´çš„ç‰¹å®šé’©å­(specific hook)ï¼Œå¤„ç†spiderçš„è¾“å…¥(response)å’Œè¾“å‡º(itemsåŠrequests)ã€‚ å…¶æä¾›äº†ä¸€ä¸ªç®€ä¾¿çš„æœºåˆ¶ï¼Œé€šè¿‡æ’å…¥è‡ªå®šä¹‰ä»£ç æ¥æ‰©å±•ScrapyåŠŸèƒ½ã€‚æ›´å¤šå†…å®¹è¯·çœ‹ Spiderä¸­é—´ä»¶(Middleware) \nä¸€å¥è¯æ€»ç»“å°±æ˜¯ï¼š`å¤„ç†è§£æéƒ¨`\n\n### Item PipeLine ç”¨æ³•ğŸ±â€ğŸ‘“\n\nå½“spiderçˆ¬å–åˆ°itemåï¼Œå®ƒè¢«å‘é€åˆ°é¡¹ç›®ç®¡é“ï¼ˆItem Pipelineï¼‰ï¼Œé€šè¿‡å‡ ä¸ªç»„ä»¶æŒ‰é¡ºåºè¿›è¡Œå¤„ç†ã€‚æ¯ä¸€ä¸ªItem Pipelineæ˜¯ä¸€ä¸ªå®ç°äº†ç®€å•æ–¹æ³•çš„Pythonç±»ï¼Œå®ƒæ¥æ”¶åˆ°ä¸€ä¸ªitemå¹¶å¯¹å…¶æ‰§è¡Œä¸€ä¸ªæ“ä½œï¼Œä¹Ÿè¦å†³å®šè¯¥itemæ˜¯å¦åº”è¯¥ç»§ç»­é€šè¿‡ç®¡é“ï¼Œæˆ–è€…è¢«ä¸¢å¼ƒï¼Œä¸å†è¿›è¡Œå¤„ç†ã€‚\n\n`ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬é€šè¿‡çˆ¬è™«çˆ¬å–çš„é¡¹ç›®ï¼Œå…ˆäº¤ç»™é¡¹ç›®ç®¡é“ï¼Œé¡¹ç›®ç®¡é“æŠŠæ•°æ®å¤„ç†å¤„ç†(åˆ é™¤ä¸€äº›å•¦ï¼Œå­˜åˆ°mongodbå•¦)äº§ç”Ÿæ–°çš„item`\n\n**Item Pipelineå…¸å‹çš„ç”¨é€”æ˜¯ï¼š**\n1.æ¸…ç†HTMLæ•°æ®\n2.éªŒè¯çˆ¬å–çš„æ•°æ®(æ£€æŸ¥itemsæ˜¯å¦åŒ…å«æŸäº›å­—æ®µ)\n3.æ£€æŸ¥å‰¯æœ¬(å¹¶åˆ é™¤å®ƒä»¬)\n4.å°†itemæ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“ä¸­\n\n`æ¯ä¸ªItem Pipelineéƒ½æ˜¯ä¸€ä¸ªPythonç±»`ï¼Œå®ƒå¿…é¡»å®ç°ä»¥ä¸‹æ–¹æ³•:\n\n**process_item(self, item, spider)**\n\nè¿™ä¸ªæ–¹æ³•å¯ä»¥è¢«æ¯ä¸ªItem Pipelineè°ƒç”¨ï¼Œprocess_item()å¿…é¡»æ˜¯:è¿”å›ä¸€ä¸ªå­—å…¸ç±»å‹æ•°æ®ã€è¿”å›ä¸€ä¸ªæ¡ç›®(æˆ–ä»»ä½•å­ç±»)å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ª Twisted Deferred æˆ–è€…DropItemå¼‚å¸¸ï¼Œä¸¢å¼ƒçš„itemä¸å†ç”±è¿›ä¸€æ­¥çš„Item Pipelineå¤„ç†ã€‚\nå‚æ•°å«ä¹‰ï¼š\nitemï¼š Itemå¯¹è±¡æˆ–å­—å…¸ï¼Œçˆ¬å–çš„item\nspiderï¼šspiderå¯¹è±¡ï¼Œçˆ¬å–äº†è¿™ä¸ªitemçš„spider\næ­¤å¤–ï¼Œä»–ä»¬è¿˜å¯ä»¥å®ç°ä»¥ä¸‹æ–¹æ³•:\n\n**open_spider(self, spider)** ->å½“spideræ‰“å¼€æ—¶ï¼Œå‡½æ•°å°±ä¼šè¢«è°ƒç”¨ï¼Œspiderå‚æ•°å«ä¹‰ï¼šè¢«æ‰“å¼€çš„spider\n**close_spider(self, spider)**  ->å½“spiderå…³é—­æ˜¯ï¼Œå‡½æ•°ä¼šè¢«è°ƒç”¨\n**from_crawler(cls, crawler)**  -> å¦‚æœå­˜åœ¨ï¼Œè¿™ä¸ªç±»æ–¹æ³•è¢«è°ƒç”¨æ¥ä»ä¸€ä¸ªCrawleråˆ›å»ºä¸€ä¸ªspiderå®ä¾‹ã€‚å®ƒå¿…é¡»è¿”å›ç®¡é“çš„ä¸€ä¸ªæ–°å®ä¾‹ï¼ŒCrawlerå¯¹è±¡æä¾›å¯¹æ‰€æœ‰çš„scrapyæ ¸å¿ƒç»„ä»¶çš„è®¿é—®ï¼Œæ¯”å¦‚è®¾ç½®å’Œä¿¡å·;è¿™æ˜¯ç®¡é“è®¿é—®å®ƒä»¬å¹¶å°†å…¶åŠŸèƒ½è¿æ¥åˆ°scrapyçš„ä¸€ç§æ–¹å¼ã€‚\n\n\n\n\n\n\n\n\n\n\n\n----\n\nå‚è€ƒé“¾æ¥:\n\nâ€‹              [Scrapyè¿›é˜¶,middlewareçš„ä½¿ç”¨](https://blog.csdn.net/xnby/article/details/52297047)\n\nâ€‹              [è¿ç»´å­¦Pythonä¹‹çˆ¬è™«é«˜çº§ç¯‡](http://blog.51cto.com/linuxliu/2068601?wx)\n\nâ€‹              ","tags":["çˆ¬è™«"]},{"title":"ä¸è¯¥æ­»çš„äººï¼Œè¿˜æ´»ç€","url":"/2018/10/21/nuisance/","content":"æˆ‘å†æ¬¡ä½“ä¼šåˆ°å°†è¦æ”¾å¼ƒçš„æ„Ÿè§‰ï¼Œæ­¤åˆ»æˆ‘æƒ³çš„å¹¶ä¸æ˜¯ï¼Œé»‘è‰²æˆä¸ºé»‘è‰²çš„åŸå› ï¼Œè€Œæ˜¯çœ¼å‰çš„çº¢è‰²ä¸ºä»€ä¹ˆè¿™ä¹ˆåˆºçœ¼ã€‚\n<!--more-->\n\n\n\n\n","tags":["è¯"]},{"title":"qppiumæ¨¡æ‹Ÿ---å¾®ä¿¡æœ‹å‹åœˆ","url":"/2018/10/20/wechatspider/","content":"\nåˆå°Androidçˆ¬è™«\n<!--more-->\n\n## 1. appiumä»‹ç» ## \n\n____\n\n[å®˜æ–¹æ–‡æ¡£](https://testerhome.com/wiki/appiumdoccn)\n\n```c\nAppium is an open source test automation framework for use with native and hybrid mobile apps.\n```\n\nå¦‚æœè¯´æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Seleniumåœ¨webç«¯å¯¹è¡Œä¸ºè¿›è¡Œæ¨¡æ‹Ÿï¼Œé‚£ä¹ˆAppniumå³æ˜¯æˆ‘ä»¬é’ˆå¯¹Appçš„æ“ä½œæ¨¡æ‹Ÿå™¨ã€‚\n\n## 2 . çˆ¬å–æ€è·¯\n___\n\nç‚¹å‡» Start ServeræŒ‰é’®å³å¯å¯åŠ¨ Appium çš„æœåŠ¡ï¼Œç›¸å½“äºå¼€å¯äº†ä¸€ä¸ª Appium æœåŠ¡å™¨ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ Appium å†…ç½®çš„é©±åŠ¨æˆ– Pythonä»£ç å‘ Appium çš„æœåŠ¡å™¨å‘é€ä¸€ç³»åˆ—æ“ä½œæŒ‡ä»¤ï¼Œ Appium å°±ä¼šæ ¹æ® ä¸åŒçš„æŒ‡ä»¤å¯¹ç§»åŠ¨è®¾å¤‡è¿›è¡Œé©±åŠ¨ï¼Œå®Œæˆä¸åŒçš„åŠ¨ä½œ\n\n![](http://ww1.sinaimg.cn/large/006YPp6gly1fwhfvq2ynqj30m50kiwfv.jpg)\n\nAppium è¿è¡Œä¹‹åæ­£åœ¨ç›‘å¬ 4723 ç«¯å£ ã€‚ æˆ‘ä»¬å¯ä»¥å‘æ­¤ç«¯å£å¯¹åº”çš„æœåŠ¡æ¥å£å‘é€æ“ä½œæŒ‡ä»¤ï¼Œæ­¤é¡µé¢å°±ä¼šæ˜¾ç¤ºè¿™ä¸ªè¿‡ç¨‹çš„æ“ä½œæ—¥å¿—\n\n![](http://ww1.sinaimg.cn/large/006YPp6gly1fwhfw7fi3fj30m30klgls.jpg)\n\n*å¼€å§‹è¿æ¥*\n\n\n1.Android æ‰‹æœºé€šè¿‡æ•°æ®çº¿å’Œè¿è¡Œ Appium çš„ PC ç›¸è¿ï¼ŒåŒæ—¶æ‰“å¼€ USB è°ƒè¯•åŠŸèƒ½\n2.cmd è¾“å…¥`adb devices`ï¼Œå¾—åˆ°è®¾å¤‡åç§°\n3.é…ç½®Capabilityå‚æ•°(å¦‚ä¸‹å›¾)ï¼Œå…¶ä¸­ï¼š\nâ€‹     //  platformNameï¼š å®ƒæ˜¯å¹³å°åç§°ï¼Œéœ€è¦åŒºåˆ† Android æˆ– iOSï¼Œæ­¤å¤„å¡«å†™ Android  \nâ€‹     //  deviceNameï¼š å®ƒæ˜¯è®¾å¤‡åç§°ï¼Œæ­¤å¤„æ˜¯æ‰‹æœºçš„å…·ä½“ç±»å‹ã€‚ \nâ€‹     //  appPackageï¼š å®ƒæ˜¯ App ç¨‹åºåŒ…åã€‚é€šè¿‡cmdå‘½ä»¤`adb shell pm list packages`å¯æŸ¥\nâ€‹     //  appActivityï¼š å®ƒæ˜¯å…¥å£ Activity åï¼Œè¿™é‡Œé€šå¸¸éœ€è¦ä»¥ï¼å¼€å¤´ã€‚\n4.start Session\n\nâ€‹                                                    \n\n![](http://ww1.sinaimg.cn/large/006YPp6gly1fwhfwunwn5j31160jignb.jpg)\n\n åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨appiumçœ‹åˆ°æ¯å—å…ƒç´ çš„idï¼Œxpathå®šä½ç­‰ä¿¡æ¯ï¼Œ åŒæ—¶ï¼Œ  tap(),click(),ç­‰åŠ¨ä½œå‡½æ•°ï¼Œä¹Ÿç»™æˆ‘ä»¬éšå¿ƒæ‰€æ¬²çš„æ¨¡æ‹Ÿæä¾›ç©ºé—´ã€‚\n\nå°±æ˜¯`å®šä½`+`è·å–`ï¼Œå¹¶æŠŠè·å–å†…å®¹å­˜å…¥MongoDB\n\n//å®šä½å¯é€šè¿‡ IDï¼Œæˆ–ç›´æ¥ XPATH å®šä½(äº‹å®ä¸Šï¼Œappiumå¾ˆäººæ€§åŒ–çš„ç›´æ¥ä¸ºç”¨æˆ·æä¾›äº†æŸå…ƒç´ çš„XPATHæŸ¥æ‰¾è·¯å¾„)\n\n//æˆªè‡³10.23 0:17 ä»æœªæ‰¾åˆ°è·å–æ–‡æœ¬å®‰å“å…ƒç´ å¯¹åº”çš„æ–‡æœ¬çš„æ–¹æ³•ã€‚\n\n```python\nimport os \nfrom appium import webdriver\nfrom appium.webdriver.common.touch_action import TouchAction\nfrom selenium.common.exceptions import NoSuchElementException\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom pymongo import MongoClient\nfrom time import sleep\nfrom processor import Processor\nfrom config import *\n\n\nclass Moments():\n    def __init__(self):\n        \"\"\"\n        åˆå§‹åŒ–\n        \"\"\"\n        # é©±åŠ¨é…ç½®\n        self.desired_caps = {\n            'platformName': PLATFORM,\n            'deviceName': DEVICE_NAME,\n            'appPackage': APP_PACKAGE,\n            'appActivity': APP_ACTIVITY\n        }\n        self.driver = webdriver.Remote(DRIVER_SERVER, self.desired_caps)\n        self.wait = WebDriverWait(self.driver, TIMEOUT)\n        self.client = MongoClient(MONGO_URL)\n        self.db = self.client[MONGO_DB]\n        self.collection = self.db[MONGO_COLLECTION]\n        # å¤„ç†å™¨\n        self.processor = Processor()\n    \n    def login(self):\n        \"\"\"\n        ç™»å½•å¾®ä¿¡\n        :return:\n        \"\"\"\n        # ç™»å½•æŒ‰é’®\n        login = self.wait.until(EC.presence_of_element_located((By.ID, 'com.tencent.mm:id/d75')))\n        login.click()\n        # æ‰‹æœºè¾“å…¥\n        phone = self.wait.until(EC.presence_of_element_located((By.ID, 'com.tencent.mm:id/hz')))\n        phone.set_text(USERNAME)\n        # ä¸‹ä¸€æ­¥\n        next = self.wait.until(EC.element_to_be_clickable((By.ID, 'com.tencent.mm:id/alr')))\n        next.click()\n        # å¯†ç \n        password = self.wait.until(\n            EC.presence_of_element_located((By.XPATH, '//*[@resource-id=\"com.tencent.mm:id/hz\"][1]')))\n        password.set_text(PASSWORD)\n        # æäº¤\n        submit = self.wait.until(EC.element_to_be_clickable((By.ID, 'com.tencent.mm:id/alr')))\n        submit.click()\n        submit = self.wait.until(EC.element_to_be_clickable((By.ID, 'com.tencent.mm:id/an3')))\n        submit.click()\n    \n    def enter(self):\n        \"\"\"\n        è¿›å…¥æœ‹å‹åœˆ\n        :return:\n        \"\"\"\n        # é€‰é¡¹å¡\n        tab = self.wait.until(\n            EC.presence_of_element_located((By.XPATH, '//android.widget.FrameLayout[@content-desc=\"å½“å‰æ‰€åœ¨é¡µé¢,ä¸wxid_br71rgy4kg5n22çš„èŠå¤©\"]/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout[1]/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.RelativeLayout/android.widget.LinearLayout/android.widget.RelativeLayout[3]/android.widget.LinearLayout/android.widget.RelativeLayout/android.widget.ImageView')))\n        tab.click()\n        # æœ‹å‹åœˆ\n        moments = self.wait.until(EC.presence_of_element_located((By.ID, 'com.tencent.mm:id/a7f')))\n        moments.click()\n    \n    def crawl(self):\n        \"\"\"\n        çˆ¬å–\n        :return:\n        \"\"\"\n        while True:\n            # å½“å‰é¡µé¢æ˜¾ç¤ºçš„æ‰€æœ‰çŠ¶æ€\n            items = self.wait.until(\n                EC.presence_of_all_elements_located(\n                    (By.XPATH,'//android.widget.FrameLayout[@content-desc=\"å½“å‰æ‰€åœ¨é¡µé¢,æœ‹å‹åœˆ\"]/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.RelativeLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.ListView/android.widget.FrameLayout')))\n            # ä¸Šæ»‘\n            self.driver.swipe(FLICK_START_X, FLICK_START_Y + FLICK_DISTANCE, FLICK_START_X, FLICK_START_Y)\n            # éå†æ¯æ¡çŠ¶æ€\n            for item in items:              \n                try:\n                    # æ˜µç§°\n                    nickname = self.wait.until(\n                EC.presence_of_all_elements_located(\n                    (By.XPATH,'//android.widget.FrameLayout[@content-desc=\"å½“å‰æ‰€åœ¨é¡µé¢,æœ‹å‹åœˆ\"]/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.RelativeLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.ListView/android.widget.FrameLayout[1]/android.widget.LinearLayout/android.widget.RelativeLayout/android.widget.TextView'))).text()\n                    # æ­£æ–‡\n                    content = self.wait.until(\n                EC.presence_of_all_elements_located(\n                    (By.XPATH,'//android.widget.FrameLayout[@content-desc=\"å½“å‰æ‰€åœ¨é¡µé¢,æœ‹å‹åœˆ\"]/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.RelativeLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.ListView/android.widget.FrameLayout[1]/android.widget.LinearLayout/android.widget.LinearLayout[1]/android.widget.LinearLayout/android.view.View'))).text()\n                    # æ—¥æœŸ\n                    date = self.wait.until(\n                EC.presence_of_all_elements_located(\n                    (By.XPATH,'//android.widget.FrameLayout[@content-desc=\"å½“å‰æ‰€åœ¨é¡µé¢,æœ‹å‹åœˆ\"]/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.view.ViewGroup/android.widget.FrameLayout/android.widget.FrameLayout/android.widget.RelativeLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.ListView/android.widget.FrameLayout[1]/android.widget.LinearLayout/android.widget.FrameLayout/android.widget.LinearLayout/android.widget.LinearLayout/android.widget.TextView'))).text()\n                    # å¤„ç†æ—¥æœŸ\n                    date = self.processor.date(date)\n                    print('ä¸€æ¬¡insertè®°å½•')\n                    print(nickname, content, date)\n                    data = {\n                        'nickname': nickname,\n                        'content': content,\n                        'date': date,\n                    }\n                    # æ’å…¥MongoDB\n                    self.collection.update({'nickname': nickname, 'content': content}, {'$set': data}, True)\n                    sleep(SCROLL_SLEEP_TIME)\n                except NoSuchElementException:\n                    pass\n    \n    def main(self):\n        \"\"\"\n        å…¥å£\n        :return:\n        \"\"\"\n        # ç™»å½•\n        self.login()\n        # è¿›å…¥æœ‹å‹åœˆ\n        self.enter()\n        # çˆ¬å–\n        self.crawl()\n\n\nif __name__ == '__main__':\n    moments = Moments()\n    moments.main()\n\n```\n\n\n\nå¯¹æœ‹å‹åœˆæ—¶é—´è¿›è¡Œå¤„ç†\n\n```python\nimport time\nimport re\n\n\nclass Processor():\n    def date(self, datetime):\n        \"\"\"\n        å¤„ç†æ—¶é—´\n        :param datetime: åŸå§‹æ—¶é—´\n        :return: å¤„ç†åæ—¶é—´\n        \"\"\"\n        if re.match('\\d+åˆ†é’Ÿå‰', datetime):\n            minute = re.match('(\\d+)', datetime).group(1)\n            datetime = time.strftime('%Y-%m-%d', time.localtime(time.time() - float(minute) * 60))\n        if re.match('\\d+å°æ—¶å‰', datetime):\n            hour = re.match('(\\d+)', datetime).group(1)\n            datetime = time.strftime('%Y-%m-%d', time.localtime(time.time() - float(hour) * 60 * 60))\n        if re.match('æ˜¨å¤©', datetime):\n            datetime = time.strftime('%Y-%m-%d', time.localtime(time.time() - 24 * 60 * 60))\n        if re.match('\\d+å¤©å‰', datetime):\n            day = re.match('(\\d+)', datetime).group(1)\n            datetime = time.strftime('%Y-%m-%d', time.localtime(time.time()) - float(day) * 24 * 60 * 60)\n        return datetime\n```\n\n\n\n\n\n---æœªå®Œå¾…ç»­\n\n\n\n\n\n\n\n\n\n","tags":["çˆ¬"]},{"title":"MongoDB","url":"/2018/10/20/MongoDB/","content":"\n*ä»€ä¹ˆæ˜¯MongoDB?æˆ‘ä»¬åˆè¯¥å»æ€æ ·ä½¿ç”¨å®ƒï¼Ÿ*\n\n<!--more-->\n\n`å·²åˆ `\n\n[MongoDBå®˜æ–¹æ–‡æ¡£](https://www.runoob.com/mongodb)\n\n[PyMongoæ˜¯åœ¨Pythonç¯å¢ƒä¸‹ä½¿ç”¨MongoDBçš„è¯­è¨€](https://blog.csdn.net/callinglove/article/details/45668673?utm_source=blogxgwz0)\n\nå†™äº†ä¸€åŠï¼Œå¿½ç„¶è§‰å¾—ï¼Œé’ˆå¯¹ é‚£äº›[å·¥å…·æ€§çš„]ï¼Œå°±è€è€å®å®æŠŠå®˜æ–¹çš„æ–‡æ¡£çœ‹æ‡‚ã€‚\n\n\n\n\n\n\n\n","tags":["å·¥å…·"]},{"title":"å†™åœ¨å­¦ä¹ ä»£ç†æ± å’Œcookieæ± ä¹‹å","url":"/2018/10/08/sougoupachong/","content":"\næœ‰å…³åŸºæœ¬æ€è·¯çš„æè¿°\n\n <!--more-->\n\nè¿™ç¯‡åšå®¢çš„ç›®çš„æ˜¯ï¼Œå°è¯•ææ‡‚æˆ‘æœ€è¿‘åšäº†ä»€ä¹ˆ.\n\næˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ç”¨ä»£ç†æ± ï¼Ÿ<br>\n\n```\néƒ¨åˆ†ç½‘ç«™æœ‰åçˆ¬è™«æªæ–½ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªipåœ°å€å¯¹è¯¥ç½‘ç«™è¿›è¡Œè¿‡å¤šçš„è®¿é—®æ—¶ï¼Œä¼šè¢«åçˆ¬è™«æœºåˆ¶è‡ªåŠ¨è§†ä¸ºçˆ¬è™«ï¼Œä»è€Œipæ‹‰é»‘.\n```\n\nä»£ç†æ± çš„æ„å»ºæ˜¯æ€æ ·çš„ï¼Ÿ<br>\n\n```\nå¯¹ç½‘ä¸Šçš„å…è´¹ipä»£ç†ç½‘ç«™è¿›è¡Œçˆ¬å–(è¥¿åˆºï¼Œproxy360)ï¼Œå®ƒä»¬ç½‘ç«™çš„ipæºæ˜¯å®Œå…¨æš´éœ²åœ¨ç½‘é¡µæºç ä¸Šçš„ï¼Œæˆ‘ä»¬åªç”¨ç®€å•çš„è¿›è¡Œåˆ†æï¼Œå°±å¯ä»¥æ‹¿åˆ°è¶³å¤Ÿçš„ip.\n```\n\nå¦‚æ­¤ä¸€æ¥ï¼Œæ€è·¯å¾ˆæ¸…æ™°ï¼Œè®¾è®¡ä¸€ä¸ªçˆ¬è™«ï¼Œé’ˆå¯¹å‡ ä¸ªå…è´¹çš„ç½‘ç«™è§£æçˆ¬å–ï¼Œå°†æ‹¿åˆ° ip è¿›è¡Œç­›é€‰ï¼Œæ’åï¼Œå­˜å…¥æ•°æ®åº“ã€‚  å¹¶å¯ä»¥å®ç°è·å–æ¥å£ï¼Œå³è°ƒå³ç”¨ã€‚\n\n`åŸºæœ¬æ¨¡å—åˆ†ä¸º 4å—ï¼šå­˜å‚¨æ¨¡å—ã€è·å–æ¨¡å—ã€æ£€æµ‹æ¨¡å—ã€æ¥å£æ¨¡å—`\n\n###\n\n1. å­˜å‚¨æ¨¡å—ï¼š è´Ÿè´£å­˜å‚¨æŠ“å–ä¸‹æ¥çš„ä»£ç†ã€‚ é¦–å…ˆè¦ä¿è¯ä»£ç†ä¸é‡å¤ï¼Œ è¦æ ‡è¯†ä»£ç†çš„å¯ç”¨æƒ…å†µï¼Œè¿˜ è¦åŠ¨æ€å®æ—¶å¤„ç†æ¯ä¸ªä»£ç†ï¼Œæ‰€ä»¥ä¸€ç§æ¯”è¾ƒé«˜æ•ˆå’Œæ–¹ä¾¿çš„å­˜å‚¨æ–¹å¼å°±æ˜¯ä½¿ç”¨ Redis çš„ Sorted Setï¼Œå³æœ‰åºé›†åˆã€‚\n\n2. è·å–æ¨¡å—ï¼š éœ€è¦å®šæ—¶åœ¨å„å¤§ä»£ç†ç½‘ç«™æŠ“å–ä»£ç†ã€‚ ä»£ç†å¯ä»¥æ˜¯å…è´¹å…¬å¼€ä»£ç†ä¹Ÿå¯ä»¥æ˜¯ä»˜è´¹ä»£ ç†ï¼Œä»£ç†çš„å½¢å¼éƒ½æ˜¯ IP åŠ ç«¯å£ï¼Œæ­¤æ¨¡å—å°½é‡ä»ä¸åŒæ¥æºè·å–ï¼Œå°½é‡æŠ“å–é«˜åŒ¿ä»£ç†ï¼ŒæŠ“å–æˆåŠŸ ä¹‹åå°†å¯ç”¨ä»£ç†ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚ \n\n3. æ£€æµ‹æ¨¡å—ï¼š éœ€è¦å®šæ—¶æ£€æµ‹æ•°æ®åº“ä¸­çš„ä»£ç†ã€‚ è¿™é‡Œéœ€è¦è®¾ç½®ä¸€ä¸ªæ£€æµ‹é“¾æ¥ï¼Œæœ€å¥½æ˜¯çˆ¬å–å“ªä¸ªç½‘ ç«™å°±æ£€æµ‹å“ªä¸ªç½‘ç«™ï¼Œè¿™æ ·æ›´åŠ æœ‰é’ˆå¯¹æ€§ï¼Œå¦‚æœè¦åšä¸€ä¸ªé€šç”¨å‹çš„ä»£ç†ï¼Œé‚£å¯ä»¥è®¾ç½®ç™¾åº¦ç­‰é“¾ æ¥æ¥æ£€æµ‹ã€‚ å¦å¤–ï¼Œæˆ‘ä»¬éœ€è¦æ ‡è¯†æ¯ä¸€ä¸ªä»£ç†çš„çŠ¶æ€ï¼Œå¦‚è®¾ç½®åˆ†æ•°æ ‡è¯†ï¼Œ 100 åˆ†ä»£è¡¨å¯ç”¨ï¼Œåˆ† æ•°è¶Šå°‘ä»£è¡¨è¶Šä¸å¯ç”¨ã€‚ æ£€æµ‹ä¸€æ¬¡ï¼Œå¦‚æœä»£ç†å¯ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†åˆ†æ•°æ ‡è¯†ç«‹å³è®¾ç½®ä¸º 100 æ»¡ åˆ†ï¼Œä¹Ÿå¯ä»¥åœ¨åŸåŸºç¡€ä¸ŠåŠ  låˆ†ï¼›å¦‚æœä»£ç†ä¸å¯ç”¨ï¼Œå¯ä»¥å°†åˆ†æ•°æ ‡è¯†å‡ l åˆ†ï¼Œå½“åˆ†æ•°æˆšåˆ°ä¸€å®šé˜” å€¼åï¼Œä»£ç†å°±ç›´æ¥ä»æ•°æ®åº“ç§»é™¤ã€‚ é€šè¿‡è¿™æ ·çš„æ ‡è¯†åˆ†æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¾¨åˆ«ä»£ç†çš„å¯ç”¨æƒ…å†µï¼Œ é€‰ç”¨çš„æ—¶å€™ä¼šæ›´æœ‰é’ˆå¯¹æ€§ã€‚ \n\n4. æ¥å£æ¨¡å—ï¼š éœ€è¦ç”¨ API æ¥æä¾›å¯¹å¤–æœåŠ¡çš„æ¥å£ ã€‚ å…¶å®æˆ‘ä»¬å¯ä»¥ç›´æ¥è¿æ¥æ•°æ®åº“é‡‡å–å¯¹åº”çš„æ•° æ®ï¼Œä½†æ˜¯è¿™æ ·å°±éœ€è¦çŸ¥é“æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ï¼Œå¹¶ä¸”è¦é…ç½®è¿æ¥ï¼Œè€Œæ¯”è¾ƒå®‰å…¨å’Œæ–¹ä¾¿çš„æ–¹å¼å°± æ˜¯æä¾›ä¸€ä¸ª Web API æ¥å£ï¼Œæˆ‘ä»¬é€šè¿‡è®¿é—®æ¥å£å³å¯æ‹¿åˆ°å¯ç”¨ä»£ç†ã€‚ å¦å¤–ï¼Œç”±äºå¯ç”¨ä»£ç†å¯èƒ½ æœ‰å¤šä¸ªï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªéšæœºè¿”å›æŸä¸ªå¯ç”¨ä»£ç†çš„æ¥å£ï¼Œè¿™æ ·å°±èƒ½ä¿è¯æ¯ä¸ªå¯ç”¨ä»£ç† éƒ½å¯ä»¥å–åˆ°ï¼Œå®ç°è´Ÿè½½å‡è¡¡\n\n![](http://ww1.sinaimg.cn/large/006YPp6gly1fw7uv32bfaj30px0cfahk.jpg)\n\n[æˆ‘ä»¬éœ€è¦è‡ªå·±é€ è½®å­å—](https://github.com/Python3WebSpider/ProxyPool)  æˆ‘è§‰å¾—è¿™è¦åˆ†æƒ…å†µã€‚ \n\n<br><br>\n\næˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ä½¿ç”¨cookieæ± \n\n```\ncookiesæ˜¯æˆ‘ä»¬ç™»é™†ä¸€ä¸ªé¡µé¢çš„æ¥å£ï¼Œä¸ç™»é™†å›ºç„¶å¯ä»¥è·å–ç½‘é¡µæºç ï¼Œä½†æ˜¯ä¼šå—è®¿é—®é™åˆ¶ï¼Œä»¥åŠä¸å…·æœ‰ä¸€äº›é¡µé¢çš„æƒé™ï¼Œæ¯”å¦‚å¾®åšæ¥è¯´ï¼Œæˆ‘ä»¬çš„cookieæ± å®é™…ä¸Šå°±æ˜¯å¤šä¸ªå¾®åšè´¦å·çš„ä¿¡æ¯ã€‚\n```\n\nä¸ä¸Šé¢ipæ± çš„æ­å»ºå·®åˆ«æ˜¯ä¸€äº›å¾®åšè´¦å·æ˜¯æˆ‘ä»¬éœ€è¦è‡ªå·±é€šè¿‡æŸäº›æ¸ é“è´­ä¹°çš„ã€‚\n\n[è½®å­](https://github.com/Python3WebSpider/CookiesPool)\n\n\n\n \n\n\n\n\n\n\n\n\n\n\n\n\n\n","tags":["çˆ¬è™«"]},{"title":"python ã® __new__()","url":"/2018/10/07/python_new/","content":"\n`åœ¨å­¦ä¹ ä»£ç†æ± ä¸­ï¼Œå‘ç°äº†è‡ªå·±æç½®çš„é—®é¢˜ã€‚æˆ‘å°è¯•é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæ¥ç†æ¸…   __ new __  () å’Œ __ init __()çš„å…³ç³».`\n\n <!--more-->\n\n\n\n```python\n# coding:utf-8\n\n\nclass Foo(object):\n    price = 50\n\n    def how_much_of_book(self, n):\n        print(self)\n        return self.price * n\n\nfoo = Foo()\nprint(foo.how_much_of_book(8))\nprint(dir(Foo))\n```\n\nâ¬†â¬†â¬†åˆ†æä¸Šé¢çš„ä»£ç ï¼Œè¿™ä¸ªç±»å®ä¾‹åŒ–è¿‡ç¨‹ï¼ŒFooç±»ç»§æ‰¿objectç±»ï¼Œç»§æ‰¿äº†objectçš„__new__æ–¹æ³•ã€‚å½“ä½ æ²¡æœ‰é‡è½½è¿™ä¸ªæ–¹æ³•(é€šä¿—æ¥è¯´ï¼Œ`ä½ æ²¡æœ‰åœ¨Fooç±»ä¸­æ²¡æœ‰å†™__new__æ–¹æ³•)`ï¼ŒFooå®ä¾‹åŒ–æ˜¯é»˜è®¤è‡ªåŠ¨è°ƒç”¨çˆ¶ç±»__new__æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›å€¼ä¸ºç±»çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯self, ç”¨æ¥æä¾›è¿™ä¸ªå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚\n\n```python\n# coding:utf-8\n\n\nclass Foo(object):\n    price = 50\n\n    def __new__(cls, *agrs, **kwds):\n        inst = object.__new__(cls, *agrs, **kwds)\n        print(inst)\n        return inst\n\n\n    def how_much_of_book(self, n):\n        print(self)\n        return self.price * n\n\nfoo = Foo()\nprint(foo.how_much_of_book(8))\n# <__main__.Foo object at 0x1006f2750>\n# <__main__.Foo object at 0x1006f2750>\n# 400\n```\n\nâ¬†â¬†â¬†è¯·çœ‹ä¸Šé¢ä»£ç ï¼ŒFooç±»ä¸­é‡è½½äº†__new__æ–¹æ³•ï¼Œå®ƒçš„è¿”å›å€¼ä¸ºFooç±»çš„å®ä¾‹å¯¹è±¡\n\n___\n\n\n\n`_init__ æ–¹æ³•ä¸ºåˆå§‹åŒ–æ–¹æ³•ï¼Œä¸ºç±»çš„å®ä¾‹æä¾›ä¸€äº›å±æ€§æˆ–å®Œæˆä¸€äº›åŠ¨ä½œ`\n\n```python\n# coding:utf-8\n\n\nclass Foo(object):\n\n    def __new__(cls, *agrs, **kwds):\n        inst = object.__new__(cls, *agrs, **kwds)\n        print(inst)\n        return inst\n\n\n    def __init__(self, price=50):\n        self.price = price\n\n    def how_much_of_book(self, n):\n        print(self)\n        return self.price * n\n\nfoo = Foo()\nprint(foo.how_much_of_book(8))\n\n# <__main__.Foo object at 0x1006f2750>\n# <__main__.Foo object at 0x1006f2750>\n# 400\n```\n\n\n\né‚£ä¹ˆè¯´åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ç”¨ä¸¤å¥è¯æ¥æ€»ç»“å°±æ˜¯:\n\nâ­__new__ æ–¹æ³•åˆ›å»ºå®ä¾‹å¯¹è±¡ä¾›__init__ æ–¹æ³•ä½¿ç”¨ï¼Œ__init__æ–¹æ³•å®šåˆ¶å®ä¾‹å¯¹è±¡ã€‚\n\n__â­new__ æ–¹æ³•å¿…é¡»è¿”å›å€¼ï¼Œ__init__æ–¹æ³•ä¸éœ€è¦è¿”å›å€¼ã€‚(å¦‚æœè¿”å›éNoneå€¼å°±æŠ¥é”™)\n\n</br></br>\n\næˆ‘ä»¬ä¸¾ä¸¤ä¸ªä¾‹å­ï¼Œè§‚å¯ŸNewçš„å¸¸è§ä¸¤ç§ç”¨æ³•\n\nç¬¬ä¸€ï¼š ç»§æ‰¿ä¸å¯å˜æ•°æ®ç±»å‹æ—¶éœ€è¦ç”¨åˆ°__new__æ–¹æ³•(like int, str, or tupleï¼‰ \n\n å°†è‹±å¯¸è½¬åŒ–æˆç±³\n\n```\n# coding:utf-8\n\n\nclass Inch(float):\n    \"Convert from inch to meter\"\n    def __new__(cls, arg=0.0):\n        return float.__new__(cls, arg*0.0254)\n\nprint(Inch(12))\n```\n\n</br>\n\nç¬¬äºŒ:   ç”¨åœ¨å…ƒç±»ï¼Œå®šåˆ¶åˆ›å»ºç±»å¯¹è±¡\n\n```python\n# coding:utf-8\n'''æ¥è‡ªhttp://eli.thegreenplace.net/2011/08/14/python-metaclasses-by-example'''\n\nclass MetaClass(type):\n\n    def __new__(meta, name, bases, dct):\n        print '-----------------------------------'\n        print \"Allocating memory for class\", name\n        print meta\n        print bases\n        print dct\n        return super(MetaClass, meta).__new__(meta, name, bases, dct)\n\n    def __init__(cls, name, bases, dct):\n        print '-----------------------------------'\n        print \"Initializing class\", name\n        print cls\n        print bases\n        print dct\n        super(MetaClass, cls).__init__(name, bases, dct)\n\n\nclass Myclass(object):\n    __metaclass__ = MetaClass\n\n    def foo(self, param):\n        print param\n\n\np = Myclass()\np.foo(\"hello\")\n\n# -----------------------------------\n# Allocating memory for class Myclass\n# <class '__main__.MetaClass'>\n# (<type 'object'>,)\n# {'__module__': '__main__', 'foo': <function foo at 0x1007f6500>, '__metaclass__': <class '__main__.MetaClass'>}\n# -----------------------------------\n# Initializing class Myclass\n# <class '__main__.Myclass'>\n# (<type 'object'>,)\n# {'__module__': '__main__', 'foo': <function foo at 0x1007f6500>, '__metaclass__': <class '__main__.MetaClass'>}\n# hello\n```\n\n`Myclassç›¸å½“äº æ‹·è´äº† MetaClass çš„æ–¹æ³•ï¼ŒMetaClass çš„ç§ç±»ä»ç„¶æ˜¯ MetaClassï¼Œå®šåˆ¶çš„init çš„ç§ç±» ä¹Ÿè‡ªç„¶æ˜¯Myclass`","tags":["å·¥å…·"]},{"title":"å…³äºæµ·","url":"/2018/10/07/photo/","content":"![](https://wx4.sinaimg.cn/mw690/6c3e6b13gy1fvyja7cikaj20uk0kedj0.jpg)\n<!--more-->\n![](https://wx3.sinaimg.cn/mw690/006lRDaTgy1fw2apaw5nlj32ro1ugnpe.jpg)\n</br>\n</br>\n<!--more-->","tags":["è¯"]},{"title":"GEETESTæ»‘åŠ¨éªŒè¯ç ç ´è§£","url":"/2018/10/04/huadongpojie/","content":"éªŒè¯ç çš„ç ´è§£ï¼Œæ˜¯ç½‘ç«™çˆ¬è™«æ­£å¸¸è¿è¡Œæ‰€å¿…é¡»å…·å¤‡çš„åŠŸèƒ½ã€‚\n\n<!--more-->   \n æ³¨: æœ¬æ–‡é’ˆå¯¹[*æ»‘åŠ¨éªŒè¯è¢«åˆ‡å‰²éšæœºæ‰“ä¹±ï¼Œå¹¶æ ¹æ®æºç ä¸­ **< DIV >** æ ‡ç­¾é¡ºåºè¿›è¡Œ **å–å—æ’åˆ—**  éªŒè¯æƒ…å†µ ï¼Œå±äºå¸¸è§çš„ä¸€ç§æ··æ·†æ–¹å¼*]\n\n___\n\nå…³é”®è¯ï¼š\n\n1. **<a href=\"#1\" target=\"_self\">å›¾åƒåˆ†æ</a>**\n2. **<a href=\"#2\" target=\"_self\">å›¾åƒæ‹¼æ¥</a>**\n\n\n<p id=\"1\"><br>å›¾åƒåˆ†æ:</p>\n\n\n   &nbsp;&nbsp; æˆ‘ä»¬ä»¥[è™å—…ç½‘](https://www.huxiu.com/)ç™»é™†é¡µé¢ä¸ºä¾‹ï¼Œæˆ‘ä»¬åœ¨è¾“å…¥æ‰‹æœºæ³¨å†Œå‰ï¼Œéœ€è¦é€šè¿‡ä¸€ä¸ªæ»‘åŠ¨å¼çš„ *captcha* ,æˆ‘ä»¬å¯ä»¥é€šè¿‡`webdriver.chrome  + selenium` æ¥æ¨¡æ‹Ÿæ‹–åŠ¨ï¼Œé—®é¢˜å°±åœ¨äºç©¶ç«Ÿè¦æ‹–åŠ¨å¤šè¿œï¼Ÿæ‹–åŠ¨çš„è·ç¦»ç©¶ç«Ÿæ˜¯å¤šå°‘ï¼Ÿ(offset ç©¶ç«Ÿæ˜¯å¤šå°‘ï¼Ÿ)\n\n\n![è¿™æ˜¯æˆªå›¾](http://ww1.sinaimg.cn/large/006YPp6gly1fvxl234pokj30dg07w76i.jpg)\n\n   &nbsp;&nbsp;ä»”ç»†ä¸€æƒ³ï¼Œå¦‚æœæœ‰ä¸€ä¸ªä¸å­˜åœ¨ç¼ºå£çš„**æºå›¾ç‰‡**ï¼Œé‚£å°±èˆ’æœäº†ï¼Œå› ä¸ºé‚£æ ·çš„è¯ï¼Œæˆ‘ä»¬åªéœ€æ¯”è¾ƒï¼Œ`æºå›¾å“ªäº›åƒç´ å—ï¼Œæ¯”ä¸Šé¢çš„å›¾å½¢é¢œè‰²æ›´æ·±ï¼Œä»è€Œåˆ¤æ–­å‡ºæ·±é¢œè‰²ç¼ºå£çš„ä½ç½®`,è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ï¼Œéœ€è¦æ¨¡æ‹Ÿæ‹–åŠ¨çš„è·ç¦»äº†ã€‚é‚£ä¹ˆä»å“ªé‡Œå¯ä»¥å¾—åˆ°åŸå§‹å›¾ç‰‡å‘¢ï¼Ÿ\n   F12å®¡æŸ¥ä»£ç æ—¶ï¼Œå‘ç°äº†è¿™æ ·ä¸¤ä¸ª< div>:\n\n![é»„çº¿æ ‡å‡º](http://ww1.sinaimg.cn/large/006YPp6gly1fvxku4epdej31620ew0uu.jpg)\n\næˆ‘ä»¬æ‰“å¼€åå‘ç°ï¼Œé‡Œé¢å›¾ç‰‡é“¾æ¥å…¨éƒ¨æŒ‡å‘å„è‡ªçš„é‚£ä¸€ä¸ªå›¾ç‰‡ï¼Œ[ä¸€ä¸ªé•¿è¿™æ ·](http://ww1.sinaimg.cn/large/006YPp6gly1fvxkuhcc8ij31630iq41p.jpg),[ä¸€ä¸ªé•¿è¿™æ ·](http://ww1.sinaimg.cn/large/006YPp6gly1fvxkxx3xzuj30kc0doabb.jpg),è¿™ï¼Œè¿™ï¼è¿™ä¸å°±æ˜¯æœ‰ç¼ºå£å’Œæ²¡ç¼ºå£çš„å›¾ç‰‡å—ï¼Ÿ\n<p id=\"2\"> <br><br> å›¾åƒæ‹¼æ¥:</p>\nç­‰ç­‰ï¼Œä¸ºä»€ä¹ˆä¹±äº†ï¼Ÿ\n\nå¯¹ï¼Œå¦‚æœæˆ‘ä»¬ä»”ç»†è§‚å¯Ÿï¼Œæˆ‘ä»¬å‘ç°å›¾ç‰‡æ˜¯è¢«åˆ‡å‰²æ‰“ä¹±äº†çš„ï¼Œè€Œä¸”ï¼Œæˆ‘ä»¬åˆ¤æ–­ï¼Œå¦‚æœæƒ³å¾—åˆ°åŸå›¾ï¼Œä¸€å®šæ˜¯è¦åƒæ‹¼ç§¯æœ¨ä¸€æ ·æŠŠè¿™äº›å°å—é‡æ–°æ’åˆ—ç»„åˆ,é‚£ä¹ˆï¼Œæœ‰ä»€ä¹ˆè§„å¾‹åœ¨å…¶ä¸­å‘¢ï¼Ÿæˆ‘ä»¬è¯¥æ€æ ·ä¸€ä¸ªä¸€ä¸ªæ‹¼å‘¢ï¼Ÿ\nå…¶å®ï¼Œä¸éš¾å‘ç°ï¼Œæˆ‘ä»¬åœ¨æ‰“å¼€é‚£ä¸¤ä¸ªæ ‡ç­¾åï¼Œæˆ‘ä»¬å‘ç°ä¸€äº›æ•´æ•´é½é½çš„ä»ä¸Šåˆ°ä¸‹çš„æ ‡ç­¾ï¼Œå¹¶ä¸”è¿˜æœ‰   `position`å±æ€§ï¼Œx,å€¼ä»¥12ä¸ºå·®ï¼Œæœ€å°1 æœ€å¤§ 277ï¼Œä½†yåªæœ‰ 0 æˆ– 58ï¼Œç”±æ­¤åˆ†æå‡ºï¼Œä»ä¸Šåˆ°ä¸‹ï¼Œæ˜¯æˆ‘ä»¬å–ç§¯æœ¨çš„é¡ºåºï¼Œå–æ‰“ä¹±å›¾çš„ç¬¬ä¸€ä¸ª(x,y)åæ ‡ç‚¹å¯¹åº”å¤„çš„ä¸€å—ç§¯æœ¨ï¼Œç„¶åæ‹¼æ¥åˆ°ä¸€ä¸ªç©ºç™½æ¡†çš„å·¦ä¸Šè§’ï¼Œç„¶åæ¥ç€ä»ä¹±å›¾é‡Œé¢å–å‡ºç¬¬äºŒä¸ªä½ç½®çš„ç§¯æœ¨ï¼Œç´§æŒ¨ç€åˆšæ‰é‚£ä¸€ä¸ªå‘å³ï¼Œæ­¤è¡Œæ»¡äº†æ¢ä¸‹ä¸€è¡Œï¼Œä»¥æ­¤ç±»æ¨,æœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå®Œæ•´å›¾ã€‚\nè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬çš„åˆ†æå°±ç»“æŸäº†ï¼Œç„¶åæˆ‘ä»¬é€šè¿‡åƒç´ æ¯”è¾ƒå°±å¯ä»¥æ‰¾å‡ºï¼Œç¼ºå£çš„ä½ç½®ï¼Œç„¶åæ¨¡æ‹Ÿæ‹–åŠ¨å°±okäº†ã€‚\næ³¨æ„ï¼Œå®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®éªŒæ€§æ¨¡æ‹Ÿæ‹–åŠ¨å‡ æ¬¡ï¼Œå†å¯¹æ‹–åŠ¨è·ç¦»distanceè¿›è¡Œå¾®ä¿®æ­£ï¼Œä»è€Œæé«˜å‡†ç¡®ç‡ã€‚\n<br><br>\n[æºç ](https://paste.ubuntu.com/p/y7PSVFdxsJ/)\n<br>\n[å‚è€ƒåšå®¢](https://www.jianshu.com/p/c8df1194b514)","tags":["çˆ¬è™«"]},{"title":"å¿«é€Ÿç†Ÿæ‚‰ markdown","url":"/2018/10/02/learn_MarkDown/","content":"*å¿«é€Ÿç†Ÿæ‚‰*        \n   ***markdown***\n\n<!--more-->        \n___\n>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨  **å¤§äºå·** ï¼Œæ¥è¡¨ç¤ºå¼•ç”¨\n\n~~æˆ‘ä»¬åœ¨æ–‡æœ¬ä¸¤è¾¹ï¼ŒåŠ ä¸Šä¸€å¯¹åŒæ³¢æµªå·ï¼Œå°±å¾—åˆ°åˆ é™¤ç‰¹æ•ˆ~~\n\n[æ–¹æ¡†å†…éƒ¨æ˜¯æ–‡æœ¬,ç‚¹å‡»è·³è½¬ç™¾åº¦](http://www.baidu.com)\n![å¦‚æœæ¡†èµ·å‰é¢åŠ ä¸ªæ„Ÿå¹å·ï¼Œä»£è¡¨æˆ‘è¦åŠ å›¾ç‰‡å›¾ç‰‡](http://ww1.sinaimg.cn/large/006YPp6gly1fvu4hphapdj307g08edh6.jpg)\nå€˜è‹¥æˆ‘å…ˆå†™ä¸‰ä¸ªäº•å·ï¼Œä»£è¡¨æˆ‘è¦å¼€å§‹**åˆ—è¡¨**ï¼Œ*ã€+å·å¸¦é¢†æ— åºï¼Œ1.å¸¦é¢†æœ‰åº\n###\n* k1\n* k2\n* k3\n1. l1\n2. l2\n3. l3\n###\nä¸€å¯¹åå¼•å·å¯ä»¥ç”Ÿæˆä¸€ä¸ª`èƒŒæ™¯åŠ æ·±`ï¼Œè¿™å¾ˆè®¨å–œ\nä¸”è¡¨æ ¼çš„åˆ›å»ºï¼Œæ ¼å¤–æ–¹ä¾¿ï¼Œåªç”¨æ·»åŠ ä¸€ç‚¹  |:----: |è¿™è¡¨æ˜ï¼Œæˆ‘æ­£åœ¨å†™è¡¨æ ¼\n|ç”µå½±|å¯¼æ¼”|è¯„åˆ†|\n|:----:|:----:|:----:|\n|å¤©æ³¨å®š|è´¾æ¨ŸæŸ¯|æœªçŸ¥|\n|æ±Ÿæ¹–å„¿å¥³|è´¾æ¨ŸæŸ¯|æœªçŸ¥|\n|ä¸‰å³¡å¥½äºº|è´¾æ¨ŸæŸ¯|æœªçŸ¥|\n|ç«™å°|è´¾æ¨ŸæŸ¯|æœªçŸ¥|\n\n\næˆ‘ä»¬è§„å®šç”¨ä¸‰ä¸ªåå¼•å·æ‹¬ä½ä»£ç å—\n```\nconst unsigned long int a ;\na = inf ;\n```\n[ç‚¹å‡»æŸ¥çœ‹æºç å›¾](http://ww1.sinaimg.cn/large/006YPp6gly1fvu792e3vuj30wx0npmz5.jpg)\n[ç‚¹å‡»æŸ¥çœ‹æ•ˆæœå›¾](http://ww1.sinaimg.cn/large/006YPp6gly1fvu6opl5ytj30j80ofagp.jpg)","tags":["å·¥å…·"]},{"title":"Hexo æ›´æ¢ä¸»é¢˜","url":"/2018/09/29/newtheme/","content":"\nç®€çŸ­çš„å…³äºHexoä¸»é¢˜æ›´æ–°é…ç½®çš„è¯´æ˜\nå½“ä½ éœ€è¦æ›´æ¢è‡ªå·±çš„åšå®¢ä¸»é¢˜æ—¶ï¼Œä½ éœ€è¦è¿™æ ·åšï¼š\n <!--more-->\n```\n\n\n$ git clone https://*********\n$ npm install hexo-renderer-pug --save\n$ npm install hexo-renderer-sass --save   #ä¸‹è½½ä¸»é¢˜æ–‡ä»¶å’Œæ¸²æŸ“å™¨ï¼Œå¦‚æœåœ¨ä¸‹è½½ç¬¬ä¸‰ä¸ªæ–‡ä»¶çš„è¿‡ç¨‹ä¸­æŠ¥é”™ï¼Œä½ å¯ä»¥è¯•è¯•npmå›½å†…é•œåƒï¼Œæˆ–ç§‘å­¦ä¸Šç½‘ã€‚\n\ntheme: ****        #æ‰“å¼€æ ¹ç›®å½•ä¸‹çš„_config.yml,å¹¶æ‰¾åˆ° themeå…³é”®å­—ï¼Œæ›´æ–°è‡ªå·±ä¸»é¢˜åç§°\n$ hexo clean\n$ hexo g           # ç”Ÿæˆé™æ€é¡µé¢\n$ hexo d           # ä¸Šä¼ åˆ°github\n```\n\n\n","tags":["å·¥å…·"]}]